/*
: http://creativecommons.org/publicdomain/zero/1.0/
 pixi.js - v4.6.2
 Compiled Thu, 30 Nov 2017 15:24:33 UTC

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license
 https://mths.be/punycode v1.4.1 by @mathias */
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,a,g){n!=Array.prototype&&n!=Object.prototype&&(n[a]=g.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var n=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+n++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(n){var a=0;return $jscomp.iteratorPrototype(function(){return a<n.length?{done:!1,value:n[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};$jscomp.iteratorFromArray=function(n,a){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var g=0,d={next:function(){if(g<n.length){var k=g++;return{value:a(k,n[k]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(n,a,g,d){if(a){g=$jscomp.global;n=n.split(".");for(d=0;d<n.length-1;d++){var k=n[d];k in g||(g[k]={});g=g[k]}n=n[n.length-1];d=g[n];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(g,n,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.values",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(a,g){return g})}},"es8","es3");
(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).PIXI=n()})(function(){return function k(a,g,d){function h(b,e){if(!g[b]){if(!a[b]){var l="function"==typeof require&&require;if(!e&&l)return l(b,!0);if(c)return c(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=g[b]={exports:{}};
a[b][0].call(e.exports,function(e){var c=a[b][1][e];return h(c?c:e)},e,e.exports,k,a,g,d)}return g[b].exports}for(var c="function"==typeof require&&require,f=0;f<d.length;f++)h(d[f]);return h}({1:[function(a,g,d){function k(c){var f=32;(c&=-c)&&f--;c&65535&&(f-=16);c&16711935&&(f-=8);c&252645135&&(f-=4);c&858993459&&(f-=2);c&1431655765&&--f;return f}"use restrict";d.INT_BITS=32;d.INT_MAX=2147483647;d.INT_MIN=-2147483648;d.sign=function(c){return(0<c)-(0>c)};d.abs=function(c){var f=c>>31;return(c^
f)-f};d.min=function(c,f){return f^(c^f)&-(c<f)};d.max=function(c,f){return c^(c^f)&-(c<f)};d.isPow2=function(c){return!(c&c-1)&&!!c};d.log2=function(c){var f=(65535<c)<<4;c>>>=f;var b=(255<c)<<3;c>>>=b;f|=b;b=(15<c)<<2;c>>>=b;f|=b;b=(3<c)<<1;return f|b|c>>>b>>1};d.log10=function(c){return 1E9<=c?9:1E8<=c?8:1E7<=c?7:1E6<=c?6:1E5<=c?5:1E4<=c?4:1E3<=c?3:100<=c?2:10<=c?1:0};d.popCount=function(c){c-=c>>>1&1431655765;c=(c&858993459)+(c>>>2&858993459);return 16843009*(c+(c>>>4)&252645135)>>>24};d.countTrailingZeros=
k;d.nextPow2=function(c){c+=0===c;--c;c|=c>>>1;c|=c>>>2;c|=c>>>4;c|=c>>>8;return(c|c>>>16)+1};d.prevPow2=function(c){c|=c>>>1;c|=c>>>2;c|=c>>>4;c|=c>>>8;c|=c>>>16;return c-(c>>>1)};d.parity=function(c){c^=c>>>16;c^=c>>>8;return 27030>>>((c^c>>>4)&15)&1};var h=Array(256);(function(c){for(var f=0;256>f;++f){var b=f,e=f,l=7;for(b>>>=1;b;b>>>=1)e<<=1,e|=b&1,--l;c[f]=e<<l&255}})(h);d.reverse=function(c){return h[c&255]<<24|h[c>>>8&255]<<16|h[c>>>16&255]<<8|h[c>>>24&255]};d.interleave2=function(c,f){c&=
65535;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(c|c<<1)&1431655765|((f|f<<1)&1431655765)<<1};d.deinterleave2=function(c,f){c=c>>>f&1431655765;c=(c|c>>>1)&858993459;c=(c|c>>>2)&252645135;c=(c|c>>>4)&16711935;return((c|c>>>16)&65535)<<16>>16};d.interleave3=function(c,f,b){c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<
4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;return(c|c<<2)&1227133513|((f|f<<2)&1227133513)<<1|((b|b<<2)&1227133513)<<2};d.deinterleave3=function(c,f){c=c>>>f&1227133513;c=(c|c>>>2)&3272356035;c=(c|c>>>4)&251719695;c=(c|c>>>8)&4278190335;return((c|c>>>16)&1023)<<22>>22};d.nextCombination=function(c){var f=c|c-1;return f+1|(~f&-~f)-1>>>k(c)+1}},{}],2:[function(a,g,d){function k(l,a,q){q=q||2;var k=a&&a.length,x=k?a[0]*q:l.length,d=h(l,0,x,q,!0),r=[];if(!d)return r;
var g;if(k){var u=q;k=[];var v;var t=0;for(v=a.length;t<v;t++){var y=a[t]*u;var A=t<v-1?a[t+1]*u:l.length;y=h(l,y,A,u,!1);y===y.next&&(y.steiner=!0);k.push(m(y))}k.sort(b);for(t=0;t<k.length;t++){a=k[t];u=d;if(u=e(a,u))a=w(u,a),c(a,a.next);d=c(d,d.next)}}if(l.length>80*q){var B=g=l[0];var E=k=l[1];for(u=q;u<x;u+=q)t=l[u],a=l[u+1],t<B&&(B=t),a<E&&(E=a),t>g&&(g=t),a>k&&(k=a);g=Math.max(g-B,k-E);g=0!==g?1/g:0}f(d,r,q,B,E,g);return r}function h(b,e,c,l,f){if(f===0<z(b,e,c,l))for(f=e;f<c;f+=l)var m=t(f,
b[f],b[f+1],m);else for(f=c-l;f>=e;f-=l)m=t(f,b[f],b[f+1],m);m&&r(m,m.next)&&(A(m),m=m.next);return m}function c(b,e){if(!b)return b;e||(e=b);do{var c=!1;if(b.steiner||!r(b,b.next)&&0!==x(b.prev,b,b.next))b=b.next;else{A(b);b=e=b.prev;if(b===b.next)break;c=!0}}while(c||b!==e);return e}function f(b,e,m,h,a,k,d){if(b){if(!d&&k){var g=b,t=g;do null===t.z&&(t.z=l(t.x,t.y,h,a,k)),t.prevZ=t.prev,t=t.nextZ=t.next;while(t!==g);t.prevZ.nextZ=null;t.prevZ=null;g=t;var y,B,E,z,D=1;do{t=g;var C=g=null;for(B=
0;t;){B++;var F=t;for(y=E=0;y<D&&(E++,F=F.nextZ,F);y++);for(z=D;0<E||0<z&&F;)0!==E&&(0===z||!F||t.z<=F.z)?(y=t,t=t.nextZ,E--):(y=F,F=F.nextZ,z--),C?C.nextZ=y:g=y,y.prevZ=C,C=y;t=F}C.nextZ=null;D*=2}while(1<B)}for(g=b;b.prev!==b.next;){t=b.prev;F=b.next;if(k)a:{C=b;z=h;var G=a,H=k;B=C.prev;E=C;D=C.next;if(0<=x(B,E,D))C=!1;else{var O=B.x>E.x?B.x>D.x?B.x:D.x:E.x>D.x?E.x:D.x,L=B.y>E.y?B.y>D.y?B.y:D.y:E.y>D.y?E.y:D.y;y=l(B.x<E.x?B.x<D.x?B.x:D.x:E.x<D.x?E.x:D.x,B.y<E.y?B.y<D.y?B.y:D.y:E.y<D.y?E.y:D.y,z,
G,H);z=l(O,L,z,G,H);for(G=C.nextZ;G&&G.z<=z;){if(G!==C.prev&&G!==C.next&&q(B.x,B.y,E.x,E.y,D.x,D.y,G.x,G.y)&&0<=x(G.prev,G,G.next)){C=!1;break a}G=G.nextZ}for(G=C.prevZ;G&&G.z>=y;){if(G!==C.prev&&G!==C.next&&q(B.x,B.y,E.x,E.y,D.x,D.y,G.x,G.y)&&0<=x(G.prev,G,G.next)){C=!1;break a}G=G.prevZ}C=!0}}else a:if(C=b,B=C.prev,E=C,D=C.next,0<=x(B,E,D))C=!1;else{for(y=C.next.next;y!==C.prev;){if(q(B.x,B.y,E.x,E.y,D.x,D.y,y.x,y.y)&&0<=x(y.prev,y,y.next)){C=!1;break a}y=y.next}C=!0}if(C)e.push(t.i/m),e.push(b.i/
m),e.push(F.i/m),A(b),g=b=F.next;else if(b=F,b===g){if(!d)f(c(b),e,m,h,a,k,1);else if(1===d){d=e;g=m;t=b;do F=t.prev,C=t.next.next,!r(F,C)&&u(F,t,t.next,C)&&v(F,C)&&v(C,F)&&(d.push(F.i/g),d.push(t.i/g),d.push(C.i/g),A(t),A(t.next),t=b=C),t=t.next;while(t!==b);b=t;f(b,e,m,h,a,k,2)}else if(2===d)a:{d=b;do{for(g=d.next.next;g!==d.prev;){if(t=d.i!==g.i){t=d;F=g;if(C=t.next.i!==F.i&&t.prev.i!==F.i){b:{C=t;do{if(C.i!==t.i&&C.next.i!==t.i&&C.i!==F.i&&C.next.i!==F.i&&u(C,C.next,t,F)){C=!0;break b}C=C.next}while(C!==
t);C=!1}C=!C}if(C=C&&v(t,F)&&v(F,t)){C=t;B=!1;E=(t.x+F.x)/2;F=(t.y+F.y)/2;do C.y>F!==C.next.y>F&&C.next.y!==C.y&&E<(C.next.x-C.x)*(F-C.y)/(C.next.y-C.y)+C.x&&(B=!B),C=C.next;while(C!==t);C=B}t=C}if(t){b=w(d,g);d=c(d,d.next);b=c(b,b.next);f(d,e,m,h,a,k);f(b,e,m,h,a,k);break a}g=g.next}d=d.next}while(d!==b)}break}}}}function b(b,e){return b.x-e.x}function e(b,e){var c=e,l=b.x,f=b.y,m=-Infinity;do{if(f<=c.y&&f>=c.next.y&&c.next.y!==c.y){var h=c.x+(f-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=l&&h>m){m=
h;if(h===l){if(f===c.y)return c;if(f===c.next.y)return c.next}var a=c.x<c.next.x?c:c.next}}c=c.next}while(c!==e);if(!a)return null;if(l===m)return a.prev;e=a;h=a.x;var k=a.y,d=Infinity;for(c=a.next;c!==e;){if(l>=c.x&&c.x>=h&&l!==c.x&&q(f<k?l:m,f,h,k,f<k?m:l,f,c.x,c.y)){var x=Math.abs(f-c.y)/(l-c.x);(x<d||x===d&&c.x>a.x)&&v(c,b)&&(a=c,d=x)}c=c.next}return a}function l(b,e,c,l,f){b=32767*(b-c)*f;e=32767*(e-l)*f;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;e=(e|e<<8)&16711935;e=(e|e<<
4)&252645135;e=(e|e<<2)&858993459;return(b|b<<1)&1431655765|((e|e<<1)&1431655765)<<1}function m(b){var e=b,c=b;do e.x<c.x&&(c=e),e=e.next;while(e!==b);return c}function q(b,e,c,l,f,m,h,a){return 0<=(f-h)*(e-a)-(b-h)*(m-a)&&0<=(b-h)*(l-a)-(c-h)*(e-a)&&0<=(c-h)*(m-a)-(f-h)*(l-a)}function x(b,e,c){return(e.y-b.y)*(c.x-e.x)-(e.x-b.x)*(c.y-e.y)}function r(b,e){return b.x===e.x&&b.y===e.y}function u(b,e,c,l){return r(b,e)&&r(c,l)||r(b,l)&&r(c,e)?!0:0<x(b,e,c)!==0<x(b,e,l)&&0<x(c,l,b)!==0<x(c,l,e)}function v(b,
e){return 0>x(b.prev,b,b.next)?0<=x(b,e,b.next)&&0<=x(b,b.prev,e):0>x(b,e,b.prev)||0>x(b,b.next,e)}function w(b,e){var c=new y(b.i,b.x,b.y),l=new y(e.i,e.x,e.y),f=b.next,m=e.prev;b.next=e;e.prev=b;c.next=f;f.prev=c;l.next=c;c.prev=l;m.next=l;l.prev=m;return l}function t(b,e,c,l){b=new y(b,e,c);l?(b.next=l.next,b.prev=l,l.next.prev=b,l.next=b):(b.prev=b,b.next=b);return b}function A(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function y(b,
e,c){this.i=b;this.x=e;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function z(b,e,c,l){for(var f=0,m=c-l;e<c;e+=l)f+=(b[m]-b[e])*(b[e+1]+b[m+1]),m=e;return f}g.exports=k;g.exports.default=k;k.deviation=function(b,e,c,l){var f=e&&e.length,m=Math.abs(z(b,0,f?e[0]*c:b.length,c));if(f){f=0;for(var h=e.length;f<h;f++)m-=Math.abs(z(b,e[f]*c,f<h-1?e[f+1]*c:b.length,c))}for(f=e=0;f<l.length;f+=3){h=l[f]*c;var a=l[f+1]*c,q=l[f+2]*c;e+=Math.abs((b[h]-b[q])*(b[a+1]-b[h+1])-
(b[h]-b[a])*(b[q+1]-b[h+1]))}return 0===m&&0===e?0:Math.abs((e-m)/m)};k.flatten=function(b){for(var e=b[0][0].length,c={vertices:[],holes:[],dimensions:e},l=0,f=0;f<b.length;f++){for(var m=0;m<b[f].length;m++)for(var h=0;h<e;h++)c.vertices.push(b[f][m][h]);0<f&&(l+=b[f-1].length,c.holes.push(l))}return c}},{}],3:[function(a,g,d){function k(){}function h(b,c,f){this.fn=b;this.context=c;this.once=f||!1}function c(){this._events=new k;this._eventsCount=0}var f=Object.prototype.hasOwnProperty,b="~";Object.create&&
(k.prototype=Object.create(null),(new k).__proto__||(b=!1));c.prototype.eventNames=function(){var e=[],c,m;if(0===this._eventsCount)return e;for(m in c=this._events)f.call(c,m)&&e.push(b?m.slice(1):m);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(c)):e};c.prototype.listeners=function(e,c){e=this._events[b?b+e:e];if(c)return!!e;if(!e)return[];if(e.fn)return[e.fn];c=0;for(var l=e.length,f=Array(l);c<l;c++)f[c]=e[c].fn;return f};c.prototype.emit=function(e,c,f,h,a,k){var l=
b?b+e:e;if(!this._events[l])return!1;l=this._events[l];var m=arguments.length,q;if(l.fn){l.once&&this.removeListener(e,l.fn,void 0,!0);switch(m){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,c),!0;case 3:return l.fn.call(l.context,c,f),!0;case 4:return l.fn.call(l.context,c,f,h),!0;case 5:return l.fn.call(l.context,c,f,h,a),!0;case 6:return l.fn.call(l.context,c,f,h,a,k),!0}var d=1;for(q=Array(m-1);d<m;d++)q[d-1]=arguments[d];l.fn.apply(l.context,q)}else{var x=l.length;for(d=
0;d<x;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),m){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,c);break;case 3:l[d].fn.call(l[d].context,c,f);break;case 4:l[d].fn.call(l[d].context,c,f,h);break;default:if(!q){var r=1;for(q=Array(m-1);r<m;r++)q[r-1]=arguments[r]}l[d].fn.apply(l[d].context,q)}}return!0};c.prototype.on=function(e,c,f){c=new h(c,f||this);e=b?b+e:e;this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],c]:this._events[e].push(c):
(this._events[e]=c,this._eventsCount++);return this};c.prototype.once=function(e,c,f){c=new h(c,f||this,!0);e=b?b+e:e;this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],c]:this._events[e].push(c):(this._events[e]=c,this._eventsCount++);return this};c.prototype.removeListener=function(e,c,f,h){e=b?b+e:e;if(!this._events[e])return this;if(!c)return 0===--this._eventsCount?this._events=new k:delete this._events[e],this;var l=this._events[e];if(l.fn)l.fn!==c||h&&!l.once||f&&l.context!==
f||(0===--this._eventsCount?this._events=new k:delete this._events[e]);else{for(var m=0,a=[],q=l.length;m<q;m++)(l[m].fn!==c||h&&!l[m].once||f&&l[m].context!==f)&&a.push(l[m]);a.length?this._events[e]=1===a.length?a[0]:a:0===--this._eventsCount?this._events=new k:delete this._events[e]}return this};c.prototype.removeAllListeners=function(e){e?(e=b?b+e:e,this._events[e]&&(0===--this._eventsCount?this._events=new k:delete this._events[e])):(this._events=new k,this._eventsCount=0);return this};c.prototype.off=
c.prototype.removeListener;c.prototype.addListener=c.prototype.on;c.prototype.setMaxListeners=function(){return this};c.prefixed=b;c.EventEmitter=c;"undefined"!==typeof g&&(g.exports=c)},{}],4:[function(a,g,d){(function(a){var h=/iPhone/i,c=/iPod/i,f=/iPad/i,b=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,e=/Android/i,l=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,m=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,q=/Windows Phone/i,k=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,
d=/BlackBerry/i,u=/BB10/i,v=/Opera Mini/i,w=/(CriOS|Chrome)(?=.*\bMobile\b)/i,t=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,A=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,y=function(a){a=a||navigator.userAgent;var x=a.split("[FBAN");"undefined"!==typeof x[1]&&(a=x[0]);x=a.split("Twitter");"undefined"!==typeof x[1]&&(a=x[0]);this.apple={phone:h.test(a),ipod:c.test(a),tablet:!h.test(a)&&f.test(a),device:h.test(a)||c.test(a)||f.test(a)};this.amazon={phone:l.test(a),tablet:!l.test(a)&&m.test(a),device:l.test(a)||
m.test(a)};this.android={phone:l.test(a)||b.test(a),tablet:!l.test(a)&&!b.test(a)&&(m.test(a)||e.test(a)),device:l.test(a)||m.test(a)||b.test(a)||e.test(a)};this.windows={phone:q.test(a),tablet:k.test(a),device:q.test(a)||k.test(a)};this.other={blackberry:d.test(a),blackberry10:u.test(a),opera:v.test(a),firefox:t.test(a),chrome:w.test(a),device:d.test(a)||u.test(a)||v.test(a)||t.test(a)||w.test(a)};this.seven_inch=A.test(a);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||
this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if("undefined"===typeof window)return this},z=function(){var b=new y;b.Class=y;return b};"undefined"!==typeof g&&g.exports&&"undefined"===typeof window?g.exports=y:"undefined"!==typeof g&&g.exports&&"undefined"!==typeof window?g.exports=z():a.isMobile=z()})(this)},{}],5:[function(a,g,d){var k=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,
c=Object.prototype.propertyIsEnumerable;g.exports=function(){try{if(!Object.assign)return!1;var c=new String("abc");c[5]="de";if("5"===Object.getOwnPropertyNames(c)[0])return!1;var b={};for(c=0;10>c;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(e){return b[e]}).join(""))return!1;var e={};"abcdefghijklmnopqrst".split("").forEach(function(b){e[b]=b});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},e)).join("")?!1:!0}catch(l){return!1}}()?
Object.assign:function(f,b){if(null===f||void 0===f)throw new TypeError("Object.assign cannot be called with null or undefined");var e=Object(f);for(var l,m=1;m<arguments.length;m++){var a=Object(arguments[m]);for(var d in a)h.call(a,d)&&(e[d]=a[d]);if(k){l=k(a);for(var r=0;r<l.length;r++)c.call(a,l[r])&&(e[l[r]]=a[l[r]])}}return e}},{}],6:[function(a,g,d){var k=new ArrayBuffer(0),h=function(c,f,b,e){this.gl=c;this.buffer=c.createBuffer();this.type=f||c.ARRAY_BUFFER;this.drawType=e||c.STATIC_DRAW;
this.data=k;b&&this.upload(b);this._updateID=0};h.prototype.upload=function(c,f,b){b||this.bind();b=this.gl;c=c||this.data;this.data.byteLength>=c.byteLength?b.bufferSubData(this.type,f||0,c):b.bufferData(this.type,c,this.drawType);this.data=c};h.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)};h.createVertexBuffer=function(c,f,b){return new h(c,c.ARRAY_BUFFER,f,b)};h.createIndexBuffer=function(c,f,b){return new h(c,c.ELEMENT_ARRAY_BUFFER,f,b)};h.create=function(c,f,b,e){return new h(c,
f,b,e)};h.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};g.exports=h},{}],7:[function(a,g,d){var k=a("./GLTexture"),h=function(c,f,b){this.gl=c;this.framebuffer=c.createFramebuffer();this.texture=this.stencil=null;this.width=f||100;this.height=b||100};h.prototype.enableTexture=function(c){var f=this.gl;this.texture=c||new k(f);this.texture.bind();this.bind();f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.texture.texture,0)};h.prototype.enableStencil=function(){if(!this.stencil){var c=
this.gl;this.stencil=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,this.stencil);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,this.stencil);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,this.width,this.height)}};h.prototype.clear=function(c,f,b,e){this.bind();var l=this.gl;l.clearColor(c,f,b,e);l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)};h.prototype.bind=function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer)};h.prototype.unbind=
function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,null)};h.prototype.resize=function(c,f){var b=this.gl;this.width=c;this.height=f;this.texture&&this.texture.uploadData(null,c,f);this.stencil&&(b.bindRenderbuffer(b.RENDERBUFFER,this.stencil),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,c,f))};h.prototype.destroy=function(){var c=this.gl;this.texture&&this.texture.destroy();c.deleteFramebuffer(this.framebuffer);this.texture=this.stencil=this.gl=null};h.createRGBA=function(c,f,b,e){e=
k.fromData(c,null,f,b);e.enableNearestScaling();e.enableWrapClamp();c=new h(c,f,b);c.enableTexture(e);c.unbind();return c};h.createFloat32=function(c,f,b,e){e=new k.fromData(c,e,f,b);e.enableNearestScaling();e.enableWrapClamp();c=new h(c,f,b);c.enableTexture(e);c.unbind();return c};g.exports=h},{"./GLTexture":9}],8:[function(a,g,d){var k=a("./shader/compileProgram"),h=a("./shader/extractAttributes"),c=a("./shader/extractUniforms"),f=a("./shader/setPrecision"),b=a("./shader/generateUniformAccessObject");
a=function(e,l,m,a,d){this.gl=e;a&&(l=f(l,a),m=f(m,a));this.program=k(e,l,m,d);this.attributes=h(e,this.program);this.uniformData=c(e,this.program);this.uniforms=b(e,this.uniformData)};a.prototype.bind=function(){this.gl.useProgram(this.program);return this};a.prototype.destroy=function(){this.uniforms=this.uniformData=this.attributes=null;this.gl.deleteProgram(this.program)};g.exports=a},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,
"./shader/setPrecision":22}],9:[function(a,g,d){var k=function(c,f,b,e,l){this.gl=c;this.texture=c.createTexture();this.premultiplyAlpha=this.mipmap=!1;this.width=f||-1;this.height=b||-1;this.format=e||c.RGBA;this.type=l||c.UNSIGNED_BYTE};k.prototype.upload=function(c){this.bind();var f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var b=c.videoWidth||c.width,e=c.videoHeight||c.height;e!==this.height||b!==this.width?f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,
this.type,c):f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.format,this.type,c);this.width=b;this.height=e};var h=!1;k.prototype.uploadData=function(c,f,b){this.bind();var e=this.gl;if(c instanceof Float32Array){if(!h)if(e.getExtension("OES_texture_float"))h=!0;else throw Error("floating point textures not available");this.type=e.FLOAT}else this.type=this.type||e.UNSIGNED_BYTE;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);f!==this.width||b!==this.height?e.texImage2D(e.TEXTURE_2D,
0,this.format,f,b,0,this.format,this.type,c||null):e.texSubImage2D(e.TEXTURE_2D,0,0,0,f,b,this.format,this.type,c||null);this.width=f;this.height=b};k.prototype.bind=function(c){var f=this.gl;void 0!==c&&f.activeTexture(f.TEXTURE0+c);f.bindTexture(f.TEXTURE_2D,this.texture)};k.prototype.unbind=function(){var c=this.gl;c.bindTexture(c.TEXTURE_2D,null)};k.prototype.minFilter=function(c){var f=this.gl;this.bind();this.mipmap?f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,c?f.LINEAR_MIPMAP_LINEAR:
f.NEAREST_MIPMAP_NEAREST):f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,c?f.LINEAR:f.NEAREST)};k.prototype.magFilter=function(c){var f=this.gl;this.bind();f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,c?f.LINEAR:f.NEAREST)};k.prototype.enableMipmap=function(){var c=this.gl;this.bind();this.mipmap=!0;c.generateMipmap(c.TEXTURE_2D)};k.prototype.enableLinearScaling=function(){this.minFilter(!0);this.magFilter(!0)};k.prototype.enableNearestScaling=function(){this.minFilter(!1);this.magFilter(!1)};
k.prototype.enableWrapClamp=function(){var c=this.gl;this.bind();c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)};k.prototype.enableWrapRepeat=function(){var c=this.gl;this.bind();c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)};k.prototype.enableWrapMirrorRepeat=function(){var c=this.gl;this.bind();c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.MIRRORED_REPEAT);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.MIRRORED_REPEAT)};k.prototype.destroy=function(){this.gl.deleteTexture(this.texture)};k.fromSource=function(c,f,b){c=new k(c);c.premultiplyAlpha=b||!1;c.upload(f);return c};k.fromData=function(c,f,b,e){c=new k(c);c.uploadData(f,b,e);return c};g.exports=k},{}],10:[function(a,g,d){function k(c,f){this.nativeVaoExtension=null;k.FORCE_NATIVE||(this.nativeVaoExtension=c.getExtension("OES_vertex_array_object")||c.getExtension("MOZ_OES_vertex_array_object")||
c.getExtension("WEBKIT_OES_vertex_array_object"));this.nativeState=f;this.nativeVaoExtension&&(this.nativeVao=this.nativeVaoExtension.createVertexArrayOES(),f=c.getParameter(c.MAX_VERTEX_ATTRIBS),this.nativeState={tempAttribState:Array(f),attribState:Array(f)});this.gl=c;this.attributes=[];this.indexBuffer=null;this.dirty=!1}var h=a("./setVertexAttribArrays");k.prototype.constructor=k;g.exports=k;k.FORCE_NATIVE=!1;k.prototype.bind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);
if(this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this};k.prototype.unbind=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null);return this};k.prototype.activate=function(){for(var c=this.gl,f=null,b=0;b<this.attributes.length;b++){var e=this.attributes[b];f!==e.buffer&&(e.buffer.bind(),f=e.buffer);c.vertexAttribPointer(e.attribute.location,e.attribute.size,e.type||c.FLOAT,e.normalized||!1,e.stride||
0,e.start||0)}h(c,this.attributes,this.nativeState);this.indexBuffer&&this.indexBuffer.bind();return this};k.prototype.addAttribute=function(c,f,b,e,l,m){this.attributes.push({buffer:c,attribute:f,location:f.location,type:b||this.gl.FLOAT,normalized:e||!1,stride:l||0,start:m||0});this.dirty=!0;return this};k.prototype.addIndex=function(c){this.indexBuffer=c;this.dirty=!0;return this};k.prototype.clear=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);this.attributes.length=
0;this.indexBuffer=null;return this};k.prototype.draw=function(c,f,b){var e=this.gl;this.indexBuffer?e.drawElements(c,f||this.indexBuffer.data.length,e.UNSIGNED_SHORT,2*(b||0)):e.drawArrays(c,b,f||this.getSize());return this};k.prototype.destroy=function(){this.nativeState=this.attributes=this.indexBuffer=this.gl=null;this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao);this.nativeVao=this.nativeVaoExtension=null};k.prototype.getSize=function(){var c=this.attributes[0];return c.buffer.data.length/
(c.stride/4||c.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(a,g,d){g.exports=function(a,h){a=a.getContext("webgl",h)||a.getContext("experimental-webgl",h);if(!a)throw Error("This browser does not support webGL. Try using the canvas renderer");return a}},{}],12:[function(a,g,d){a={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),
shader:a("./shader")};"undefined"!==typeof g&&g.exports&&(g.exports=a);"undefined"!==typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=a)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,g,d){g.exports=function(a,h,c){var f;if(c){var b=c.tempAttribState,e=c.attribState;for(f=0;f<b.length;f++)b[f]=!1;for(f=0;f<h.length;f++)b[h[f].attribute.location]=!0;for(f=0;f<
e.length;f++)e[f]!==b[f]&&(e[f]=b[f],c.attribState[f]?a.enableVertexAttribArray(f):a.disableVertexAttribArray(f))}else for(f=0;f<h.length;f++)a.enableVertexAttribArray(h[f].attribute.location)}},{}],14:[function(a,g,d){var k=function(h,c,f){c=h.createShader(c);h.shaderSource(c,f);h.compileShader(c);return h.getShaderParameter(c,h.COMPILE_STATUS)?c:(console.log(h.getShaderInfoLog(c)),null)};g.exports=function(h,c,f,b){c=k(h,h.VERTEX_SHADER,c);f=k(h,h.FRAGMENT_SHADER,f);var e=h.createProgram();h.attachShader(e,
c);h.attachShader(e,f);if(b)for(var l in b)h.bindAttribLocation(e,b[l],l);h.linkProgram(e);h.getProgramParameter(e,h.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",h.getProgramParameter(e,h.VALIDATE_STATUS)),console.error("gl.getError()",h.getError()),""!==h.getProgramInfoLog(e)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",h.getProgramInfoLog(e)),h.deleteProgram(e),e=null);h.deleteShader(c);h.deleteShader(f);return e}},{}],
15:[function(a,g,d){var k=function(h){h=Array(h);for(var c=0;c<h.length;c++)h[c]=!1;return h};g.exports=function(h,c){switch(h){case "float":return 0;case "vec2":return new Float32Array(2*c);case "vec3":return new Float32Array(3*c);case "vec4":return new Float32Array(4*c);case "int":case "sampler2D":return 0;case "ivec2":return new Int32Array(2*c);case "ivec3":return new Int32Array(3*c);case "ivec4":return new Int32Array(4*c);case "bool":return!1;case "bvec2":return k(2*c);case "bvec3":return k(3*
c);case "bvec4":return k(4*c);case "mat2":return new Float32Array([1,0,0,1]);case "mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case "mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(a,g,d){var k=a("./mapType"),h=a("./mapSize"),c=function(c,b,e,l){gl.vertexAttribPointer(this.location,this.size,c||gl.FLOAT,b||!1,e||0,l||0)};g.exports=function(f,b){for(var e={},l=f.getProgramParameter(b,f.ACTIVE_ATTRIBUTES),m=0;m<l;m++){var a=f.getActiveAttrib(b,m),d=k(f,a.type);
e[a.name]={type:d,size:h(d),location:f.getAttribLocation(b,a.name),pointer:c}}return e}},{"./mapSize":20,"./mapType":21}],17:[function(a,g,d){var k=a("./mapType"),h=a("./defaultValue");g.exports=function(c,f){for(var b={},e=c.getProgramParameter(f,c.ACTIVE_UNIFORMS),l=0;l<e;l++){var m=c.getActiveUniform(f,l),a=m.name.replace(/\[.*?\]/,""),d=k(c,m.type);b[a]={type:d,size:m.size,location:c.getUniformLocation(f,a),value:h(d,m.size)}}return b}},{"./defaultValue":15,"./mapType":21}],18:[function(a,g,d){function k(b,
e){return function(l){this.data[b].value=l;var m=this.data[b].location;if(1===e.size)c[e.type](this.gl,m,l);else f[e.type](this.gl,m,l)}}var h=function(b){return function(){return this.data[b].value}},c={float:function(b,e,c){b.uniform1f(e,c)},vec2:function(b,e,c){b.uniform2f(e,c[0],c[1])},vec3:function(b,e,c){b.uniform3f(e,c[0],c[1],c[2])},vec4:function(b,c,l){b.uniform4f(c,l[0],l[1],l[2],l[3])},int:function(b,c,l){b.uniform1i(c,l)},ivec2:function(b,c,l){b.uniform2i(c,l[0],l[1])},ivec3:function(b,
c,l){b.uniform3i(c,l[0],l[1],l[2])},ivec4:function(b,c,l){b.uniform4i(c,l[0],l[1],l[2],l[3])},bool:function(b,c,l){b.uniform1i(c,l)},bvec2:function(b,c,l){b.uniform2i(c,l[0],l[1])},bvec3:function(b,c,l){b.uniform3i(c,l[0],l[1],l[2])},bvec4:function(b,c,l){b.uniform4i(c,l[0],l[1],l[2],l[3])},mat2:function(b,c,l){b.uniformMatrix2fv(c,!1,l)},mat3:function(b,c,l){b.uniformMatrix3fv(c,!1,l)},mat4:function(b,c,l){b.uniformMatrix4fv(c,!1,l)},sampler2D:function(b,c,l){b.uniform1i(c,l)}},f={float:function(b,
c,l){b.uniform1fv(c,l)},vec2:function(b,c,l){b.uniform2fv(c,l)},vec3:function(b,c,l){b.uniform3fv(c,l)},vec4:function(b,c,l){b.uniform4fv(c,l)},int:function(b,c,l){b.uniform1iv(c,l)},ivec2:function(b,c,l){b.uniform2iv(c,l)},ivec3:function(b,c,l){b.uniform3iv(c,l)},ivec4:function(b,c,l){b.uniform4iv(c,l)},bool:function(b,c,l){b.uniform1iv(c,l)},bvec2:function(b,c,l){b.uniform2iv(c,l)},bvec3:function(b,c,l){b.uniform3iv(c,l)},bvec4:function(b,c,l){b.uniform4iv(c,l)},sampler2D:function(b,c,l){b.uniform1iv(c,
l)}};g.exports=function(b,c){var e={data:{}};e.gl=b;for(var f=Object.keys(c),a=0;a<f.length;a++){for(var d=f[a],r=d.split("."),g=r[r.length-1],v=e,w=0;w<r.length-1;w++){var t=v[r[w]]||{data:{}};v=v[r[w]]=t}r=v;d=c[d];r.data[g]=d;r.gl=b;Object.defineProperty(r,g,{get:h(g),set:k(g,d)})}return e}},{}],19:[function(a,g,d){g.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),
setPrecision:a("./setPrecision"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(a,g,d){var k={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};g.exports=function(h){return k[h]}},{}],21:[function(a,g,d){var k=null,h={FLOAT:"float",
FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};g.exports=function(c,f){if(!k){var b=Object.keys(h);k={};for(var e=0;e<b.length;++e){var l=b[e];k[c[l]]=h[l]}}return k[f]}},{}],22:[function(a,g,d){g.exports=function(a,h){return"precision"!==a.substring(0,9)?"precision "+h+" float;\n"+a:a}},
{}],23:[function(a,g,d){(function(a){function h(b,c){for(var e=0,l=b.length-1;0<=l;l--){var f=b[l];"."===f?b.splice(l,1):".."===f?(b.splice(l,1),e++):e&&(b.splice(l,1),e--)}if(c)for(;e--;e)b.unshift("..");return b}function c(b,c){if(b.filter)return b.filter(c);for(var e=[],l=0;l<b.length;l++)c(b[l],l,b)&&e.push(b[l]);return e}var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;d.resolve=function(){for(var b="",l=!1,f=arguments.length-1;-1<=f&&!l;f--){var k=0<=f?arguments[f]:a.cwd();
if("string"!==typeof k)throw new TypeError("Arguments to path.resolve must be strings");k&&(b=k+"/"+b,l="/"===k.charAt(0))}b=h(c(b.split("/"),function(b){return!!b}),!l).join("/");return(l?"/":"")+b||"."};d.normalize=function(e){var l=d.isAbsolute(e),f="/"===b(e,-1);(e=h(c(e.split("/"),function(b){return!!b}),!l).join("/"))||l||(e=".");e&&f&&(e+="/");return(l?"/":"")+e};d.isAbsolute=function(b){return"/"===b.charAt(0)};d.join=function(){var b=Array.prototype.slice.call(arguments,0);return d.normalize(c(b,
function(b,c){if("string"!==typeof b)throw new TypeError("Arguments to path.join must be strings");return b}).join("/"))};d.relative=function(b,c){function e(b){for(var c=0;c<b.length&&""===b[c];c++);for(var e=b.length-1;0<=e&&""===b[e];e--);return c>e?[]:b.slice(c,e-c+1)}b=d.resolve(b).substr(1);c=d.resolve(c).substr(1);b=e(b.split("/"));c=e(c.split("/"));for(var f=Math.min(b.length,c.length),l=f,h=0;h<f;h++)if(b[h]!==c[h]){l=h;break}f=[];for(h=l;h<b.length;h++)f.push("..");f=f.concat(c.slice(l));
return f.join("/")};d.sep="/";d.delimiter=":";d.dirname=function(b){var c=f.exec(b).slice(1);b=c[0];c=c[1];if(!b&&!c)return".";c&&(c=c.substr(0,c.length-1));return b+c};d.basename=function(b,c){b=f.exec(b).slice(1)[2];c&&b.substr(-1*c.length)===c&&(b=b.substr(0,b.length-c.length));return b};d.extname=function(b){return f.exec(b).slice(1)[3]};var b="b"==="ab".substr(-1)?function(b,c,f){return b.substr(c,f)}:function(b,c,f){0>c&&(c=b.length+c);return b.substr(c,f)}}).call(this,a("_process"))},{_process:24}],
24:[function(a,g,d){function k(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");}function c(b){if(q===setTimeout)return setTimeout(b,0);if((q===k||!q)&&setTimeout)return q=setTimeout,setTimeout(b,0);try{return q(b,0)}catch(A){try{return q.call(null,b,0)}catch(y){return q.call(this,b,0)}}}function f(b){if(x===clearTimeout)return clearTimeout(b);if((x===h||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(b);try{return x(b)}catch(A){try{return x.call(null,
b)}catch(y){return x.call(this,b)}}}function b(){u&&v&&(u=!1,v.length?r=v.concat(r):w=-1,r.length&&e())}function e(){if(!u){var e=c(b);u=!0;for(var l=r.length;l;){v=r;for(r=[];++w<l;)v&&v[w].run();w=-1;l=r.length}v=null;u=!1;f(e)}}function l(b,c){this.fun=b;this.array=c}function m(){}a=g.exports={};try{var q="function"===typeof setTimeout?setTimeout:k}catch(t){q=k}try{var x="function"===typeof clearTimeout?clearTimeout:h}catch(t){x=h}var r=[],u=!1,v,w=-1;a.nextTick=function(b){var f=Array(arguments.length-
1);if(1<arguments.length)for(var m=1;m<arguments.length;m++)f[m-1]=arguments[m];r.push(new l(b,f));1!==r.length||u||c(e)};l.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=m;a.addListener=m;a.once=m;a.off=m;a.removeListener=m;a.removeAllListeners=m;a.emit=m;a.prependListener=m;a.prependOnceListener=m;a.listeners=function(b){return[]};a.binding=function(b){throw Error("process.binding is not supported");};a.cwd=
function(){return"/"};a.chdir=function(b){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],25:[function(a,g,d){(function(a){(function(h){function c(b){throw new RangeError(z[b]);}function f(b,c){for(var e=b.length,f=[];e--;)f[e]=c(b[e]);return f}function b(b,c){var e=b.split("@"),l="";1<e.length&&(l=e[0]+"@",b=e[1]);b=b.replace(y,".");b=b.split(".");c=f(b,c).join(".");return l+c}function e(b){for(var c=[],e=0,f=b.length,l,m;e<f;)l=b.charCodeAt(e++),55296<=l&&56319>=
l&&e<f?(m=b.charCodeAt(e++),56320==(m&64512)?c.push(((l&1023)<<10)+(m&1023)+65536):(c.push(l),e--)):c.push(l);return c}function l(b){return f(b,function(b){var c="";65535<b&&(b-=65536,c+=D(b>>>10&1023|55296),b=56320|b&1023);return c+=D(b)}).join("")}function m(b,c){return b+22+75*(26>b)-((0!=c)<<5)}function k(b,c,e){var f=0;b=e?B(b/700):b>>1;for(b+=B(b/c);455<b;f+=36)b=B(b/35);return B(f+36*b/(b+38))}function x(b){var e=[],f=b.length,m=0,h=128,a=72,d,q;var x=b.lastIndexOf("-");0>x&&(x=0);for(d=0;d<
x;++d)128<=b.charCodeAt(d)&&c("not-basic"),e.push(b.charCodeAt(d));for(x=0<x?x+1:0;x<f;){d=m;var r=1;for(q=36;;q+=36){x>=f&&c("invalid-input");var g=b.charCodeAt(x++);g=10>g-48?g-22:26>g-65?g-65:26>g-97?g-97:36;(36<=g||g>B((2147483647-m)/r))&&c("overflow");m+=g*r;var u=q<=a?1:q>=a+26?26:q-a;if(g<u)break;g=36-u;r>B(2147483647/g)&&c("overflow");r*=g}r=e.length+1;a=k(m-d,r,0==d);B(m/r)>2147483647-h&&c("overflow");h+=B(m/r);m%=r;e.splice(m++,0,h)}return l(e)}function r(b){var f,l,h,a=[];b=e(b);var d=
b.length;var q=128;var x=0;var r=72;for(h=0;h<d;++h){var g=b[h];128>g&&a.push(D(g))}for((f=l=a.length)&&a.push("-");f<d;){var u=2147483647;for(h=0;h<d;++h)g=b[h],g>=q&&g<u&&(u=g);var v=f+1;u-q>B((2147483647-x)/v)&&c("overflow");x+=(u-q)*v;q=u;for(h=0;h<d;++h)if(g=b[h],g<q&&2147483647<++x&&c("overflow"),g==q){var t=x;for(u=36;;u+=36){g=u<=r?1:u>=r+26?26:u-r;if(t<g)break;var w=t-g;t=36-g;a.push(D(m(g+w%t,0)));t=B(w/t)}a.push(D(m(t,0)));r=k(x,v,f==l);x=0;++f}++x;++q}return a.join("")}var u="object"==
typeof d&&d&&!d.nodeType&&d,v="object"==typeof g&&g&&!g.nodeType&&g,w="object"==typeof a&&a;if(w.global===w||w.window===w||w.self===w)h=w;var t=/^xn--/,A=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=Math.floor,D=String.fromCharCode,E;w={version:"1.4.1",ucs2:{decode:e,encode:l},decode:x,encode:r,toASCII:function(c){return b(c,function(b){return A.test(b)?
"xn--"+r(b):b})},toUnicode:function(c){return b(c,function(b){return t.test(b)?x(b.slice(4).toLowerCase()):b})}};if(u&&v)if(g.exports==u)v.exports=w;else for(E in w)w.hasOwnProperty(E)&&(u[E]=w[E]);else h.punycode=w})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],26:[function(a,g,d){g.exports=function(h,c,f,b){f=f||"=";var e={};if("string"!==typeof h||0===h.length)return e;var l=/\+/g;h=h.split(c||"&");c=1E3;b&&"number"===
typeof b.maxKeys&&(c=b.maxKeys);b=h.length;0<c&&b>c&&(b=c);for(c=0;c<b;++c){var m=h[c].replace(l,"%20"),a=m.indexOf(f);if(0<=a){var d=m.substr(0,a);m=m.substr(a+1)}else d=m,m="";d=decodeURIComponent(d);m=decodeURIComponent(m);Object.prototype.hasOwnProperty.call(e,d)?k(e[d])?e[d].push(m):e[d]=[e[d],m]:e[d]=m}return e};var k=Array.isArray||function(h){return"[object Array]"===Object.prototype.toString.call(h)}},{}],27:[function(a,g,d){function k(b,c){if(b.map)return b.map(c);for(var e=[],f=0;f<b.length;f++)e.push(c(b[f],
f));return e}var h=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}};g.exports=function(b,e,l,m){e=e||"&";l=l||"=";null===b&&(b=void 0);return"object"===typeof b?k(f(b),function(f){var m=encodeURIComponent(h(f))+l;return c(b[f])?k(b[f],function(b){return m+encodeURIComponent(h(b))}).join(e):m+encodeURIComponent(h(b[f]))}).join(e):m?encodeURIComponent(h(m))+l+encodeURIComponent(h(b)):""};var c=Array.isArray||
function(b){return"[object Array]"===Object.prototype.toString.call(b)},f=Object.keys||function(b){var c=[],f;for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&c.push(f);return c}},{}],28:[function(a,g,d){d.decode=d.parse=a("./decode");d.encode=d.stringify=a("./encode")},{"./decode":26,"./encode":27}],29:[function(a,g,d){function k(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function h(b,c,e){if(b&&
f.isObject(b)&&b instanceof k)return b;var l=new k;l.parse(b,c,e);return l}var c=a("punycode"),f=a("./util");d.parse=h;d.resolve=function(b,c){return h(b,!1,!0).resolve(c)};d.resolveObject=function(b,c){return b?h(b,!1,!0).resolveObject(c):c};d.format=function(b){f.isString(b)&&(b=h(b));return b instanceof k?b.format():k.prototype.format.call(b)};d.Url=k;var b=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;g="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var m=["'"].concat(g),
q=["%","/","?",";","#"].concat(m),x=["/","?","#"],r=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");k.prototype.parse=function(e,h,a){if(!f.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var d=e.indexOf("?");d=-1!==d&&d<e.indexOf("#")?"?":"#";e=e.split(d);e[0]=e[0].replace(/\\/g,
"/");e=e.join(d);d=e.trim();if(!a&&1===e.split("#").length&&(e=l.exec(d)))return this.href=this.path=d,this.pathname=e[1],e[2]?(this.search=e[2],this.query=h?A.parse(this.search.substr(1)):this.search.substr(1)):h&&(this.search="",this.query={}),this;if(e=b.exec(d)){e=e[0];var k=e.toLowerCase();this.protocol=k;d=d.substr(e.length)}if(a||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&w[e]||(d=d.substr(2),this.slashes=!0)}if(!w[e]&&(g||e&&!t[e])){g=-1;for(a=0;a<x.length;a++)e=
d.indexOf(x[a]),-1!==e&&(-1===g||e<g)&&(g=e);g=-1===g?d.lastIndexOf("@"):d.lastIndexOf("@",g);-1!==g&&(a=d.slice(0,g),d=d.slice(g+1),this.auth=decodeURIComponent(a));g=-1;for(a=0;a<q.length;a++)e=d.indexOf(q[a]),-1!==e&&(-1===g||e<g)&&(g=e);-1===g&&(g=d.length);this.host=d.slice(0,g);d=d.slice(g);this.parseHost();this.hostname=this.hostname||"";g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g){var y=this.hostname.split(/\./);a=0;for(e=y.length;a<e;a++){var z=y[a];if(z&&
!z.match(r)){for(var B="",J=0,R=z.length;J<R;J++)B=127<z.charCodeAt(J)?B+"x":B+z[J];if(!B.match(r)){e=y.slice(0,a);a=y.slice(a+1);if(z=z.match(u))e.push(z[1]),a.unshift(z[2]);a.length&&(d="/"+a.join(".")+d);this.hostname=e.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();g||(this.hostname=c.toASCII(this.hostname));a=this.port?":"+this.port:"";this.host=(this.hostname||"")+a;this.href+=this.host;g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),
"/"!==d[0]&&(d="/"+d))}if(!v[k])for(a=0,e=m.length;a<e;a++)g=m[a],-1!==d.indexOf(g)&&(z=encodeURIComponent(g),z===g&&(z=escape(g)),d=d.split(g).join(z));a=d.indexOf("#");-1!==a&&(this.hash=d.substr(a),d=d.slice(0,a));a=d.indexOf("?");-1!==a?(this.search=d.substr(a),this.query=d.substr(a+1),h&&(this.query=A.parse(this.query)),d=d.slice(0,a)):h&&(this.search="",this.query={});d&&(this.pathname=d);t[k]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)a=this.pathname||
"",this.path=a+(this.search||"");this.href=this.format();return this};k.prototype.format=function(){var b=this.auth||"";b&&(b=encodeURIComponent(b),b=b.replace(/%3A/i,":"),b+="@");var c=this.protocol||"",e=this.pathname||"",l=this.hash||"",m=!1,a="";this.host?m=b+this.host:this.hostname&&(m=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(m+=":"+this.port));this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(a=A.stringify(this.query));b=this.search||
a&&"?"+a||"";c&&":"!==c.substr(-1)&&(c+=":");this.slashes||(!c||t[c])&&!1!==m?(m="//"+(m||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):m||(m="");l&&"#"!==l.charAt(0)&&(l="#"+l);b&&"?"!==b.charAt(0)&&(b="?"+b);e=e.replace(/[?#]/g,function(b){return encodeURIComponent(b)});b=b.replace("#","%23");return c+m+e+b+l};k.prototype.resolve=function(b){return this.resolveObject(h(b,!1,!0)).format()};k.prototype.resolveObject=function(b){if(f.isString(b)){var c=new k;c.parse(b,!1,!0);b=c}c=new k;for(var e=Object.keys(this),
l=0;l<e.length;l++){var m=e[l];c[m]=this[m]}c.hash=b.hash;if(""===b.href)return c.href=c.format(),c;if(b.slashes&&!b.protocol){e=Object.keys(b);for(l=0;l<e.length;l++)m=e[l],"protocol"!==m&&(c[m]=b[m]);t[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/");c.href=c.format();return c}if(b.protocol&&b.protocol!==c.protocol){if(!t[b.protocol]){e=Object.keys(b);for(l=0;l<e.length;l++)m=e[l],c[m]=b[m];c.href=c.format();return c}c.protocol=b.protocol;if(b.host||w[b.protocol])c.pathname=b.pathname;
else{for(var a=(b.pathname||"").split("/");a.length&&!(b.host=a.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==a[0]&&a.unshift("");2>a.length&&a.unshift("");c.pathname=a.join("/")}c.search=b.search;c.query=b.query;c.host=b.host||"";c.auth=b.auth;c.hostname=b.hostname||b.host;c.port=b.port;if(c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");c.slashes=c.slashes||b.slashes;c.href=c.format();return c}e=c.pathname&&"/"===c.pathname.charAt(0);var h=b.host||b.pathname&&"/"===
b.pathname.charAt(0),d=e=h||e||c.host&&b.pathname;l=c.pathname&&c.pathname.split("/")||[];a=b.pathname&&b.pathname.split("/")||[];if(m=c.protocol&&!t[c.protocol])c.hostname="",c.port=null,c.host&&(""===l[0]?l[0]=c.host:l.unshift(c.host)),c.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===a[0]?a[0]=b.host:a.unshift(b.host)),b.host=null),e=e&&(""===a[0]||""===l[0]);if(h)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||""===b.hostname?b.hostname:c.hostname,c.search=b.search,
c.query=b.query,l=a;else if(a.length)l||(l=[]),l.pop(),l=l.concat(a),c.search=b.search,c.query=b.query;else if(!f.isNullOrUndefined(b.search))return m&&(c.hostname=c.host=l.shift(),m=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=m.shift(),c.host=c.hostname=m.shift()),c.search=b.search,c.query=b.query,f.isNull(c.pathname)&&f.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!l.length)return c.pathname=null,c.path=c.search?"/"+c.search:
null,c.href=c.format(),c;h=l.slice(-1)[0];a=(c.host||b.host||1<l.length)&&("."===h||".."===h)||""===h;for(var q=0,x=l.length;0<=x;x--)h=l[x],"."===h?l.splice(x,1):".."===h?(l.splice(x,1),q++):q&&(l.splice(x,1),q--);if(!e&&!d)for(;q--;q)l.unshift("..");!e||""===l[0]||l[0]&&"/"===l[0].charAt(0)||l.unshift("");a&&"/"!==l.join("/").substr(-1)&&l.push("");d=""===l[0]||l[0]&&"/"===l[0].charAt(0);m&&(c.hostname=c.host=d?"":l.length?l.shift():"",m=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=
m.shift(),c.host=c.hostname=m.shift());(e=e||c.host&&l.length)&&!d&&l.unshift("");l.length?c.pathname=l.join("/"):(c.pathname=null,c.path=null);f.isNull(c.pathname)&&f.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:""));c.auth=b.auth||c.auth;c.slashes=c.slashes||b.slashes;c.href=c.format();return c};k.prototype.parseHost=function(){var b=this.host,c=e.exec(b);c&&(c=c[0],":"!==c&&(this.port=c.substr(1)),b=b.substr(0,b.length-c.length));b&&(this.hostname=b)}},{"./util":30,punycode:25,
querystring:28}],30:[function(a,g,d){g.exports={isString:function(a){return"string"===typeof a},isObject:function(a){return"object"===typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],31:[function(a,g,d){g.exports=function(a,h,c){var f=a.length;if(!(h>=f||0===c)){c=h+c>f?f-h:c;for(f-=c;h<f;++h)a[h]=a[h+c];a.length=f}}},{}],32:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;var h="function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};g=a("mini-signals");var c=k(g);g=a("parse-uri");var f=k(g),b=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(c[e]=b[e]);c.default=b;return c}(a("./async"));a=a("./Resource");var e=k(a),l=/(#[\w-]+)?$/;a=function(){function m(){var e=this,f=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:"",l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.baseUrl=f;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(b,c){return e._loadResource(b,c)};this._queue=b.queue(this._boundLoadResource,l);this._queue.pause();this.resources={};this.onProgress=new c.default;
this.onError=new c.default;this.onLoad=new c.default;this.onStart=new c.default;this.onComplete=new c.default}m.prototype.add=function(b,c,f,l){if(Array.isArray(b)){for(c=0;c<b.length;++c)this.add(b[c]);return this}"object"===("undefined"===typeof b?"undefined":h(b))&&(l=c||b.callback||b.onComplete,f=b,c=b.url,b=b.name||b.key||b.url);"string"!==typeof c&&(l=f,f=c,c=b);if("string"!==typeof c)throw Error("No url passed to add resource to loader.");"function"===typeof f&&(l=f,f=null);if(this.loading&&
(!f||!f.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[b])throw Error('Resource named "'+b+'" already exists.');c=this._prepareUrl(c);this.resources[b]=new e.default(b,c,f);if("function"===typeof l)this.resources[b].onAfterMiddleware.once(l);if(this.loading){f=f.parentResource;c=[];for(l=0;l<f.children.length;++l)f.children[l].isComplete||c.push(f.children[l]);l=f.progressChunk*(c.length+1)/(c.length+2);f.children.push(this.resources[b]);f.progressChunk=
l;for(f=0;f<c.length;++f)c[f].progressChunk=l;this.resources[b].progressChunk=l}this._queue.push(this.resources[b]);return this};m.prototype.pre=function(b){this._beforeMiddleware.push(b);return this};m.prototype.use=function(b){this._afterMiddleware.push(b);return this};m.prototype.reset=function(){this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(var b in this.resources){var c=this.resources[b];c._onLoadBinding&&c._onLoadBinding.detach();c.isLoading&&c.abort()}this.resources=
{};return this};m.prototype.load=function(b){if("function"===typeof b)this.onComplete.once(b);if(this.loading)return this;b=100/this._queue._tasks.length;for(var c=0;c<this._queue._tasks.length;++c)this._queue._tasks[c].data.progressChunk=b;this.loading=!0;this.onStart.dispatch(this);this._queue.resume();return this};m.prototype._prepareUrl=function(b){var c=(0,f.default)(b,{strictMode:!0});b=c.protocol||!c.path||0===b.indexOf("//")?b:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-
1&&"/"!==b.charAt(0)?this.baseUrl+"/"+b:this.baseUrl+b;this.defaultQueryString&&(c=l.exec(b)[0],b=b.substr(0,b.length-c.length),b=-1!==b.indexOf("?")?b+("&"+this.defaultQueryString):b+("?"+this.defaultQueryString),b+=c);return b};m.prototype._loadResource=function(c,e){var f=this;c._dequeue=e;b.eachSeries(this._beforeMiddleware,function(b,e){b.call(f,c,function(){e(c.isComplete?{}:null)})},function(){c.isComplete?f._onLoad(c):(c._onLoadBinding=c.onComplete.once(f._onLoad,f),c.load())},!0)};m.prototype._onComplete=
function(){this.loading=!1;this.onComplete.dispatch(this,this.resources)};m.prototype._onLoad=function(c){var e=this;c._onLoadBinding=null;this._resourcesParsing.push(c);c._dequeue();b.eachSeries(this._afterMiddleware,function(b,f){b.call(e,c,f)},function(){c.onAfterMiddleware.dispatch(c);e.progress+=c.progressChunk;e.onProgress.dispatch(e,c);c.error?e.onError.dispatch(c.error,e,c):e.onLoad.dispatch(e,c);e._resourcesParsing.splice(e._resourcesParsing.indexOf(c),1);e._queue.idle()&&0===e._resourcesParsing.length&&
(e.progress=100,e._onComplete())},!0)};return m}();d.default=a},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(a,g,d){function k(){}function h(b,c,e){c&&0===c.indexOf(".")&&(c=c.substring(1));c&&(b[c]=e)}function c(b){return b.toString().replace("object ","")}d.__esModule=!0;var f=function(){function b(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,
e,f){e&&b(c.prototype,e);f&&b(c,f);return c}}(),b=(g=a("parse-uri"))&&g.__esModule?g:{default:g},e=(a=a("mini-signals"))&&a.__esModule?a:{default:a},l=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),m=null;a=function(){function a(b,c,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if("string"!==typeof b||"string"!==typeof c)throw Error("Both name and url are required for constructing a resource.");f=f||{};this._flags=0;this._setFlag(a.STATUS_FLAGS.DATA_URL,
0===c.indexOf("data:"));this.name=b;this.url=c;this.extension=this._getExtension();this.data=null;this.crossOrigin=!0===f.crossOrigin?"anonymous":f.crossOrigin;this.loadType=f.loadType||this._determineLoadType();this.xhrType=f.xhrType;this.metadata=f.metadata||{};this.xhr=this.error=null;this.children=[];this.type=a.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=k;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=
this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new e.default;this.onProgress=new e.default;this.onComplete=new e.default;this.onAfterMiddleware=new e.default}a.setExtensionLoadType=function(b,c){h(a._loadTypeMap,b,c)};a.setExtensionXhrType=function(b,c){h(a._xhrTypeMap,b,c)};a.prototype.complete=function(){this.data&&
this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1));this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,
!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(a.STATUS_FLAGS.COMPLETE,!0);this._setFlag(a.STATUS_FLAGS.LOADING,!1);this.onComplete.dispatch(this)};a.prototype.abort=function(b){if(!this.error){this.error=Error(b);if(this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=
a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}};a.prototype.load=function(b){var c=this;if(!this.isLoading)if(this.isComplete)b&&setTimeout(function(){return b(c)},1);else{if(b)this.onComplete.once(b);this._setFlag(a.STATUS_FLAGS.LOADING,!0);this.onStart.dispatch(this);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE;
this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO;this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO;this._loadSourceElement("video");break;default:l&&this.crossOrigin?this._loadXdr():this._loadXhr()}}};a.prototype._hasFlag=function(b){return!!(this._flags&b)};a.prototype._setFlag=function(b,c){this._flags=c?this._flags|b:this._flags&~b};a.prototype._loadElement=function(b){this.data=this.metadata.loadElement?this.metadata.loadElement:
"image"===b&&"undefined"!==typeof window.Image?new Image:document.createElement(b);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};a.prototype._loadSourceElement=function(b){this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===b&&"undefined"!==
typeof window.Audio?new Audio:document.createElement(b);if(null===this.data)this.abort("Unsupported element: "+b);else{if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var c=this.metadata.mimeType,e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(b,this.url[e],Array.isArray(c)?c[e]:c));else c=this.metadata.mimeType,this.data.appendChild(this._createSource(b,this.url,Array.isArray(c)?
c[0]:c));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};a.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType=this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===
a.XHR_RESPONSE_TYPE.DOCUMENT?a.XHR_RESPONSE_TYPE.TEXT:this.xhrType;b.addEventListener("error",this._boundXhrOnError,!1);b.addEventListener("abort",this._boundXhrOnAbort,!1);b.addEventListener("progress",this._boundOnProgress,!1);b.addEventListener("load",this._boundXhrOnLoad,!1);b.send()};a.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XDomainRequest;b.timeout=5E3;b.onerror=this._boundXhrOnError;b.ontimeout=this._boundXdrOnTimeout;
b.onprogress=this._boundOnProgress;b.onload=this._boundXhrOnLoad;b.open("GET",this.url,!0);setTimeout(function(){return b.send()},1)};a.prototype._createSource=function(b,c,e){e||(e=b+"/"+this._getExtension(c));b=document.createElement("source");b.src=c;b.type=e;return b};a.prototype._onError=function(b){this.abort("Failed to load element using: "+b.target.nodeName)};a.prototype._onProgress=function(b){b&&b.lengthComputable&&this.onProgress.dispatch(this,b.loaded/b.total)};a.prototype._xhrOnError=
function(){var b=this.xhr;this.abort(c(b)+" Request failed. Status: "+b.status+', text: "'+b.statusText+'"')};a.prototype._xhrOnAbort=function(){this.abort(c(this.xhr)+" Request was aborted by the user.")};a.prototype._xdrOnTimeout=function(){this.abort(c(this.xhr)+" Request timed out.")};a.prototype._xhrOnLoad=function(){var b=this.xhr,c="",e="undefined"===typeof b.status?200:b.status;if(""===b.responseType||"text"===b.responseType||"undefined"===typeof b.responseType)c=b.responseText;0===e&&0<c.length?
e=200:1223===e&&(e=204);if(2===(e/100|0)){if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=a.TYPE.JSON}catch(w){this.abort("Error trying to parse loaded json: "+w);return}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(c,"text/xml");else{var f=document.createElement("div");f.innerHTML=c;this.data=f}this.type=a.TYPE.XML}catch(w){this.abort("Error trying to parse loaded xml: "+
w);return}else this.data=b.response||c;this.complete()}else this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL)};a.prototype._determineCrossOrigin=function(c,e){if(0===c.indexOf("data:"))return"";e=e||window.location;m||(m=document.createElement("a"));m.href=c;c=(0,b.default)(m.href,{strictMode:!0});var f=!c.port&&""===e.port||c.port===e.port,l=c.protocol?c.protocol+":":"";return c.host===e.hostname&&f&&l===e.protocol?"":"anonymous"};a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||
a.XHR_RESPONSE_TYPE.TEXT};a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR};a.prototype._getExtension=function(){var b=this.url;if(this.isDataUrl){var c=b.indexOf("/");b=b.substring(c+1,b.indexOf(";",c))}else{c=b.indexOf("?");var e=b.indexOf("#");b=b.substring(0,Math.min(-1<c?c:b.length,-1<e?e:b.length));b=b.substring(b.lastIndexOf(".")+1)}return b.toLowerCase()};a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";
case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};f(a,[{key:"isDataUrl",get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)}}]);return a}();d.default=a;a.STATUS_FLAGS={NONE:0,DATA_URL:1,
COMPLETE:2,LOADING:4};a.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};a.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};a.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a._loadTypeMap={gif:a.LOAD_TYPE.IMAGE,png:a.LOAD_TYPE.IMAGE,bmp:a.LOAD_TYPE.IMAGE,jpg:a.LOAD_TYPE.IMAGE,jpeg:a.LOAD_TYPE.IMAGE,tif:a.LOAD_TYPE.IMAGE,tiff:a.LOAD_TYPE.IMAGE,webp:a.LOAD_TYPE.IMAGE,tga:a.LOAD_TYPE.IMAGE,svg:a.LOAD_TYPE.IMAGE,"svg+xml":a.LOAD_TYPE.IMAGE,
mp3:a.LOAD_TYPE.AUDIO,ogg:a.LOAD_TYPE.AUDIO,wav:a.LOAD_TYPE.AUDIO,mp4:a.LOAD_TYPE.VIDEO,webm:a.LOAD_TYPE.VIDEO};a._xhrTypeMap={xhtml:a.XHR_RESPONSE_TYPE.DOCUMENT,html:a.XHR_RESPONSE_TYPE.DOCUMENT,htm:a.XHR_RESPONSE_TYPE.DOCUMENT,xml:a.XHR_RESPONSE_TYPE.DOCUMENT,tmx:a.XHR_RESPONSE_TYPE.DOCUMENT,svg:a.XHR_RESPONSE_TYPE.DOCUMENT,tsx:a.XHR_RESPONSE_TYPE.DOCUMENT,gif:a.XHR_RESPONSE_TYPE.BLOB,png:a.XHR_RESPONSE_TYPE.BLOB,bmp:a.XHR_RESPONSE_TYPE.BLOB,jpg:a.XHR_RESPONSE_TYPE.BLOB,jpeg:a.XHR_RESPONSE_TYPE.BLOB,
tif:a.XHR_RESPONSE_TYPE.BLOB,tiff:a.XHR_RESPONSE_TYPE.BLOB,webp:a.XHR_RESPONSE_TYPE.BLOB,tga:a.XHR_RESPONSE_TYPE.BLOB,json:a.XHR_RESPONSE_TYPE.JSON,text:a.XHR_RESPONSE_TYPE.TEXT,txt:a.XHR_RESPONSE_TYPE.TEXT,ttf:a.XHR_RESPONSE_TYPE.BUFFER,otf:a.XHR_RESPONSE_TYPE.BUFFER};a.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(a,g,d){function k(){}function h(c){return function(){if(null===c)throw Error("Callback was already called.");
var f=c;c=null;f.apply(this,arguments)}}d.__esModule=!0;d.eachSeries=function(c,f,b,e){var l=0,m=c.length;(function r(a){a||l===m?b&&b(a):e?setTimeout(function(){f(c[l++],r)},1):f(c[l++],r)})()};d.queue=function(c,f){function b(b,c,e){if(null!=e&&"function"!==typeof e)throw Error("task callback must be a function");m.started=!0;null==b&&m.idle()?setTimeout(function(){return m.drain()},1):(b={data:b,callback:"function"===typeof e?e:k},c?m._tasks.unshift(b):m._tasks.push(b),setTimeout(function(){return m.process()},
1))}function e(b){return function(){--l;b.callback.apply(b,arguments);null!=arguments[0]&&m.error(arguments[0],b.data);l<=m.concurrency-m.buffer&&m.unsaturated();m.idle()&&m.drain();m.process()}}if(null==f)f=1;else if(0===f)throw Error("Concurrency must not be zero");var l=0,m={_tasks:[],concurrency:f,saturated:k,unsaturated:k,buffer:f/4,empty:k,drain:k,error:k,started:!1,paused:!1,push:function(c,e){b(c,!1,e)},kill:function(){l=0;m.drain=k;m.started=!1;m._tasks=[]},unshift:function(c,e){b(c,!0,e)},
process:function(){for(;!m.paused&&l<m.concurrency&&m._tasks.length;){var b=m._tasks.shift();0===m._tasks.length&&m.empty();l+=1;l===m.concurrency&&m.saturated();c(b.data,h(e(b)))}},length:function(){return m._tasks.length},running:function(){return l},idle:function(){return 0===m._tasks.length+l},pause:function(){!0!==m.paused&&(m.paused=!0)},resume:function(){if(!1!==m.paused){m.paused=!1;for(var b=1;b<=m.concurrency;b++)m.process()}}};return m}},{}],35:[function(a,g,d){d.__esModule=!0;d.encodeBinary=
function(a){for(var c="",f=0;f<a.length;){for(var b=[0,0,0],e=[0,0,0,0],l=0;l<b.length;++l)b[l]=f<a.length?a.charCodeAt(f++)&255:0;e[0]=b[0]>>2;e[1]=(b[0]&3)<<4|b[1]>>4;e[2]=(b[1]&15)<<2|b[2]>>6;e[3]=b[2]&63;switch(f-(a.length-1)){case 2:e[3]=64;e[2]=64;break;case 1:e[3]=64}for(b=0;b<e.length;++b)c+=k.charAt(e[b])}return c};var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(a,g,d){d=a("./Loader").default;var k=a("./Resource").default,h=a("./async");a=a("./b64");
d.Resource=k;d.async=h;d.base64=a;g.exports=d;g.exports.default=d},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(a,g,d){d.__esModule=!0;var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};d.blobMiddlewareFactory=function(){return function(b,e){if(b.data&&b.xhr&&b.xhrType===h.default.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||
"string"===typeof b.data){var l=b.xhr.getResponseHeader("content-type");if(l&&0===l.indexOf("image")){b.data=new Image;b.data.src="data:"+l+";base64,"+c.default.encodeBinary(b.xhr.responseText);b.type=h.default.TYPE.IMAGE;b.data.onload=function(){b.data.onload=null;e()};return}}else if(0===b.data.type.indexOf("image")&&(l=function(){var c=f.createObjectURL(b.data);b.blob=b.data;b.data=new Image;b.data.src=c;b.type=h.default.TYPE.IMAGE;b.data.onload=function(){f.revokeObjectURL(c);b.data.onload=null;
e()};return{v:void 0}}(),"object"===("undefined"===typeof l?"undefined":k(l))))return l.v;e()}};var h=(g=a("../../Resource"))&&g.__esModule?g:{default:g},c=(a=a("../../b64"))&&a.__esModule?a:{default:a},f=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(a,g,d){function k(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function");}function h(b,c){b._head?(b._tail._next=c,c._prev=b._tail):b._head=c;b._tail=c;c._owner=b;return c}Object.defineProperty(d,
"__esModule",{value:!0});var c=function(){function b(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,f,m){f&&b(c.prototype,f);m&&b(c,m);return c}}(),f=function(){function b(c,f,m){void 0===f&&(f=!1);k(this,b);this._fn=c;this._once=f;this._thisArg=m;this._next=this._prev=this._owner=null}c(b,[{key:"detach",value:function(){if(null===this._owner)return!1;this._owner.detach(this);
return!0}}]);return b}();a=function(){function b(){k(this,b);this._head=this._tail=void 0}c(b,[{key:"handlers",value:function(){var b=this._head;if(0>=arguments.length||void 0===arguments[0]?0:arguments[0])return!!b;for(var c=[];b;)c.push(b),b=b._next;return c}},{key:"has",value:function(b){if(!(b instanceof f))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return b._owner===this}},{key:"dispatch",value:function(){var b=this._head;if(!b)return!1;for(;b;)b._once&&this.detach(b),
b._fn.apply(b._thisArg,arguments),b=b._next;return!0}},{key:"add",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof b)throw Error("MiniSignal#add(): First arg must be a Function.");return h(this,new f(b,!1,c))}},{key:"once",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof b)throw Error("MiniSignal#once(): First arg must be a Function.");return h(this,new f(b,!0,c))}},{key:"detach",
value:function(b){if(!(b instanceof f))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");if(b._owner!==this)return this;b._prev&&(b._prev._next=b._next);b._next&&(b._next._prev=b._prev);b===this._head?(this._head=b._next,null===b._next&&(this._tail=null)):b===this._tail&&(this._tail=b._prev,this._tail._next=null);b._owner=null;return this}},{key:"detachAll",value:function(){var b=this._head;if(!b)return this;for(this._head=this._tail=null;b;)b._owner=null,b=b._next;
return this}}]);return b}();a.MiniSignalBinding=f;d["default"]=a;g.exports=d["default"]},{}],39:[function(a,g,d){g.exports=function(a,h){h=h||{};var c="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}[h.strictMode?
"strict":"loose"].exec(a);var f={};for(h=14;h--;)f[c[h]]=a[h]||"";f.queryKey={};f[c[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(b,c,l){c&&(f.queryKey[c]=l)});return f}},{}],40:[function(a,g,d){d.__esModule=!0;var k=function(c){if(c&&c.__esModule)return c;var f={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(f[b]=c[b]);f.default=c;return f}(a("../core")),h=(g=a("ismobilejs"))&&g.__esModule?g:{default:g};a=a("./accessibleTarget");k.utils.mixins.delayMixin(k.DisplayObject.prototype,
(a&&a.__esModule?a:{default:a}).default);a=function(){function c(f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!h.default.tablet&&!h.default.phone||navigator.isCocoonJS||this.createTouchHook();var b=document.createElement("div");b.style.width="100px";b.style.height="100px";b.style.position="absolute";b.style.top="0px";b.style.left="0px";b.style.zIndex=2;this.div=b;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=f;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);
this._onMouseMove=this._onMouseMove.bind(this);this.isMobileAccessabillity=this.isActive=!1;window.addEventListener("keydown",this._onKeyDown,!1)}c.prototype.createTouchHook=function(){var c=this,b=document.createElement("button");b.style.width="1px";b.style.height="1px";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.zIndex=2;b.style.backgroundColor="#FF0000";b.title="HOOK DIV";b.addEventListener("focus",function(){c.isMobileAccessabillity=!0;c.activate();document.body.removeChild(b)});
document.body.appendChild(b)};c.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))};c.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),
window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))};c.prototype.updateAccessibleObjects=function(c){if(c.visible){c.accessible&&c.interactive&&(c._accessibleActive||this.addChild(c),c.renderId=this.renderId);c=c.children;for(var b=c.length-1;0<=b;b--)this.updateAccessibleObjects(c[b])}};c.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);
var c=this.renderer.view.getBoundingClientRect(),b=c.width/this.renderer.width,e=c.height/this.renderer.height,l=this.div;l.style.left=c.left+"px";l.style.top=c.top+"px";l.style.width=this.renderer.width+"px";l.style.height=this.renderer.height+"px";for(c=0;c<this.children.length;c++){var m=this.children[c];if(m.renderId!==this.renderId)m._accessibleActive=!1,k.utils.removeItems(this.children,c,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,c--,0===
this.children.length&&this.deactivate();else{l=m._accessibleDiv;var a=m.hitArea,h=m.worldTransform;m.hitArea?(l.style.left=(h.tx+a.x*h.a)*b+"px",l.style.top=(h.ty+a.y*h.d)*e+"px",l.style.width=a.width*h.a*b+"px",l.style.height=a.height*h.d*e+"px"):(a=m.getBounds(),this.capHitArea(a),l.style.left=a.x*b+"px",l.style.top=a.y*e+"px",l.style.width=a.width*b+"px",l.style.height=a.height*e+"px")}}this.renderId++}};c.prototype.capHitArea=function(c){0>c.x&&(c.width+=c.x,c.x=0);0>c.y&&(c.height+=c.y,c.y=0);
c.x+c.width>this.renderer.width&&(c.width=this.renderer.width-c.x);c.y+c.height>this.renderer.height&&(c.height=this.renderer.height-c.y)};c.prototype.addChild=function(c){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width="100px",b.style.height="100px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=2,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),
b.addEventListener("focusout",this._onFocusOut.bind(this)));c.accessibleTitle?b.title=c.accessibleTitle:c.accessibleTitle||c.accessibleHint||(b.title="displayObject "+this.tabIndex);c.accessibleHint&&b.setAttribute("aria-label",c.accessibleHint);c._accessibleActive=!0;c._accessibleDiv=b;b.displayObject=c;this.children.push(c);this.div.appendChild(c._accessibleDiv);c._accessibleDiv.tabIndex=c.tabIndex};c.prototype._onClick=function(c){var b=this.renderer.plugins.interaction;b.dispatchEvent(c.target.displayObject,
"click",b.eventData)};c.prototype._onFocus=function(c){var b=this.renderer.plugins.interaction;b.dispatchEvent(c.target.displayObject,"mouseover",b.eventData)};c.prototype._onFocusOut=function(c){var b=this.renderer.plugins.interaction;b.dispatchEvent(c.target.displayObject,"mouseout",b.eventData)};c.prototype._onKeyDown=function(c){9===c.keyCode&&this.activate()};c.prototype._onMouseMove=function(){this.deactivate()};c.prototype.destroy=function(){this.div=null;for(var c=0;c<this.children.length;c++)this.children[c].div=
null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.renderer=this.children=this.pool=null};return c}();d.default=a;k.WebGLRenderer.registerPlugin("accessibility",a);k.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(a,g,d){d.__esModule=!0;d.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},
{}],42:[function(a,g,d){d.__esModule=!0;var k=a("./accessibleTarget");Object.defineProperty(d,"accessibleTarget",{enumerable:!0,get:function(){return(k&&k.__esModule?k:{default:k}).default}});var h=a("./AccessibilityManager");Object.defineProperty(d,"AccessibilityManager",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(a,g,d){d.__esModule=!0;var k=function(){function b(b,c){for(var e=0;e<c.length;e++){var f=
c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,e,f){e&&b(c.prototype,e);f&&b(c,f);return c}}(),h=a("./autoDetectRenderer"),c=(g=a("./display/Container"))&&g.__esModule?g:{default:g},f=a("./ticker"),b=(g=a("./settings"))&&g.__esModule?g:{default:g},e=a("./const");a=function(){function l(e,a,d,k,g){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");"number"===typeof e&&(e=Object.assign({width:e,
height:a||b.default.RENDER_OPTIONS.height,forceCanvas:!!k,sharedTicker:!!g},d));this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e);this.renderer=(0,h.autoDetectRenderer)(e);this.stage=new c.default;this._ticker=null;this.ticker=e.sharedTicker?f.shared:new f.Ticker;e.autoStart&&this.start()}l.prototype.render=function(){this.renderer.render(this.stage)};l.prototype.stop=function(){this._ticker.stop()};l.prototype.start=function(){this._ticker.start()};l.prototype.destroy=
function(b){var c=this._ticker;this.ticker=null;c.destroy();this.stage.destroy();this.stage=null;this.renderer.destroy(b);this._options=this.renderer=null};k(l,[{key:"ticker",set:function(b){this._ticker&&this._ticker.remove(this.render,this);(this._ticker=b)&&b.add(this.render,this,e.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]);return l}();d.default=a},{"./autoDetectRenderer":45,
"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function h(c,b){if(c instanceof Array)"precision"!==c[0].substring(0,9)&&(c=c.slice(0),c.unshift("precision "+
b+" float;"));else if("precision"!==c.substring(0,9))return"precision "+b+" float;\n"+c;return c}d.__esModule=!0;g=a("pixi-gl-core");var c=(a=a("./settings"))&&a.__esModule?a:{default:a};a=function(f){function b(e,l,m){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");e=f.call(this,e,h(l,c.default.PRECISION_VERTEX),h(m,c.default.PRECISION_FRAGMENT));if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&
"function"!==typeof e?this:e}k(b,f);return b}(g.GLShader);d.default=a},{"./settings":101,"pixi-gl-core":12}],45:[function(a,g,d){d.__esModule=!0;d.autoDetectRenderer=function(f,b,e,l){var m=f&&f.forceCanvas;void 0!==l&&(m=l);return!m&&k.isWebGLSupported()?new c.default(f,b,e):new h.default(f,b,e)};var k=function(c){if(c&&c.__esModule)return c;var b={};if(null!=c)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(b[e]=c[e]);b.default=c;return b}(a("./utils")),h=(g=a("./renderers/canvas/CanvasRenderer"))&&
g.__esModule?g:{default:g},c=(a=a("./renderers/webgl/WebGLRenderer"))&&a.__esModule?a:{default:a}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(a,g,d){d.__esModule=!0;d.VERSION="4.6.2";d.PI_2=2*Math.PI;d.RAD_TO_DEG=180/Math.PI;d.DEG_TO_RAD=Math.PI/180;d.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};d.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,
EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19};d.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};d.SCALE_MODES={LINEAR:0,NEAREST:1};d.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};d.GC_MODES={AUTO:0,MANUAL:1};d.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;d.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i;d.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;
d.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};d.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};d.TRANSFORM_MODE={STATIC:0,DYNAMIC:1};d.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};d.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(a,g,d){d.__esModule=!0;var k=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity;this.rect=
null}a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};a.prototype.clear=function(){this.updateID++;this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};a.prototype.getRectangle=function(c){if(this.minX>this.maxX||this.minY>this.maxY)return k.Rectangle.EMPTY;c=c||new k.Rectangle(0,0,1,1);c.x=this.minX;c.y=this.minY;c.width=this.maxX-this.minX;c.height=this.maxY-this.minY;return c};a.prototype.addPoint=function(c){this.minX=Math.min(this.minX,c.x);this.maxX=Math.max(this.maxX,
c.x);this.minY=Math.min(this.minY,c.y);this.maxY=Math.max(this.maxY,c.y)};a.prototype.addQuad=function(c){var f=this.minX,b=this.minY,e=this.maxX,l=this.maxY,m=c[0],a=c[1];f=m<f?m:f;b=a<b?a:b;e=m>e?m:e;l=a>l?a:l;m=c[2];a=c[3];f=m<f?m:f;b=a<b?a:b;e=m>e?m:e;l=a>l?a:l;m=c[4];a=c[5];f=m<f?m:f;b=a<b?a:b;e=m>e?m:e;l=a>l?a:l;m=c[6];a=c[7];this.minX=m<f?m:f;this.minY=a<b?a:b;this.maxX=m>e?m:e;this.maxY=a>l?a:l};a.prototype.addFrame=function(c,f,b,e,l){var m=c.worldTransform;c=m.a;var a=m.b,h=m.c,d=m.d,k=
m.tx;m=m.ty;var g=this.minX,w=this.minY,t=this.maxX,A=this.maxY,y=c*f+h*b+k,z=a*f+d*b+m;g=y<g?y:g;w=z<w?z:w;t=y>t?y:t;A=z>A?z:A;y=c*e+h*b+k;z=a*e+d*b+m;g=y<g?y:g;w=z<w?z:w;t=y>t?y:t;A=z>A?z:A;y=c*f+h*l+k;z=a*f+d*l+m;g=y<g?y:g;w=z<w?z:w;t=y>t?y:t;A=z>A?z:A;y=c*e+h*l+k;z=a*e+d*l+m;this.minX=y<g?y:g;this.minY=z<w?z:w;this.maxX=y>t?y:t;this.maxY=z>A?z:A};a.prototype.addVertices=function(c,f,b,e){var l=c.worldTransform;c=l.a;var m=l.b,a=l.c,h=l.d,d=l.tx;l=l.ty;for(var k=this.minX,g=this.minY,w=this.maxX,
t=this.maxY;b<e;b+=2){var A=f[b],y=f[b+1],z=c*A+a*y+d;A=h*y+m*A+l;k=z<k?z:k;g=A<g?A:g;w=z>w?z:w;t=A>t?A:t}this.minX=k;this.minY=g;this.maxX=w;this.maxY=t};a.prototype.addBounds=function(c){var f=this.minX,b=this.minY,e=this.maxX,l=this.maxY;this.minX=c.minX<f?c.minX:f;this.minY=c.minY<b?c.minY:b;this.maxX=c.maxX>e?c.maxX:e;this.maxY=c.maxY>l?c.maxY:l};a.prototype.addBoundsMask=function(c,f){var b=c.minX>f.minX?c.minX:f.minX,e=c.minY>f.minY?c.minY:f.minY,l=c.maxX<f.maxX?c.maxX:f.maxX;c=c.maxY<f.maxY?
c.maxY:f.maxY;if(b<=l&&e<=c){f=this.minX;var m=this.minY,a=this.maxX,h=this.maxY;this.minX=b<f?b:f;this.minY=e<m?e:m;this.maxX=l>a?l:a;this.maxY=c>h?c:h}};a.prototype.addBoundsArea=function(c,f){var b=c.minX>f.x?c.minX:f.x,e=c.minY>f.y?c.minY:f.y,l=c.maxX<f.x+f.width?c.maxX:f.x+f.width;c=c.maxY<f.y+f.height?c.maxY:f.y+f.height;if(b<=l&&e<=c){f=this.minX;var m=this.minY,a=this.maxX,h=this.maxY;this.minX=b<f?b:f;this.minY=e<m?e:m;this.maxX=l>a?l:a;this.maxY=c>h?c:h}};return a}();d.default=a},{"../math":70}],
48:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;var h=function(){function c(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);
Object.defineProperty(b,f.key,f)}}return function(b,e,f){e&&c(b.prototype,e);f&&c(b,f);return b}}(),c=a("../utils");a=a("./DisplayObject");a=function(f){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c=f.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.children=[];return c}k(b,f);b.prototype.onChildrenChange=function(){};b.prototype.addChild=
function(b){var c=arguments.length;if(1<c)for(var e=0;e<c;e++)this.addChild(arguments[e]);else b.parent&&b.parent.removeChild(b),b.parent=this,b.transform._parentID=-1,this.children.push(b),this._boundsID++,this.onChildrenChange(this.children.length-1),b.emit("added",this);return b};b.prototype.addChildAt=function(b,c){if(0>c||c>this.children.length)throw Error(b+"addChildAt: The index "+c+" supplied is out of bounds "+this.children.length);b.parent&&b.parent.removeChild(b);b.parent=this;b.transform._parentID=
-1;this.children.splice(c,0,b);this._boundsID++;this.onChildrenChange(c);b.emit("added",this);return b};b.prototype.swapChildren=function(b,c){if(b!==c){var e=this.getChildIndex(b),f=this.getChildIndex(c);this.children[e]=c;this.children[f]=b;this.onChildrenChange(e<f?e:f)}};b.prototype.getChildIndex=function(b){b=this.children.indexOf(b);if(-1===b)throw Error("The supplied DisplayObject must be a child of the caller");return b};b.prototype.setChildIndex=function(b,f){if(0>f||f>=this.children.length)throw Error("The supplied index is out of bounds");
var e=this.getChildIndex(b);(0,c.removeItems)(this.children,e,1);this.children.splice(f,0,b);this.onChildrenChange(f)};b.prototype.getChildAt=function(b){if(0>b||b>=this.children.length)throw Error("getChildAt: Index ("+b+") does not exist.");return this.children[b]};b.prototype.removeChild=function(b){var e=arguments.length;if(1<e)for(var f=0;f<e;f++)this.removeChild(arguments[f]);else{e=this.children.indexOf(b);if(-1===e)return null;b.parent=null;b.transform._parentID=-1;(0,c.removeItems)(this.children,
e,1);this._boundsID++;this.onChildrenChange(e);b.emit("removed",this)}return b};b.prototype.removeChildAt=function(b){var e=this.getChildAt(b);e.parent=null;e.transform._parentID=-1;(0,c.removeItems)(this.children,b,1);this._boundsID++;this.onChildrenChange(b);e.emit("removed",this);return e};b.prototype.removeChildren=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=arguments[1];c="number"===typeof c?c:this.children.length;var f=c-b;if(0<f&&f<=c){c=this.children.splice(b,
f);for(f=0;f<c.length;++f)c[f].parent=null,c[f].transform&&(c[f].transform._parentID=-1);this._boundsID++;this.onChildrenChange(b);for(b=0;b<c.length;++b)c[b].emit("removed",this);return c}if(0===f&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};b.prototype.updateTransform=function(){this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var b=0,c=this.children.length;b<
c;++b){var f=this.children[b];f.visible&&f.updateTransform()}};b.prototype.calculateBounds=function(){this._bounds.clear();this._calculateBounds();for(var b=0;b<this.children.length;b++){var c=this.children[b];c.visible&&c.renderable&&(c.calculateBounds(),c._mask?(c._mask.calculateBounds(),this._bounds.addBoundsMask(c._bounds,c._mask._bounds)):c.filterArea?this._bounds.addBoundsArea(c._bounds,c.filterArea):this._bounds.addBounds(c._bounds))}this._lastBoundsID=this._boundsID};b.prototype._calculateBounds=
function(){};b.prototype.renderWebGL=function(b){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(b);else{this._renderWebGL(b);for(var c=0,e=this.children.length;c<e;++c)this.children[c].renderWebGL(b)}};b.prototype.renderAdvancedWebGL=function(b){b.flush();var c=this._filters,e=this._mask;if(c){this._enabledFilters||(this._enabledFilters=[]);for(var f=this._enabledFilters.length=0;f<c.length;f++)c[f].enabled&&this._enabledFilters.push(c[f]);
this._enabledFilters.length&&b.filterManager.pushFilter(this,this._enabledFilters)}e&&b.maskManager.pushMask(this,this._mask);this._renderWebGL(b);f=0;for(var a=this.children.length;f<a;f++)this.children[f].renderWebGL(b);b.flush();e&&b.maskManager.popMask(this,this._mask);c&&this._enabledFilters&&this._enabledFilters.length&&b.filterManager.popFilter()};b.prototype._renderWebGL=function(b){};b.prototype._renderCanvas=function(b){};b.prototype.renderCanvas=function(b){if(this.visible&&!(0>=this.worldAlpha)&&
this.renderable){this._mask&&b.maskManager.pushMask(this._mask);this._renderCanvas(b);for(var c=0,e=this.children.length;c<e;++c)this.children[c].renderCanvas(b);this._mask&&b.maskManager.popMask(b)}};b.prototype.destroy=function(b){f.prototype.destroy.call(this);var c="boolean"===typeof b?b:b&&b.children,e=this.removeChildren(0,this.children.length);if(c)for(c=0;c<e.length;++c)e[c].destroy(b)};h(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(b){var c=
this.getLocalBounds().width;this.scale.x=0!==c?b/c:1;this._width=b}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(b){var c=this.getLocalBounds().height;this.scale.y=0!==c?b/c:1;this._height=b}}]);return b}((a&&a.__esModule?a:{default:a}).default);d.default=a;a.prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,
e,f){e&&b(c.prototype,e);f&&b(c,f);return c}}();g=a("eventemitter3");g=k(g);var f=a("../const"),b=a("../settings"),e=k(b);b=a("./TransformStatic");var l=k(b);b=a("./Transform");var m=k(b);b=a("./Bounds");var q=k(b),x=a("../math");a=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var c=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?
this:c;var h=e.default.TRANSFORM_MODE===f.TRANSFORM_MODE.STATIC?l.default:m.default;c.tempDisplayObjectParent=null;c.transform=new h;c.alpha=1;c.visible=!0;c.renderable=!0;c.parent=null;c.worldAlpha=1;c.filterArea=null;c._filters=null;c._enabledFilters=null;c._bounds=new q.default;c._boundsID=0;c._lastBoundsID=-1;c._boundsRect=null;c._localBoundsRect=null;c._mask=null;c._destroyed=!1;return c}h(a,b);a.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);this.worldAlpha=
this.alpha*this.parent.worldAlpha;this._bounds.updateID++};a.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)};a.prototype.getBounds=function(b,c){b||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null));this._boundsID!==
this._lastBoundsID&&this.calculateBounds();c||(this._boundsRect||(this._boundsRect=new x.Rectangle),c=this._boundsRect);return this._bounds.getRectangle(c)};a.prototype.getLocalBounds=function(b){var c=this.transform,e=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;b||(this._localBoundsRect||(this._localBoundsRect=new x.Rectangle),b=this._localBoundsRect);b=this.getBounds(!1,b);this.parent=e;this.transform=c;return b};a.prototype.toGlobal=function(b,c){2<arguments.length&&
void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null));return this.worldTransform.apply(b,c)};a.prototype.toLocal=function(b,c,e,f){c&&(b=c.toGlobal(b,e,f));f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=
null));return this.worldTransform.applyInverse(b,e)};a.prototype.renderWebGL=function(b){};a.prototype.renderCanvas=function(b){};a.prototype.setParent=function(b){if(!b||!b.addChild)throw Error("setParent: Argument must be a Container");b.addChild(this);return b};a.prototype.setTransform=function(){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,f=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:0,l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,m=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;this.position.x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.position.y=b;this.scale.x=c?c:1;this.scale.y=e?e:1;this.rotation=f;this.skew.x=l;this.skew.y=a;this.pivot.x=m;this.pivot.y=h;return this};a.prototype.destroy=
function(){this.removeAllListeners();this.parent&&this.parent.removeChild(this);this.filterArea=this._mask=this._currentBounds=this._bounds=this.parent=this.transform=null;this.interactiveChildren=this.interactive=!1;this._destroyed=!0};c(a,[{key:"_tempDisplayObjectParent",get:function(){null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new a);return this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(b){this.transform.position.x=b}},{key:"y",
get:function(){return this.position.y},set:function(b){this.transform.position.y=b}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(b){this.transform.position.copy(b)}},{key:"scale",get:function(){return this.transform.scale},set:function(b){this.transform.scale.copy(b)}},{key:"pivot",get:function(){return this.transform.pivot},
set:function(b){this.transform.pivot.copy(b)}},{key:"skew",get:function(){return this.transform.skew},set:function(b){this.transform.skew.copy(b)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(b){this.transform.rotation=b}},{key:"worldVisible",get:function(){var b=this;do{if(!b.visible)return!1;b=b.parent}while(b);return!0}},{key:"mask",get:function(){return this._mask},set:function(b){this._mask&&(this._mask.renderable=!0);if(this._mask=b)this._mask.renderable=!1}},
{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(b){this._filters=b&&b.slice()}}]);return a}(g.default);d.default=a;a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;var h=function(){function c(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,e,f){e&&c(b.prototype,e);f&&c(b,f);return b}}(),c=a("../math");a=a("./TransformBase");a=function(f){function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var e=f.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.position=new c.Point(0,0);e.scale=new c.Point(1,1);e.skew=new c.ObservablePoint(e.updateSkew,e,0,0);e.pivot=new c.Point(0,0);e._rotation=0;e._cx=1;e._sx=0;e._cy=0;e._sy=1;return e}k(b,f);b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=
Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)};b.prototype.updateLocalTransform=function(){var b=this.localTransform;b.a=this._cx*this.scale.x;b.b=this._sx*this.scale.x;b.c=this._cy*this.scale.y;b.d=this._sy*this.scale.y;b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c);b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d)};b.prototype.updateTransform=function(b){var c=this.localTransform;c.a=this._cx*
this.scale.x;c.b=this._sx*this.scale.x;c.c=this._cy*this.scale.y;c.d=this._sy*this.scale.y;c.tx=this.position.x-(this.pivot.x*c.a+this.pivot.y*c.c);c.ty=this.position.y-(this.pivot.x*c.b+this.pivot.y*c.d);b=b.worldTransform;var e=this.worldTransform;e.a=c.a*b.a+c.b*b.c;e.b=c.a*b.b+c.b*b.d;e.c=c.c*b.a+c.d*b.c;e.d=c.c*b.b+c.d*b.d;e.tx=c.tx*b.a+c.ty*b.c+b.tx;e.ty=c.tx*b.b+c.ty*b.d+b.ty;this._worldID++};b.prototype.setFromMatrix=function(b){b.decompose(this)};h(b,[{key:"rotation",get:function(){return this._rotation},
set:function(b){this._rotation=b;this.updateSkew()}}]);return b}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"../math":70,"./TransformBase":51}],51:[function(a,g,d){d.__esModule=!0;var k=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.worldTransform=new k.Matrix;this.localTransform=new k.Matrix;this._parentID=this._worldID=0}a.prototype.updateLocalTransform=function(){};a.prototype.updateTransform=function(c){c=
c.worldTransform;var f=this.worldTransform,b=this.localTransform;f.a=b.a*c.a+b.b*c.c;f.b=b.a*c.b+b.b*c.d;f.c=b.c*c.a+b.d*c.c;f.d=b.c*c.b+b.d*c.d;f.tx=b.tx*c.a+b.ty*c.c+c.tx;f.ty=b.tx*c.b+b.ty*c.d+c.ty;this._worldID++};return a}();d.default=a;a.prototype.updateWorldTransform=a.prototype.updateTransform;a.IDENTITY=new a},{"../math":70}],52:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=
Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;var h=function(){function c(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,e,f){e&&c(b.prototype,e);f&&c(b,f);return b}}(),c=a("../math");a=a("./TransformBase");a=function(f){function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var e=f.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.position=new c.ObservablePoint(e.onChange,e,0,0);e.scale=new c.ObservablePoint(e.onChange,e,1,1);e.pivot=new c.ObservablePoint(e.onChange,e,0,0);e.skew=new c.ObservablePoint(e.updateSkew,e,0,0);e._rotation=0;e._cx=1;e._sx=0;e._cy=0;e._sy=1;e._localID=0;e._currentLocalID=
0;return e}k(b,f);b.prototype.onChange=function(){this._localID++};b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++};b.prototype.updateLocalTransform=function(){var b=this.localTransform;this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=
this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1)};b.prototype.updateTransform=function(b){var c=this.localTransform;this._localID!==this._currentLocalID&&(c.a=this._cx*this.scale._x,c.b=this._sx*this.scale._x,c.c=this._cy*this.scale._y,c.d=this._sy*this.scale._y,c.tx=this.position._x-(this.pivot._x*c.a+this.pivot._y*c.c),c.ty=this.position._y-(this.pivot._x*
c.b+this.pivot._y*c.d),this._currentLocalID=this._localID,this._parentID=-1);if(this._parentID!==b._worldID){var e=b.worldTransform,f=this.worldTransform;f.a=c.a*e.a+c.b*e.c;f.b=c.a*e.b+c.b*e.d;f.c=c.c*e.a+c.d*e.c;f.d=c.c*e.b+c.d*e.d;f.tx=c.tx*e.a+c.ty*e.c+e.tx;f.ty=c.tx*e.b+c.ty*e.d+e.ty;this._parentID=b._worldID;this._worldID++}};b.prototype.setFromMatrix=function(b){b.decompose(this);this._localID++};h(b,[{key:"rotation",get:function(){return this._rotation},set:function(b){this._rotation=b;this.updateSkew()}}]);
return b}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"../math":70,"./TransformBase":51}],53:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=
!0;g=a("../display/Container");g=k(g);var c=a("../textures/RenderTexture"),f=k(c);c=a("../textures/Texture");var b=k(c);c=a("./GraphicsData");var e=k(c);c=a("../sprites/Sprite");var l=k(c),m=a("../math"),q=a("../utils"),x=a("../const");c=a("../display/Bounds");var r=k(c);c=a("./utils/bezierCurveTo");var u=k(c);a=a("../renderers/canvas/CanvasRenderer");var v=k(a),w=void 0,t=new m.Matrix,A=new m.Point,y=new Float32Array(4),z=new Float32Array(4);a=function(c){function a(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var e=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.fillAlpha=1;e.lineWidth=0;e.nativeLines=b;e.lineColor=0;e.graphicsData=[];e.tint=16777215;e._prevTint=16777215;e.blendMode=x.BLEND_MODES.NORMAL;e.currentPath=null;e._webGL={};e.isMask=!1;e.boundsPadding=0;e._localBounds=
new r.default;e.dirty=0;e.fastRectDirty=-1;e.clearDirty=0;e.boundsDirty=-1;e.cachedSpriteDirty=!1;e._spriteRect=null;e._fastRect=!1;return e}h(a,c);a.prototype.clone=function(){var b=new a;b.renderable=this.renderable;b.fillAlpha=this.fillAlpha;b.lineWidth=this.lineWidth;b.lineColor=this.lineColor;b.tint=this.tint;b.blendMode=this.blendMode;b.isMask=this.isMask;b.boundsPadding=this.boundsPadding;b.dirty=0;b.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)b.graphicsData.push(this.graphicsData[c].clone());
b.currentPath=b.graphicsData[b.graphicsData.length-1];b.updateLocalBounds();return b};a.prototype.lineStyle=function(){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;this.lineWidth=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.lineColor=b;this.lineAlpha=c;this.currentPath&&(this.currentPath.shape.points.length?(b=new m.Polygon(this.currentPath.shape.points.slice(-2)),b.closed=!1,this.drawShape(b)):(this.currentPath.lineWidth=
this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha));return this};a.prototype.moveTo=function(b,c){b=new m.Polygon([b,c]);b.closed=!1;this.drawShape(b);return this};a.prototype.lineTo=function(b,c){this.currentPath.shape.points.push(b,c);this.dirty++;return this};a.prototype.quadraticCurveTo=function(b,c,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var l=this.currentPath.shape.points;
0===l.length&&this.moveTo(0,0);for(var a=l[l.length-2],m=l[l.length-1],h=1;20>=h;++h){var d=h/20;var k=a+(b-a)*d;var g=m+(c-m)*d;l.push(k+(b+(e-b)*d-k)*d,g+(c+(f-c)*d-g)*d)}this.dirty++;return this};a.prototype.bezierCurveTo=function(b,c,e,f,l,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var m=this.currentPath.shape.points,h=m[m.length-2],d=m[m.length-1];m.length-=2;(0,u.default)(h,d,b,c,e,f,l,a,m);this.dirty++;return this};a.prototype.arcTo=
function(b,c,e,f,l){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(b,c):this.moveTo(b,c);var a=this.currentPath.shape.points,m=a[a.length-1]-c,h=a[a.length-2]-b;f-=c;e-=b;var d=Math.abs(m*e-h*f);if(1E-8>d||0===l)a[a.length-2]===b&&a[a.length-1]===c||a.push(b,c);else{var k=m*m+h*h,g=f*f+e*e,q=m*f+h*e;a=l*Math.sqrt(k)/d;d=l*Math.sqrt(g)/d;k=a*q/k;g=d*q/g;q=a*e+d*h;var x=a*f+d*m;this.arc(q+b,x+c,l,Math.atan2(m*(d+k)-x,h*(d+k)-q),Math.atan2(f*(a+g)-x,e*(a+
g)-q),h*f>e*m)}this.dirty++;return this};a.prototype.arc=function(b,c,e,f,l){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(f===l)return this;!a&&l<=f?l+=2*Math.PI:a&&f<=l&&(f+=2*Math.PI);var m=l-f,h=40*Math.ceil(Math.abs(m)/(2*Math.PI));if(0===m)return this;var d=b+Math.cos(f)*e,k=c+Math.sin(f)*e;(a=this.currentPath?this.currentPath.shape.points:null)?a[a.length-2]===d&&a[a.length-1]===k||a.push(d,k):(this.moveTo(d,k),a=this.currentPath.shape.points);m/=2*h;d=2*m;k=Math.cos(m);
var g=Math.sin(m);--h;for(var q=h%1/h,x=0;x<=h;++x){var r=m+f+d*(x+q*x),u=Math.cos(r);r=-Math.sin(r);a.push((k*u+g*r)*e+b,(k*-r+g*u)*e+c)}this.dirty++;return this};a.prototype.beginFill=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.filling=!0;this.fillColor=b;this.fillAlpha=c;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,
this.currentPath.fillAlpha=this.fillAlpha);return this};a.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};a.prototype.drawRect=function(b,c,e,f){this.drawShape(new m.Rectangle(b,c,e,f));return this};a.prototype.drawRoundedRect=function(b,c,e,f,l){this.drawShape(new m.RoundedRectangle(b,c,e,f,l));return this};a.prototype.drawCircle=function(b,c,e){this.drawShape(new m.Circle(b,c,e));return this};a.prototype.drawEllipse=function(b,c,e,f){this.drawShape(new m.Ellipse(b,
c,e,f));return this};a.prototype.drawPolygon=function(b){var c=b,e=!0;c instanceof m.Polygon&&(e=c.closed,c=c.points);if(!Array.isArray(c)){c=Array(arguments.length);for(var f=0;f<c.length;++f)c[f]=arguments[f]}c=new m.Polygon(c);c.closed=e;this.drawShape(c);return this};a.prototype.clear=function(){if(this.lineWidth||this.filling||0<this.graphicsData.length)this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0;this._spriteRect=this.currentPath=
null;return this};a.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===x.SHAPES.RECT&&!this.graphicsData[0].lineWidth};a.prototype._renderWebGL=function(b){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect());this._fastRect?this._renderSpriteRect(b):(b.setObjectRenderer(b.plugins.graphics),b.plugins.graphics.render(this))};a.prototype._renderSpriteRect=function(c){var e=this.graphicsData[0].shape;this._spriteRect||
(this._spriteRect=new l.default(new b.default(b.default.WHITE)));var f=this._spriteRect;16777215===this.tint?f.tint=this.graphicsData[0].fillColor:((0,q.hex2rgb)(this.graphicsData[0].fillColor,y),(0,q.hex2rgb)(this.tint,z),y[0]*=z[0],y[1]*=z[1],y[2]*=z[2],f.tint=(0,q.rgb2hex)(y));f.alpha=this.graphicsData[0].fillAlpha;f.worldAlpha=this.worldAlpha*f.alpha;f.blendMode=this.blendMode;f._texture._frame.width=e.width;f._texture._frame.height=e.height;f.transform.worldTransform=this.transform.worldTransform;
f.anchor.set(-e.x/e.width,-e.y/e.height);f._onAnchorUpdate();f._renderWebGL(c)};a.prototype._renderCanvas=function(b){!0!==this.isMask&&b.plugins.graphics.render(this)};a.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var b=this._localBounds;this._bounds.addFrame(this.transform,b.minX,b.minY,b.maxX,b.maxY)};a.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,A);for(var c=this.graphicsData,
e=0;e<c.length;++e)if(b=c[e],b.fill&&b.shape&&b.shape.contains(A.x,A.y)){if(b.holes)for(c=0;c<b.holes.length;c++)if(b.holes[c].contains(A.x,A.y))return!1;return!0}return!1};a.prototype.updateLocalBounds=function(){var b=Infinity,c=-Infinity,e=Infinity,f=-Infinity;if(this.graphicsData.length)for(var l,a,m,h,d,k=0;k<this.graphicsData.length;k++){l=this.graphicsData[k];m=l.type;var g=l.lineWidth;l=l.shape;if(m===x.SHAPES.RECT||m===x.SHAPES.RREC)a=l.x-g/2,m=l.y-g/2,h=l.width+g,d=l.height+g,b=a<b?a:b,
c=a+h>c?a+h:c,e=m<e?m:e,f=m+d>f?m+d:f;else if(m===x.SHAPES.CIRC)a=l.x,m=l.y,h=l.radius+g/2,d=l.radius+g/2,b=a-h<b?a-h:b,c=a+h>c?a+h:c,e=m-d<e?m-d:e,f=m+d>f?m+d:f;else if(m===x.SHAPES.ELIP)a=l.x,m=l.y,h=l.width+g/2,d=l.height+g/2,b=a-h<b?a-h:b,c=a+h>c?a+h:c,e=m-d<e?m-d:e,f=m+d>f?m+d:f;else{l=l.points;for(var q,r,u,t,w,v=0;v+2<l.length;v+=2)a=l[v],m=l[v+1],q=l[v+2],r=l[v+3],u=Math.abs(q-a),t=Math.abs(r-m),d=g,h=Math.sqrt(u*u+t*t),1E-9>h||(w=(d/h*t+u)/2,h=(d/h*u+t)/2,a=(q+a)/2,m=(r+m)/2,b=a-w<b?a-w:
b,c=a+w>c?a+w:c,e=m-h<e?m-h:e,f=m+h>f?m+h:f)}}else f=e=c=b=0;k=this.boundsPadding;this._localBounds.minX=b-k;this._localBounds.maxX=c+k;this._localBounds.minY=e-k;this._localBounds.maxY=f+k};a.prototype.drawShape=function(b){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;b=new e.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,b);this.graphicsData.push(b);b.type===x.SHAPES.POLY&&
(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b);this.dirty++;return b};a.prototype.generateCanvasTexture=function(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,l=this.getLocalBounds(),a=f.default.create(l.width,l.height,c,e);w||(w=new v.default);this.transform.updateLocalTransform();this.transform.localTransform.copy(t);t.invert();t.tx-=l.x;t.ty-=l.y;w.render(this,a,!0,t);l=b.default.fromCanvas(a.baseTexture._canvasRenderTarget.canvas,c,"graphics");l.baseTexture.resolution=
e;l.baseTexture.update();return l};a.prototype.closePath=function(){var b=this.currentPath;b&&b.shape&&b.shape.close();return this};a.prototype.addHole=function(){var b=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-1];this.currentPath.addHole(b.shape);this.currentPath=null;return this};a.prototype.destroy=function(b){c.prototype.destroy.call(this,b);for(b=0;b<this.graphicsData.length;++b)this.graphicsData[b].destroy();for(var e in this._webgl)for(b=0;b<this._webgl[e].data.length;++b)this._webgl[e].data[b].destroy();
this._spriteRect&&this._spriteRect.destroy();this._localBounds=this._webgl=this.currentPath=this.graphicsData=null};return a}(g.default);d.default=a;a._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(a,g,d){d.__esModule=!0;a=function(){function a(h,c,f,
b,e,l,m,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.lineWidth=h;this.nativeLines=m;this.lineColor=c;this.lineAlpha=f;this._lineTint=c;this.fillColor=b;this.fillAlpha=e;this._fillTint=b;this.fill=l;this.holes=[];this.shape=d;this.type=d.type}a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)};a.prototype.addHole=function(a){this.holes.push(a)};a.prototype.destroy=
function(){this.holes=this.shape=null};return a}();d.default=a},{}],55:[function(a,g,d){d.__esModule=!0;g=(g=a("../../renderers/canvas/CanvasRenderer"))&&g.__esModule?g:{default:g};var k=a("../../const");a=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=c}a.prototype.render=function(c){var f=this.renderer,b=f.context,e=c.worldAlpha,l=c.transform.worldTransform,a=f.resolution;this._prevTint!==this.tint&&(this.dirty=!0);b.setTransform(l.a*
a,l.b*a,l.c*a,l.d*a,l.tx*a,l.ty*a);c.dirty&&(this.updateGraphicsTint(c),c.dirty=!1);f.setBlendMode(c.blendMode);for(f=0;f<c.graphicsData.length;f++){l=c.graphicsData[f];var h=l.shape;a=l._fillTint;var d=l._lineTint;b.lineWidth=l.lineWidth;if(l.type===k.SHAPES.POLY){b.beginPath();this.renderPolygon(h.points,h.closed,b);for(var g=0;g<l.holes.length;g++)this.renderPolygon(l.holes[g].points,!0,b);l.fill&&(b.globalAlpha=l.fillAlpha*e,b.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),b.fill());l.lineWidth&&
(b.globalAlpha=l.lineAlpha*e,b.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),b.stroke())}else if(l.type===k.SHAPES.RECT){if(l.fillColor||0===l.fillColor)b.globalAlpha=l.fillAlpha*e,b.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),b.fillRect(h.x,h.y,h.width,h.height);l.lineWidth&&(b.globalAlpha=l.lineAlpha*e,b.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),b.strokeRect(h.x,h.y,h.width,h.height))}else if(l.type===k.SHAPES.CIRC)b.beginPath(),b.arc(h.x,h.y,h.radius,0,2*Math.PI),
b.closePath(),l.fill&&(b.globalAlpha=l.fillAlpha*e,b.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),b.fill()),l.lineWidth&&(b.globalAlpha=l.lineAlpha*e,b.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),b.stroke());else if(l.type===k.SHAPES.ELIP){var u=2*h.width,v=2*h.height;g=h.x-u/2;h=h.y-v/2;b.beginPath();var w=u/2*.5522848,t=v/2*.5522848,A=g+u,y=h+v;u=g+u/2;v=h+v/2;b.moveTo(g,v);b.bezierCurveTo(g,v-t,u-w,h,u,h);b.bezierCurveTo(u+w,h,A,v-t,A,v);b.bezierCurveTo(A,v+t,u+w,y,u,y);b.bezierCurveTo(u-
w,y,g,v+t,g,v);b.closePath();l.fill&&(b.globalAlpha=l.fillAlpha*e,b.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),b.fill());l.lineWidth&&(b.globalAlpha=l.lineAlpha*e,b.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),b.stroke())}else if(l.type===k.SHAPES.RREC){g=h.x;v=h.y;w=h.width;t=h.height;h=h.radius;A=Math.min(w,t)/2|0;h=h>A?A:h;b.beginPath();b.moveTo(g,v+h);b.lineTo(g,v+t-h);b.quadraticCurveTo(g,v+t,g+h,v+t);b.lineTo(g+w-h,v+t);b.quadraticCurveTo(g+w,v+t,g+w,v+t-h);b.lineTo(g+
w,v+h);b.quadraticCurveTo(g+w,v,g+w-h,v);b.lineTo(g+h,v);b.quadraticCurveTo(g,v,g,v+h);b.closePath();if(l.fillColor||0===l.fillColor)b.globalAlpha=l.fillAlpha*e,b.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),b.fill();l.lineWidth&&(b.globalAlpha=l.lineAlpha*e,b.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),b.stroke())}}};a.prototype.updateGraphicsTint=function(c){c._prevTint=c.tint;for(var f=(c.tint>>16&255)/255,b=(c.tint>>8&255)/255,e=(c.tint&255)/255,l=0;l<c.graphicsData.length;++l){var a=
c.graphicsData[l],h=a.fillColor|0,d=a.lineColor|0;a._fillTint=((h>>16&255)/255*f*255<<16)+((h>>8&255)/255*b*255<<8)+(h&255)/255*e*255;a._lineTint=((d>>16&255)/255*f*255<<16)+((d>>8&255)/255*b*255<<8)+(d&255)/255*e*255}};a.prototype.renderPolygon=function(c,f,b){b.moveTo(c[0],c[1]);for(var e=1;e<c.length/2;++e)b.lineTo(c[2*e],c[2*e+1]);f&&b.closePath()};a.prototype.destroy=function(){this.renderer=null};return a}();d.default=a;g.default.registerPlugin("graphics",a)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],
56:[function(a,g,d){d.__esModule=!0;d.default=function(a,h,c,f,b,e,l,m){var d=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[];d.push(a,h);for(var k=1,g;20>=k;++k){g=k/20;var u=1-g;var v=u*u;var w=v*u;var t=g*g;var A=t*g;d.push(w*a+3*v*g*c+3*u*t*b+A*l,w*h+3*v*g*f+3*u*t*e+A*m)}return d}},{}],57:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=a("../../utils"),f=a("../../const");g=a("../../renderers/webgl/utils/ObjectRenderer");var b=k(g);g=a("../../renderers/webgl/WebGLRenderer");g=k(g);var e=a("./WebGLGraphicsData"),l=k(e);e=a("./shaders/PrimitiveShader");var m=k(e);e=a("./utils/buildPoly");var q=k(e);e=a("./utils/buildRectangle");
var x=k(e);e=a("./utils/buildRoundedRectangle");var r=k(e);a=a("./utils/buildCircle");var u=k(a);a=function(e){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var c=e.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.graphicsDataPool=[];c.primitiveShader=null;c.gl=b.gl;c.CONTEXT_UID=0;return c}h(a,e);a.prototype.onContextChange=function(){this.gl=
this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=new m.default(this.gl)};a.prototype.destroy=function(){b.default.prototype.destroy.call(this);for(var c=0;c<this.graphicsDataPool.length;++c)this.graphicsDataPool[c].destroy();this.graphicsDataPool=null};a.prototype.render=function(b){var e=this.renderer,f=e.gl,l=b._webGL[this.CONTEXT_UID];l&&b.dirty===l.dirty||(this.updateGraphics(b),l=b._webGL[this.CONTEXT_UID]);e.bindShader(this.primitiveShader);e.state.setBlendMode(b.blendMode);
for(var a=0,m=l.data.length;a<m;a++){var h=l.data[a];var d=h.shader;e.bindShader(d);d.uniforms.translationMatrix=b.transform.worldTransform.toArray(!0);d.uniforms.tint=(0,c.hex2rgb)(b.tint);d.uniforms.alpha=b.worldAlpha;e.bindVao(h.vao);h.nativeLines?f.drawArrays(f.LINES,0,h.points.length/6):h.vao.draw(f.TRIANGLE_STRIP,h.indices.length)}};a.prototype.updateGraphics=function(b){var c=this.renderer.gl,e=b._webGL[this.CONTEXT_UID];e||(e=b._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:c,clearDirty:-1,
dirty:-1});e.dirty=b.dirty;if(b.clearDirty!==e.clearDirty){e.clearDirty=b.clearDirty;for(c=0;c<e.data.length;c++)this.graphicsDataPool.push(e.data[c]);e.data.length=0;e.lastIndex=0}for(var l=void 0,a=e.lastIndex;a<b.graphicsData.length;a++){var m=b.graphicsData[a];c=this.getWebGLData(e,0);m.nativeLines&&m.lineWidth&&(l=this.getWebGLData(e,0,!0),e.lastIndex++);m.type===f.SHAPES.POLY&&(0,q.default)(m,c,l);m.type===f.SHAPES.RECT?(0,x.default)(m,c,l):m.type===f.SHAPES.CIRC||m.type===f.SHAPES.ELIP?(0,
u.default)(m,c,l):m.type===f.SHAPES.RREC&&(0,r.default)(m,c,l);e.lastIndex++}this.renderer.bindVao(null);for(b=0;b<e.data.length;b++)c=e.data[b],c.dirty&&c.upload()};a.prototype.getWebGLData=function(b,c,e){var f=b.data[b.data.length-1];if(!f||f.nativeLines!==e||32E4<f.points.length)f=this.graphicsDataPool.pop()||new l.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),f.nativeLines=e,f.reset(c),b.data.push(f);f.dirty=!0;return f};return a}(b.default);d.default=a;g.default.registerPlugin("graphics",
a)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(a,g,d){d.__esModule=!0;var k=(a=a("pixi-gl-core"))&&a.__esModule?a:{default:a};a=function(){function a(c,f,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.gl=c;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=k.default.GLBuffer.createVertexBuffer(c);this.indexBuffer=k.default.GLBuffer.createIndexBuffer(c);this.dirty=!0;this.nativeLines=!1;this.glIndices=this.glPoints=null;this.shader=f;this.vao=(new k.default.VertexArrayObject(c,b)).addIndex(this.indexBuffer).addAttribute(this.buffer,f.attributes.aVertexPosition,c.FLOAT,!1,24,0).addAttribute(this.buffer,f.attributes.aColor,c.FLOAT,!1,24,8)}a.prototype.reset=function(){this.points.length=
0;this.indices.length=0};a.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=!1};a.prototype.destroy=function(){this.indices=this.points=this.color=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null};return a}();d.default=a},{"pixi-gl-core":12}],59:[function(a,
g,d){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}d.__esModule=!0;a=a("../../../Shader");a=function(a){function c(f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");f=a.call(this,f,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}k(c,a);return c}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"../../../Shader":44}],60:[function(a,g,d){d.__esModule=!0;d.default=function(f,b,e){var l=f.shape,a=l.x,d=l.y,g;if(f.type===h.SHAPES.CIRC)var r=g=l.radius;else g=l.width,r=l.height;if(0!==g&&0!==r){l=Math.floor(30*
Math.sqrt(l.radius))||Math.floor(15*Math.sqrt(l.width+l.height));var u=2*Math.PI/l;if(f.fill){var v=(0,c.hex2rgb)(f.fillColor),w=f.fillAlpha,t=v[0]*w,A=v[1]*w;v=v[2]*w;var y=b.points,z=b.indices,B=y.length/6;z.push(B);for(var D=0;D<l+1;D++)y.push(a,d,t,A,v,w),y.push(a+Math.sin(u*D)*g,d+Math.cos(u*D)*r,t,A,v,w),z.push(B++,B++);z.push(B-1)}if(f.lineWidth){w=f.points;f.points=[];for(t=0;t<l+1;t++)f.points.push(a+Math.sin(u*t)*g,d+Math.cos(u*t)*r);(0,k.default)(f,b,e);f.points=w}}};var k=(g=a("./buildLine"))&&
g.__esModule?g:{default:g},h=a("../../../const"),c=a("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(a,g,d){d.__esModule=!0;d.default=function(c,f,b){if(c.nativeLines){var e=c.points;if(0!==e.length){b=b.points;f=e.length/2;var l=(0,h.hex2rgb)(c.lineColor);var a=c.lineAlpha,d=l[0]*a,g=l[1]*a;c=l[2]*a;for(l=1;l<f;l++){var r=e[2*l],u=e[2*l+1];b.push(e[2*(l-1)],e[2*(l-1)+1]);b.push(d,g,c,a);b.push(r,u);b.push(d,g,c,a)}}}else if(e=c.points,0!==e.length){a=
new k.Point(e[0],e[1]);d=new k.Point(e[e.length-2],e[e.length-1]);a.x===d.x&&a.y===d.y&&(e=e.slice(),e.pop(),e.pop(),d=new k.Point(e[e.length-2],e[e.length-1]),b=d.x+.5*(a.x-d.x),a=d.y+.5*(a.y-d.y),e.unshift(b,a),e.push(b,a));b=f.points;f=f.indices;g=e.length/2;a=e.length;d=b.length/6;l=c.lineWidth/2;var v=(0,h.hex2rgb)(c.lineColor);c=c.lineAlpha;r=v[0]*c;u=v[1]*c;v=v[2]*c;var w=e[0],t=e[1],A=e[2],y=e[3],z=-(t-y),B=w-A,D=Math.sqrt(z*z+B*B);z=z/D*l;B=B/D*l;b.push(w-z,t-B,r,u,v,c);b.push(w+z,t+B,r,
u,v,c);for(var E=1;E<g-1;++E){w=e[2*(E-1)];t=e[2*(E-1)+1];A=e[2*E];y=e[2*E+1];var C=e[2*(E+1)];var F=e[2*(E+1)+1];z=-(t-y);B=w-A;D=Math.sqrt(z*z+B*B);z/=D;B/=D;z*=l;B*=l;var G=-(y-F);var H=A-C;D=Math.sqrt(G*G+H*H);G/=D;H/=D;G*=l;H*=l;D=-B+t-(-B+y);var J=-z+A-(-z+w);w=(-z+w)*(-B+y)-(-z+A)*(-B+t);t=-H+F-(-H+y);var R=-G+A-(-G+C);C=(-G+C)*(-H+y)-(-G+A)*(-H+F);F=D*R-t*J;.1>Math.abs(F)?(b.push(A-z,y-B,r,u,v,c),b.push(A+z,y+B,r,u,v,c)):(J=(J*C-R*w)/F,D=(t*w-D*C)/F,(J-A)*(J-A)+(D-y)*(D-y)>196*l*l?(z-=G,B-=
H,D=Math.sqrt(z*z+B*B),z/=D,B/=D,z*=l,B*=l,b.push(A-z,y-B),b.push(r,u,v,c),b.push(A+z,y+B),b.push(r,u,v,c),b.push(A-z,y-B),b.push(r,u,v,c),a++):(b.push(J,D),b.push(r,u,v,c),b.push(A-(J-A),y-(D-y)),b.push(r,u,v,c)))}w=e[2*(g-2)];t=e[2*(g-2)+1];A=e[2*(g-1)];y=e[2*(g-1)+1];z=-(t-y);B=w-A;D=Math.sqrt(z*z+B*B);z=z/D*l;B=B/D*l;b.push(A-z,y-B);b.push(r,u,v,c);b.push(A+z,y+B);b.push(r,u,v,c);f.push(d);for(e=0;e<a;++e)f.push(d++);f.push(d-1)}};var k=a("../../../math"),h=a("../../../utils")},{"../../../math":70,
"../../../utils":125}],62:[function(a,g,d){d.__esModule=!0;d.default=function(f,b,e){f.points=f.shape.points.slice();var l=f.points;if(f.fill&&6<=l.length){for(var a=[],d=f.holes,g=0;g<d.length;g++){var r=d[g];a.push(l.length/2);l=l.concat(r.points)}d=b.points;var u=b.indices;g=l.length/2;var v=(0,h.hex2rgb)(f.fillColor);r=f.fillAlpha;var w=v[0]*r,t=v[1]*r;v=v[2]*r;a=(0,c.default)(l,a,2);if(!a)return;for(var A=d.length/6,y=0;y<a.length;y+=3)u.push(a[y]+A),u.push(a[y]+A),u.push(a[y+1]+A),u.push(a[y+
2]+A),u.push(a[y+2]+A);for(a=0;a<g;a++)d.push(l[2*a],l[2*a+1],w,t,v,r)}0<f.lineWidth&&(0,k.default)(f,b,e)};var k=(g=a("./buildLine"))&&g.__esModule?g:{default:g},h=a("../../../utils"),c=(a=a("earcut"))&&a.__esModule?a:{default:a}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(a,g,d){d.__esModule=!0;d.default=function(c,f,b){var e=c.shape,l=e.x,a=e.y,d=e.width;e=e.height;if(c.fill){var g=(0,h.hex2rgb)(c.fillColor),r=c.fillAlpha,u=g[0]*r,v=g[1]*r;g=g[2]*r;var w=f.points,t=f.indices,
A=w.length/6;w.push(l,a);w.push(u,v,g,r);w.push(l+d,a);w.push(u,v,g,r);w.push(l,a+e);w.push(u,v,g,r);w.push(l+d,a+e);w.push(u,v,g,r);t.push(A,A,A+1,A+2,A+3,A+3)}c.lineWidth&&(r=c.points,c.points=[l,a,l+d,a,l+d,a+e,l,a+e,l,a],(0,k.default)(c,f,b),c.points=r)};var k=(g=a("./buildLine"))&&g.__esModule?g:{default:g},h=a("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(a,g,d){function k(b,c,f,a,h,d){for(var e=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],l,m,k,g,x=0,
q;20>=x;++x)q=x/20,l=b+(f-b)*q,m=c+(a-c)*q,k=f+(h-f)*q,g=a+(d-a)*q,l+=(k-l)*q,m+=(g-m)*q,e.push(l,m);return e}d.__esModule=!0;d.default=function(b,e,l){var a=b.shape,d=a.x,g=a.y,r=a.width,u=a.height,v=a.radius;a=[];a.push(d,g+v);k(d,g+u-v,d,g+u,d+v,g+u,a);k(d+r-v,g+u,d+r,g+u,d+r,g+u-v,a);k(d+r,g+v,d+r,g,d+r-v,g,a);k(d+v,g,d,g,d,g+v+1E-10,a);if(b.fill){u=(0,f.hex2rgb)(b.fillColor);d=b.fillAlpha;g=u[0]*d;r=u[1]*d;u=u[2]*d;v=e.points;for(var w=e.indices,t=v.length/6,A=(0,h.default)(a,null,2),y=0,z=A.length;y<
z;y+=3)w.push(A[y]+t),w.push(A[y]+t),w.push(A[y+1]+t),w.push(A[y+2]+t),w.push(A[y+2]+t);w=0;for(t=a.length;w<t;w++)v.push(a[w],a[++w],g,r,u,d)}b.lineWidth&&(d=b.points,b.points=a,(0,c.default)(b,e,l),b.points=d)};var h=(g=a("earcut"))&&g.__esModule?g:{default:g},c=(g=a("./buildLine"))&&g.__esModule?g:{default:g},f=a("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(a,g,d){function k(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(c[e]=b[e]);c.default=b;return c}function h(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;d.autoDetectRenderer=d.Application=d.Filter=d.SpriteMaskFilter=d.Quad=d.RenderTarget=d.ObjectRenderer=d.WebGLManager=d.Shader=d.CanvasRenderTarget=d.TextureUvs=d.VideoBaseTexture=d.BaseRenderTexture=d.RenderTexture=d.BaseTexture=d.TextureMatrix=d.Texture=d.Spritesheet=d.CanvasGraphicsRenderer=d.GraphicsRenderer=d.GraphicsData=d.Graphics=d.TextMetrics=d.TextStyle=d.Text=d.SpriteRenderer=d.CanvasTinter=
d.CanvasSpriteRenderer=d.Sprite=d.TransformBase=d.TransformStatic=d.Transform=d.Container=d.DisplayObject=d.Bounds=d.glCore=d.WebGLRenderer=d.CanvasRenderer=d.ticker=d.utils=d.settings=void 0;var c=a("./const");Object.keys(c).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(d,b,{enumerable:!0,get:function(){return c[b]}})});var f=a("./math");Object.keys(f).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(d,b,{enumerable:!0,get:function(){return f[b]}})});
var b=a("pixi-gl-core");Object.defineProperty(d,"glCore",{enumerable:!0,get:function(){return h(b).default}});var e=a("./display/Bounds");Object.defineProperty(d,"Bounds",{enumerable:!0,get:function(){return h(e).default}});var l=a("./display/DisplayObject");Object.defineProperty(d,"DisplayObject",{enumerable:!0,get:function(){return h(l).default}});var m=a("./display/Container");Object.defineProperty(d,"Container",{enumerable:!0,get:function(){return h(m).default}});var q=a("./display/Transform");
Object.defineProperty(d,"Transform",{enumerable:!0,get:function(){return h(q).default}});var x=a("./display/TransformStatic");Object.defineProperty(d,"TransformStatic",{enumerable:!0,get:function(){return h(x).default}});var r=a("./display/TransformBase");Object.defineProperty(d,"TransformBase",{enumerable:!0,get:function(){return h(r).default}});var u=a("./sprites/Sprite");Object.defineProperty(d,"Sprite",{enumerable:!0,get:function(){return h(u).default}});var v=a("./sprites/canvas/CanvasSpriteRenderer");
Object.defineProperty(d,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return h(v).default}});var w=a("./sprites/canvas/CanvasTinter");Object.defineProperty(d,"CanvasTinter",{enumerable:!0,get:function(){return h(w).default}});var t=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(d,"SpriteRenderer",{enumerable:!0,get:function(){return h(t).default}});var A=a("./text/Text");Object.defineProperty(d,"Text",{enumerable:!0,get:function(){return h(A).default}});var y=a("./text/TextStyle");
Object.defineProperty(d,"TextStyle",{enumerable:!0,get:function(){return h(y).default}});var z=a("./text/TextMetrics");Object.defineProperty(d,"TextMetrics",{enumerable:!0,get:function(){return h(z).default}});var B=a("./graphics/Graphics");Object.defineProperty(d,"Graphics",{enumerable:!0,get:function(){return h(B).default}});var D=a("./graphics/GraphicsData");Object.defineProperty(d,"GraphicsData",{enumerable:!0,get:function(){return h(D).default}});var E=a("./graphics/webgl/GraphicsRenderer");
Object.defineProperty(d,"GraphicsRenderer",{enumerable:!0,get:function(){return h(E).default}});var C=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(d,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return h(C).default}});var F=a("./textures/Spritesheet");Object.defineProperty(d,"Spritesheet",{enumerable:!0,get:function(){return h(F).default}});var G=a("./textures/Texture");Object.defineProperty(d,"Texture",{enumerable:!0,get:function(){return h(G).default}});var H=a("./textures/TextureMatrix");
Object.defineProperty(d,"TextureMatrix",{enumerable:!0,get:function(){return h(H).default}});var J=a("./textures/BaseTexture");Object.defineProperty(d,"BaseTexture",{enumerable:!0,get:function(){return h(J).default}});var R=a("./textures/RenderTexture");Object.defineProperty(d,"RenderTexture",{enumerable:!0,get:function(){return h(R).default}});var W=a("./textures/BaseRenderTexture");Object.defineProperty(d,"BaseRenderTexture",{enumerable:!0,get:function(){return h(W).default}});var X=a("./textures/VideoBaseTexture");
Object.defineProperty(d,"VideoBaseTexture",{enumerable:!0,get:function(){return h(X).default}});var Q=a("./textures/TextureUvs");Object.defineProperty(d,"TextureUvs",{enumerable:!0,get:function(){return h(Q).default}});var N=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(d,"CanvasRenderTarget",{enumerable:!0,get:function(){return h(N).default}});var S=a("./Shader");Object.defineProperty(d,"Shader",{enumerable:!0,get:function(){return h(S).default}});var I=a("./renderers/webgl/managers/WebGLManager");
Object.defineProperty(d,"WebGLManager",{enumerable:!0,get:function(){return h(I).default}});var M=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(d,"ObjectRenderer",{enumerable:!0,get:function(){return h(M).default}});var P=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(d,"RenderTarget",{enumerable:!0,get:function(){return h(P).default}});var K=a("./renderers/webgl/utils/Quad");Object.defineProperty(d,"Quad",{enumerable:!0,get:function(){return h(K).default}});var O=
a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(d,"SpriteMaskFilter",{enumerable:!0,get:function(){return h(O).default}});var L=a("./renderers/webgl/filters/Filter");Object.defineProperty(d,"Filter",{enumerable:!0,get:function(){return h(L).default}});var Y=a("./Application");Object.defineProperty(d,"Application",{enumerable:!0,get:function(){return h(Y).default}});var Z=a("./autoDetectRenderer");Object.defineProperty(d,"autoDetectRenderer",{enumerable:!0,get:function(){return Z.autoDetectRenderer}});
g=a("./utils");g=k(g);var T=a("./ticker");T=k(T);var U=a("./settings");U=h(U);var V=a("./renderers/canvas/CanvasRenderer");V=h(V);a=a("./renderers/webgl/WebGLRenderer");a=h(a);d.settings=U.default;d.utils=g;d.ticker=T;d.CanvasRenderer=V.default;d.WebGLRenderer=a.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,
"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,
"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":12}],
66:[function(a,g,d){function k(b){return 0>b?-1:0<b?1:0}d.__esModule=!0;var h=(a=a("./Matrix"))&&a.__esModule?a:{default:a},c=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],b=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],e=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],m=[];(function(){for(var a=0;16>a;a++){var d=[];m.push(d);for(var g=0;16>g;g++)for(var q=k(c[a]*c[g]+b[a]*f[g]),w=k(f[a]*c[g]+e[a]*f[g]),t=k(c[a]*b[g]+b[a]*e[g]),A=k(f[a]*b[g]+e[a]*e[g]),y=0;16>y;y++)if(c[y]===
q&&f[y]===w&&b[y]===t&&e[y]===A){d.push(y);break}}for(a=0;16>a;a++)d=new h.default,d.set(c[a],f[a],b[a],e[a],0,0),l.push(d)})();var q={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(b){return c[b]},uY:function(b){return f[b]},vX:function(c){return b[c]},vY:function(b){return e[b]},inv:function(b){return b&8?b&15:-b&7},add:function(b,c){return m[b][c]},sub:function(b,c){return m[b][q.inv(c)]},rotate180:function(b){return b^4},isVertical:function(b){return 2===
(b&3)},byDirection:function(b,c){return 2*Math.abs(b)<=Math.abs(c)?0<=c?q.S:q.N:2*Math.abs(c)<=Math.abs(b)?0<b?q.E:q.W:0<c?0<b?q.SE:q.SW:0<b?q.NE:q.NW},matrixAppendRotationInv:function(b,c){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=l[q.inv(c)];a.tx=e;a.ty=f;b.append(a)}};d.default=q},{"./Matrix":67}],67:[function(a,g,d){d.__esModule=!0;var k=function(){function c(c,b){for(var e=0;e<b.length;e++){var f=b[e];f.enumerable=
f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(f,b,e){b&&c(f.prototype,b);e&&c(f,e);return f}}(),h=(a=a("./Point"))&&a.__esModule?a:{default:a};a=function(){function c(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,m=4<arguments.length&&void 0!==
arguments[4]?arguments[4]:0,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a=f;this.b=b;this.c=e;this.d=a;this.tx=m;this.ty=h;this.array=null}c.prototype.fromArray=function(c){this.a=c[0];this.b=c[1];this.c=c[3];this.d=c[4];this.tx=c[2];this.ty=c[5]};c.prototype.set=function(c,b,e,a,m,h){this.a=c;this.b=b;this.c=e;this.d=a;this.tx=m;this.ty=h;return this};c.prototype.toArray=function(c,b){this.array||
(this.array=new Float32Array(9));b=b||this.array;c?(b[0]=this.a,b[1]=this.b,b[2]=0,b[3]=this.c,b[4]=this.d,b[5]=0,b[6]=this.tx,b[7]=this.ty):(b[0]=this.a,b[1]=this.c,b[2]=this.tx,b[3]=this.b,b[4]=this.d,b[5]=this.ty,b[6]=0,b[7]=0);b[8]=1;return b};c.prototype.apply=function(c,b){b=b||new h.default;var e=c.x;c=c.y;b.x=this.a*e+this.c*c+this.tx;b.y=this.b*e+this.d*c+this.ty;return b};c.prototype.applyInverse=function(c,b){b=b||new h.default;var e=1/(this.a*this.d+this.c*-this.b),f=c.x;c=c.y;b.x=this.d*
e*f+-this.c*e*c+(this.ty*this.c-this.tx*this.d)*e;b.y=this.a*e*c+-this.b*e*f+(-this.ty*this.a+this.tx*this.b)*e;return b};c.prototype.translate=function(c,b){this.tx+=c;this.ty+=b;return this};c.prototype.scale=function(c,b){this.a*=c;this.d*=b;this.c*=c;this.b*=b;this.tx*=c;this.ty*=b;return this};c.prototype.rotate=function(c){var b=Math.cos(c);c=Math.sin(c);var e=this.a,f=this.c,a=this.tx;this.a=e*b-this.b*c;this.b=e*c+this.b*b;this.c=f*b-this.d*c;this.d=f*c+this.d*b;this.tx=a*b-this.ty*c;this.ty=
a*c+this.ty*b;return this};c.prototype.append=function(c){var b=this.a,e=this.b,f=this.c,a=this.d;this.a=c.a*b+c.b*f;this.b=c.a*e+c.b*a;this.c=c.c*b+c.d*f;this.d=c.c*e+c.d*a;this.tx=c.tx*b+c.ty*f+this.tx;this.ty=c.tx*e+c.ty*a+this.ty;return this};c.prototype.setTransform=function(c,b,e,a,m,h,d,k,g){var f=Math.sin(d),l=Math.cos(d);d=Math.cos(g);g=Math.sin(g);var r=-Math.sin(k);k=Math.cos(k);var q=l*m;m*=f;f=-f*h;h*=l;this.a=d*q+g*f;this.b=d*m+g*h;this.c=r*q+k*f;this.d=r*m+k*h;this.tx=c+(e*q+a*f);this.ty=
b+(e*m+a*h);return this};c.prototype.prepend=function(c){var b=this.tx;if(1!==c.a||0!==c.b||0!==c.c||1!==c.d){var e=this.a,f=this.c;this.a=e*c.a+this.b*c.c;this.b=e*c.b+this.b*c.d;this.c=f*c.a+this.d*c.c;this.d=f*c.b+this.d*c.d}this.tx=b*c.a+this.ty*c.c+c.tx;this.ty=b*c.b+this.ty*c.d+c.ty;return this};c.prototype.decompose=function(c){var b=this.a,e=this.b,f=this.c,a=this.d,h=-Math.atan2(-f,a),d=Math.atan2(e,b);1E-5>Math.abs(h+d)?(c.rotation=d,0>b&&0<=a&&(c.rotation+=0>=c.rotation?Math.PI:-Math.PI),
c.skew.x=c.skew.y=0):(c.skew.x=h,c.skew.y=d);c.scale.x=Math.sqrt(b*b+e*e);c.scale.y=Math.sqrt(f*f+a*a);c.position.x=this.tx;c.position.y=this.ty;return c};c.prototype.invert=function(){var c=this.a,b=this.b,e=this.c,a=this.d,m=this.tx,h=c*a-b*e;this.a=a/h;this.b=-b/h;this.c=-e/h;this.d=c/h;this.tx=(e*this.ty-a*m)/h;this.ty=-(c*this.ty-b*m)/h;return this};c.prototype.identity=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this};c.prototype.clone=function(){var f=new c;f.a=this.a;
f.b=this.b;f.c=this.c;f.d=this.d;f.tx=this.tx;f.ty=this.ty;return f};c.prototype.copy=function(c){c.a=this.a;c.b=this.b;c.c=this.c;c.d=this.d;c.tx=this.tx;c.ty=this.ty;return c};k(c,null,[{key:"IDENTITY",get:function(){return new c}},{key:"TEMP_MATRIX",get:function(){return new c}}]);return c}();d.default=a},{"./Point":69}],68:[function(a,g,d){d.__esModule=!0;var k=function(){function a(c,f){for(var b=0;b<f.length;b++){var e=f[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(c,e.key,e)}}return function(c,f,b){f&&a(c.prototype,f);b&&a(c,b);return c}}();a=function(){function a(c,f){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._x=b;this._y=e;this.cb=c;this.scope=f}a.prototype.set=function(c,f){c=c||0;f=f||(0!==f?c:0);if(this._x!==c||this._y!==f)this._x=c,this._y=f,this.cb.call(this.scope)};
a.prototype.copy=function(c){if(this._x!==c.x||this._y!==c.y)this._x=c.x,this._y=c.y,this.cb.call(this.scope)};k(a,[{key:"x",get:function(){return this._x},set:function(c){this._x!==c&&(this._x=c,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(c){this._y!==c&&(this._y=c,this.cb.call(this.scope))}}]);return a}();d.default=a},{}],69:[function(a,g,d){d.__esModule=!0;a=function(){function a(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=h;this.y=c}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.copy=function(a){this.set(a.x,a.y)};a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y};a.prototype.set=function(a,c){this.x=a||0;this.y=c||(0!==c?this.x:0)};return a}();d.default=a},{}],70:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;var h=a("./Point");
Object.defineProperty(d,"Point",{enumerable:!0,get:function(){return k(h).default}});var c=a("./ObservablePoint");Object.defineProperty(d,"ObservablePoint",{enumerable:!0,get:function(){return k(c).default}});var f=a("./Matrix");Object.defineProperty(d,"Matrix",{enumerable:!0,get:function(){return k(f).default}});var b=a("./GroupD8");Object.defineProperty(d,"GroupD8",{enumerable:!0,get:function(){return k(b).default}});var e=a("./shapes/Circle");Object.defineProperty(d,"Circle",{enumerable:!0,get:function(){return k(e).default}});
var l=a("./shapes/Ellipse");Object.defineProperty(d,"Ellipse",{enumerable:!0,get:function(){return k(l).default}});var m=a("./shapes/Polygon");Object.defineProperty(d,"Polygon",{enumerable:!0,get:function(){return k(m).default}});var q=a("./shapes/Rectangle");Object.defineProperty(d,"Rectangle",{enumerable:!0,get:function(){return k(q).default}});var x=a("./shapes/RoundedRectangle");Object.defineProperty(d,"RoundedRectangle",{enumerable:!0,get:function(){return k(x).default}})},{"./GroupD8":66,"./Matrix":67,
"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(a,g,d){d.__esModule=!0;var k=(g=a("./Rectangle"))&&g.__esModule?g:{default:g},h=a("../../const");a=function(){function c(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.x=f;this.y=b;this.radius=e;this.type=h.SHAPES.CIRC}c.prototype.clone=function(){return new c(this.x,this.y,this.radius)};c.prototype.contains=function(c,b){if(0>=this.radius)return!1;c=this.x-c;b=this.y-b;return c*c+b*b<=this.radius*this.radius};c.prototype.getBounds=function(){return new k.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};return c}();d.default=a},{"../../const":46,"./Rectangle":74}],72:[function(a,g,d){d.__esModule=!0;var k=(g=a("./Rectangle"))&&g.__esModule?
g:{default:g},h=a("../../const");a=function(){function c(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.x=f;this.y=b;this.width=e;this.height=a;this.type=h.SHAPES.ELIP}c.prototype.clone=function(){return new c(this.x,this.y,
this.width,this.height)};c.prototype.contains=function(c,b){if(0>=this.width||0>=this.height)return!1;c=(c-this.x)/this.width;b=(b-this.y)/this.height;return 1>=c*c+b*b};c.prototype.getBounds=function(){return new k.default(this.x-this.width,this.y-this.height,this.width,this.height)};return c}();d.default=a},{"../../const":46,"./Rectangle":74}],73:[function(a,g,d){d.__esModule=!0;var k=(g=a("../Point"))&&g.__esModule?g:{default:g},h=a("../../const");a=function(){function c(){for(var f=arguments.length,
b=Array(f),e=0;e<f;e++)b[e]=arguments[e];if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");Array.isArray(b[0])&&(b=b[0]);if(b[0]instanceof k.default){f=[];e=0;for(var a=b.length;e<a;e++)f.push(b[e].x,b[e].y);b=f}this.closed=!0;this.points=b;this.type=h.SHAPES.POLY}c.prototype.clone=function(){return new c(this.points.slice())};c.prototype.close=function(){var c=this.points;c[0]===c[c.length-2]&&c[1]===c[c.length-1]||c.push(c[0],c[1])};c.prototype.contains=function(c,
b){for(var e=!1,f=this.points.length/2,a=0,h=f-1;a<f;h=a++){var d=this.points[2*a],k=this.points[2*a+1],g=this.points[2*h];h=this.points[2*h+1];k>b!==h>b&&c<(b-k)/(h-k)*(g-d)+d&&(e=!e)}return e};return c}();d.default=a},{"../../const":46,"../Point":69}],74:[function(a,g,d){d.__esModule=!0;var k=function(){function c(c,b){for(var e=0;e<b.length;e++){var f=b[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(f,b,e){b&&c(f.prototype,
b);e&&c(f,e);return f}}(),h=a("../../const");a=function(){function c(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.x=Number(f);this.y=Number(b);this.width=Number(e);this.height=Number(a);this.type=h.SHAPES.RECT}c.prototype.clone=
function(){return new c(this.x,this.y,this.width,this.height)};c.prototype.copy=function(c){this.x=c.x;this.y=c.y;this.width=c.width;this.height=c.height;return this};c.prototype.contains=function(c,b){return 0>=this.width||0>=this.height?!1:c>=this.x&&c<this.x+this.width&&b>=this.y&&b<this.y+this.height?!0:!1};c.prototype.pad=function(c,b){c=c||0;b=b||(0!==b?c:0);this.x-=c;this.y-=b;this.width+=2*c;this.height+=2*b};c.prototype.fit=function(c){this.x<c.x&&(this.width+=this.x,0>this.width&&(this.width=
0),this.x=c.x);this.y<c.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=c.y);this.x+this.width>c.x+c.width&&(this.width=c.width-this.x,0>this.width&&(this.width=0));this.y+this.height>c.y+c.height&&(this.height=c.height-this.y,0>this.height&&(this.height=0))};c.prototype.enlarge=function(c){var b=Math.min(this.x,c.x),e=Math.max(this.x+this.width,c.x+c.width),f=Math.min(this.y,c.y);c=Math.max(this.y+this.height,c.y+c.height);this.x=b;this.width=e-b;this.y=f;this.height=c-f};k(c,[{key:"left",
get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new c(0,0,0,0)}}]);return c}();d.default=a},{"../../const":46}],75:[function(a,g,d){d.__esModule=!0;var k=a("../../const");a=function(){function a(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=c;this.y=f;this.width=b;this.height=e;this.radius=l;this.type=k.SHAPES.RREC}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)};a.prototype.contains=function(c,f){if(0>=this.width||0>=this.height)return!1;if(c>=this.x&&
c<=this.x+this.width&&f>=this.y&&f<=this.y+this.height){if(f>=this.y+this.radius&&f<=this.y+this.height-this.radius||c>=this.x+this.radius&&c<=this.x+this.width-this.radius)return!0;var b=c-(this.x+this.radius),e=f-(this.y+this.radius),a=this.radius*this.radius;if(b*b+e*e<=a)return!0;b=c-(this.x+this.width-this.radius);if(b*b+e*e<=a)return!0;e=f-(this.y+this.height-this.radius);if(b*b+e*e<=a)return!0;b=c-(this.x+this.radius);if(b*b+e*e<=a)return!0}return!1};return a}();d.default=a},{"../../const":46}],
76:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var e=0;e<c.length;e++){var f=c[e];f.enumerable=f.enumerable||
!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,e,f){e&&b(c.prototype,e);f&&b(c,f);return c}}(),f=a("../utils"),b=a("../math"),e=a("../const");g=a("../settings");var l=k(g);g=a("../display/Container");var m=k(g);g=a("../textures/RenderTexture");var q=k(g);a=a("eventemitter3");a=k(a);var x=new b.Matrix;a=function(a){function d(c,h,k,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var q=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
q=!q||"object"!==typeof q&&"function"!==typeof q?this:q;(0,f.sayHello)(c);"number"===typeof h&&(h=Object.assign({width:h,height:k||l.default.RENDER_OPTIONS.height},g));h=Object.assign({},l.default.RENDER_OPTIONS,h);q.options=h;q.type=e.RENDERER_TYPE.UNKNOWN;q.screen=new b.Rectangle(0,0,h.width,h.height);q.view=h.view||document.createElement("canvas");q.resolution=h.resolution||l.default.RESOLUTION;q.transparent=h.transparent;q.autoResize=h.autoResize||!1;q.blendModes=null;q.preserveDrawingBuffer=
h.preserveDrawingBuffer;q.clearBeforeRender=h.clearBeforeRender;q.roundPixels=h.roundPixels;q._backgroundColor=0;q._backgroundColorRgba=[0,0,0,0];q._backgroundColorString="#000000";q.backgroundColor=h.backgroundColor||q._backgroundColor;q._tempDisplayObjectParent=new m.default;q._lastObjectRendered=q._tempDisplayObjectParent;return q}h(d,a);d.prototype.resize=function(b,c){this.screen.width=b;this.screen.height=c;this.view.width=b*this.resolution;this.view.height=c*this.resolution;this.autoResize&&
(this.view.style.width=b+"px",this.view.style.height=c+"px")};d.prototype.generateTexture=function(b,c,e,f){f=f||b.getLocalBounds();c=q.default.create(f.width|0,f.height|0,c,e);x.tx=-f.x;x.ty=-f.y;this.render(b,c,!1,x,!0);return c};d.prototype.destroy=function(b){b&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=e.RENDERER_TYPE.UNKNOWN;this.screen=this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.options=this.blendModes=null;this.roundPixels=this.clearBeforeRender=
this.preserveDrawingBuffer=!1;this._backgroundColor=0;this._lastObjectRendered=this._tempDisplayObjectParent=this._backgroundColorString=this._backgroundColorRgba=null};c(d,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(b){this._backgroundColor=b;this._backgroundColorString=(0,f.hex2string)(b);(0,f.hex2rgb)(b,this._backgroundColorRgba)}}]);return d}(a.default);
d.default=a},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,
c):b.__proto__=c)}d.__esModule=!0;g=a("../SystemRenderer");g=k(g);var c=a("./utils/CanvasMaskManager"),f=k(c);c=a("./utils/CanvasRenderTarget");var b=k(c);c=a("./utils/mapCanvasBlendModesToPixi");var e=k(c);c=a("../../utils");var l=a("../../const");a=a("../../settings");var m=k(a);a=function(c){function a(b,m,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");b=c.call(this,"Canvas",b,m,h);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.type=l.RENDERER_TYPE.CANVAS;b.rootContext=b.view.getContext("2d",{alpha:b.transparent});b.context=b.rootContext;b.refresh=!0;b.maskManager=new f.default(b);b.smoothProperty="imageSmoothingEnabled";b.rootContext.imageSmoothingEnabled||(b.rootContext.webkitImageSmoothingEnabled?b.smoothProperty="webkitImageSmoothingEnabled":b.rootContext.mozImageSmoothingEnabled?b.smoothProperty="mozImageSmoothingEnabled":b.rootContext.oImageSmoothingEnabled?
b.smoothProperty="oImageSmoothingEnabled":b.rootContext.msImageSmoothingEnabled&&(b.smoothProperty="msImageSmoothingEnabled"));b.initPlugins();b.blendModes=(0,e.default)();b._activeBlendMode=null;b.renderingToScreen=!1;b.resize(b.options.width,b.options.height);return b}h(a,c);a.prototype.render=function(c,e,f,a,m){if(this.view){this.renderingToScreen=!e;this.emit("prerender");var h=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new b.default(e.width,e.height,
e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var d=this.context;e||(this._lastObjectRendered=c);m||(e=c.parent,m=this._tempDisplayObjectParent.transform.worldTransform,a?(a.copy(m),this._tempDisplayObjectParent.transform._worldID=-1):m.identity(),c.parent=this._tempDisplayObjectParent,c.updateTransform(),c.parent=e);d.save();d.setTransform(1,0,0,1,0,0);d.globalAlpha=
1;this._activeBlendMode=l.BLEND_MODES.NORMAL;d.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL];navigator.isCocoonJS&&this.view.screencanvas&&(d.fillStyle="black",d.clear());(void 0!==f?f:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?d.clearRect(0,0,this.width,this.height):(d.fillStyle=this._backgroundColorString,d.fillRect(0,0,this.width,this.height)));f=this.context;this.context=d;c.renderCanvas(this);this.context=f;d.restore();this.resolution=h;this.emit("postrender")}};
a.prototype.clear=function(b){var c=this.context;b=b||this._backgroundColorString;!this.transparent&&b?(c.fillStyle=b,c.fillRect(0,0,this.width,this.height)):c.clearRect(0,0,this.width,this.height)};a.prototype.setBlendMode=function(b){this._activeBlendMode!==b&&(this._activeBlendMode=b,this.context.globalCompositeOperation=this.blendModes[b])};a.prototype.destroy=function(b){this.destroyPlugins();c.prototype.destroy.call(this,b);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=
this.maskManager=null};a.prototype.resize=function(b,e){c.prototype.resize.call(this,b,e);this.smoothProperty&&(this.rootContext[this.smoothProperty]=m.default.SCALE_MODE===l.SCALE_MODES.LINEAR)};a.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)};return a}(g.default);d.default=a;c.pluginTarget.mixin(a)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,
"./utils/mapCanvasBlendModesToPixi":81}],78:[function(a,g,d){d.__esModule=!0;var k=a("../../../const");a=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=c}a.prototype.pushMask=function(c){var f=this.renderer;f.context.save();var b=c.alpha,e=c.transform.worldTransform,a=f.resolution;f.context.setTransform(e.a*a,e.b*a,e.c*a,e.d*a,e.tx*a,e.ty*a);c._texture||(this.renderGraphicsShape(c),f.context.clip());c.worldAlpha=b};a.prototype.renderGraphicsShape=
function(c){var f=this.renderer.context,b=c.graphicsData.length;if(0!==b){f.beginPath();for(var e=0;e<b;e++){var a=c.graphicsData[e],m=a.shape;if(a.type===k.SHAPES.POLY){a=m.points;f.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)f.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&f.closePath()}else if(a.type===k.SHAPES.RECT)f.rect(m.x,m.y,m.width,m.height),f.closePath();else if(a.type===k.SHAPES.CIRC)f.arc(m.x,m.y,m.radius,0,2*Math.PI),f.closePath();else if(a.type===k.SHAPES.ELIP){var d=
2*m.width;h=2*m.height;a=m.x-d/2;m=m.y-h/2;var g=d/2*.5522848,u=h/2*.5522848,v=a+d,w=m+h;d=a+d/2;h=m+h/2;f.moveTo(a,h);f.bezierCurveTo(a,h-u,d-g,m,d,m);f.bezierCurveTo(d+g,m,v,h-u,v,h);f.bezierCurveTo(v,h+u,d+g,w,d,w);f.bezierCurveTo(d-g,w,a,h+u,a,h);f.closePath()}else a.type===k.SHAPES.RREC&&(a=m.x,h=m.y,g=m.width,u=m.height,m=m.radius,v=Math.min(g,u)/2|0,m=m>v?v:m,f.moveTo(a,h+m),f.lineTo(a,h+u-m),f.quadraticCurveTo(a,h+u,a+m,h+u),f.lineTo(a+g-m,h+u),f.quadraticCurveTo(a+g,h+u,a+g,h+u-m),f.lineTo(a+
g,h+m),f.quadraticCurveTo(a+g,h,a+g-m,h),f.lineTo(a+m,h),f.quadraticCurveTo(a,h,a,h+m),f.closePath())}}};a.prototype.popMask=function(c){c.context.restore();c.invalidateBlendMode()};a.prototype.destroy=function(){};return a}();d.default=a},{"../../../const":46}],79:[function(a,g,d){d.__esModule=!0;var k=function(){function c(c,b){for(var e=0;e<b.length;e++){var a=b[e];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(c,a.key,a)}}return function(a,b,
e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),h=(a=a("../../../settings"))&&a.__esModule?a:{default:a};a=function(){function c(a,b,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=e||h.default.RESOLUTION;this.resize(a,b)}c.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};c.prototype.resize=
function(c,b){this.canvas.width=c*this.resolution;this.canvas.height=b*this.resolution};c.prototype.destroy=function(){this.canvas=this.context=null};k(c,[{key:"width",get:function(){return this.canvas.width},set:function(c){this.canvas.width=c}},{key:"height",get:function(){return this.canvas.height},set:function(c){this.canvas.height=c}}]);return c}();d.default=a},{"../../../settings":101}],80:[function(a,g,d){function k(a){var c=document.createElement("canvas");c.width=6;c.height=1;var f=c.getContext("2d");
f.fillStyle=a;f.fillRect(0,0,6,1);return c}d.__esModule=!0;d.default=function(){if("undefined"===typeof document)return!1;var a=k("#ff00ff"),c=k("#ffff00"),f=document.createElement("canvas");f.width=6;f.height=1;f=f.getContext("2d");f.globalCompositeOperation="multiply";f.drawImage(a,0,0);f.drawImage(c,2,0);a=f.getImageData(2,0,1,1);if(!a)return!1;a=a.data;return 255===a[0]&&0===a[1]&&0===a[2]}},{}],81:[function(a,g,d){d.__esModule=!0;d.default=function(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:[];(0,h.default)()?(c[k.BLEND_MODES.NORMAL]="source-over",c[k.BLEND_MODES.ADD]="lighter",c[k.BLEND_MODES.MULTIPLY]="multiply",c[k.BLEND_MODES.SCREEN]="screen",c[k.BLEND_MODES.OVERLAY]="overlay",c[k.BLEND_MODES.DARKEN]="darken",c[k.BLEND_MODES.LIGHTEN]="lighten",c[k.BLEND_MODES.COLOR_DODGE]="color-dodge",c[k.BLEND_MODES.COLOR_BURN]="color-burn",c[k.BLEND_MODES.HARD_LIGHT]="hard-light",c[k.BLEND_MODES.SOFT_LIGHT]="soft-light",c[k.BLEND_MODES.DIFFERENCE]="difference",c[k.BLEND_MODES.EXCLUSION]=
"exclusion",c[k.BLEND_MODES.HUE]="hue",c[k.BLEND_MODES.SATURATION]="saturate",c[k.BLEND_MODES.COLOR]="color",c[k.BLEND_MODES.LUMINOSITY]="luminosity"):(c[k.BLEND_MODES.NORMAL]="source-over",c[k.BLEND_MODES.ADD]="lighter",c[k.BLEND_MODES.MULTIPLY]="source-over",c[k.BLEND_MODES.SCREEN]="source-over",c[k.BLEND_MODES.OVERLAY]="source-over",c[k.BLEND_MODES.DARKEN]="source-over",c[k.BLEND_MODES.LIGHTEN]="source-over",c[k.BLEND_MODES.COLOR_DODGE]="source-over",c[k.BLEND_MODES.COLOR_BURN]="source-over",c[k.BLEND_MODES.HARD_LIGHT]=
"source-over",c[k.BLEND_MODES.SOFT_LIGHT]="source-over",c[k.BLEND_MODES.DIFFERENCE]="source-over",c[k.BLEND_MODES.EXCLUSION]="source-over",c[k.BLEND_MODES.HUE]="source-over",c[k.BLEND_MODES.SATURATION]="source-over",c[k.BLEND_MODES.COLOR]="source-over",c[k.BLEND_MODES.LUMINOSITY]="source-over");c[k.BLEND_MODES.NORMAL_NPM]=c[k.BLEND_MODES.NORMAL];c[k.BLEND_MODES.ADD_NPM]=c[k.BLEND_MODES.ADD];c[k.BLEND_MODES.SCREEN_NPM]=c[k.BLEND_MODES.SCREEN];return c};var k=a("../../../const"),h=(a=a("./canUseNewCanvasBlendModes"))&&
a.__esModule?a:{default:a}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(a,g,d){d.__esModule=!0;var k=a("../../const"),h=(a=a("../../settings"))&&a.__esModule?a:{default:a};a=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.renderer=a;this.checkCount=this.count=0;this.maxIdle=h.default.GC_MAX_IDLE;this.checkCountMax=h.default.GC_MAX_CHECK_COUNT;this.mode=h.default.GC_MODE}c.prototype.update=function(){this.count++;
this.mode!==k.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))};c.prototype.run=function(){for(var c=this.renderer.textureManager,b=c._managedTextures,e=!1,a=0;a<b.length;a++){var h=b[a];!h._glRenderTargets&&this.count-h.touched>this.maxIdle&&(c.destroyTexture(h,!0),b[a]=null,e=!0)}if(e){for(e=c=0;e<b.length;e++)null!==b[e]&&(b[c++]=b[e]);b.length=c}};c.prototype.unload=function(c){var b=this.renderer.textureManager;c._texture&&c._texture._glRenderTargets&&
b.destroyTexture(c._texture,!0);for(b=c.children.length-1;0<=b;b--)this.unload(c.children[b])};return c}();d.default=a},{"../../const":46,"../../settings":101}],83:[function(a,g,d){d.__esModule=!0;var k=a("pixi-gl-core"),h=a("../../const"),c=(g=a("./utils/RenderTarget"))&&g.__esModule?g:{default:g},f=a("../../utils");a=function(){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=c;this.gl=c.gl;this._managedTextures=[]}b.prototype.bindTexture=
function(){};b.prototype.getTexture=function(){};b.prototype.updateTexture=function(b,a){var e=this.gl,f=!!b._glRenderTargets;if(!b.hasLoaded)return null;var l=this.renderer.boundTextures;if(void 0===a)for(var d=a=0;d<l.length;++d)if(l[d]===b){a=d;break}l[a]=b;e.activeTexture(e.TEXTURE0+a);(e=b._glTextures[this.renderer.CONTEXT_UID])?f?b._glRenderTargets[this.renderer.CONTEXT_UID].resize(b.width,b.height):e.upload(b.source):(f?(a=new c.default(this.gl,b.width,b.height,b.scaleMode,b.resolution),a.resize(b.width,
b.height),b._glRenderTargets[this.renderer.CONTEXT_UID]=a,e=a.texture):(e=new k.GLTexture(this.gl,null,null,null,null),e.bind(a),e.premultiplyAlpha=!0,e.upload(b.source)),b._glTextures[this.renderer.CONTEXT_UID]=e,b.on("update",this.updateTexture,this),b.on("dispose",this.destroyTexture,this),this._managedTextures.push(b),b.isPowerOfTwo?(b.mipmap&&e.enableMipmap(),b.wrapMode===h.WRAP_MODES.CLAMP?e.enableWrapClamp():b.wrapMode===h.WRAP_MODES.REPEAT?e.enableWrapRepeat():e.enableWrapMirrorRepeat()):
e.enableWrapClamp(),b.scaleMode===h.SCALE_MODES.NEAREST?e.enableNearestScaling():e.enableLinearScaling());return e};b.prototype.destroyTexture=function(b,c){b=b.baseTexture||b;if(b.hasLoaded){var e=this.renderer.CONTEXT_UID,a=b._glTextures,l=b._glRenderTargets;a[e]&&(this.renderer.unbindTexture(b),a[e].destroy(),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this),delete a[e],c||(b=this._managedTextures.indexOf(b),-1!==b&&(0,f.removeItems)(this._managedTextures,b,1)));
l&&l[e]&&(l[e].destroy(),delete l[e])}};b.prototype.removeAll=function(){for(var b=0;b<this._managedTextures.length;++b){var c=this._managedTextures[b];c._glTextures[this.renderer.CONTEXT_UID]&&delete c._glTextures[this.renderer.CONTEXT_UID]}};b.prototype.destroy=function(){for(var b=0;b<this._managedTextures.length;++b){var c=this._managedTextures[b];this.destroyTexture(c,!0);c.off("update",this.updateTexture,this);c.off("dispose",this.destroyTexture,this)}this._managedTextures=null};return b}();
d.default=a},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;g=a("../SystemRenderer");
var c=k(g);g=a("./managers/MaskManager");var f=k(g);g=a("./managers/StencilManager");var b=k(g);g=a("./managers/FilterManager");var e=k(g);g=a("./utils/RenderTarget");var l=k(g);g=a("./utils/ObjectRenderer");var m=k(g);g=a("./TextureManager");var q=k(g);g=a("../../textures/BaseTexture");var x=k(g);g=a("./TextureGarbageCollector");var r=k(g);g=a("./WebGLState");var u=k(g);g=a("./utils/mapWebGLDrawModesToPixi");var v=k(g);g=a("./utils/validateContext");var w=k(g);g=a("../../utils");var t=a("pixi-gl-core"),
A=k(t),y=a("../../const"),z=0;a=function(a){function d(c,e,l){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c=a.call(this,"WebGL",c,e,l);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.legacy=c.options.legacy;c.legacy&&(A.default.VertexArrayObject.FORCE_NATIVE=!0);c.type=y.RENDERER_TYPE.WEBGL;c.handleContextLost=c.handleContextLost.bind(c);c.handleContextRestored=
c.handleContextRestored.bind(c);c.view.addEventListener("webglcontextlost",c.handleContextLost,!1);c.view.addEventListener("webglcontextrestored",c.handleContextRestored,!1);c._contextOptions={alpha:c.transparent,antialias:c.options.antialias,premultipliedAlpha:c.transparent&&"notMultiplied"!==c.transparent,stencil:!0,preserveDrawingBuffer:c.options.preserveDrawingBuffer,powerPreference:c.options.powerPreference};c._backgroundColorRgba[3]=c.transparent?0:1;c.maskManager=new f.default(c);c.stencilManager=
new b.default(c);c.emptyRenderer=new m.default(c);c.currentRenderer=c.emptyRenderer;c.textureManager=null;c.filterManager=null;c.initPlugins();c.options.context&&(0,w.default)(c.options.context);c.gl=c.options.context||A.default.createContext(c.view,c._contextOptions);c.CONTEXT_UID=z++;c.state=new u.default(c.gl);c.renderingToScreen=!0;c.boundTextures=null;c._activeShader=null;c._activeVao=null;c._activeRenderTarget=null;c._initContext();c.drawModes=(0,v.default)(c.gl);c._nextTextureLocation=0;c.setBlendMode(0);
return c}h(d,a);d.prototype._initContext=function(){var b=this.gl;b.isContextLost()&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").restoreContext();var c=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);this._activeVao=this._activeShader=null;this.boundTextures=Array(c);this.emptyTextures=Array(c);this.textureManager=new q.default(this);this.filterManager=new e.default(this);this.textureGC=new r.default(this);this.state.resetToDefault();this.rootRenderTarget=new l.default(b,
this.width,this.height,null,this.resolution,!0);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);var a=new A.default.GLTexture.fromData(b,null,1,1),f={_glTextures:{}};f._glTextures[this.CONTEXT_UID]={};for(var h=0;h<c;h++){var m=new x.default;m._glTextures[this.CONTEXT_UID]=a;this.boundTextures[h]=f;this.emptyTextures[h]=m;this.bindTexture(null,h)}this.emit("context",b);this.resize(this.screen.width,this.screen.height)};d.prototype.render=function(b,
c,e,a,f){this.renderingToScreen=!c;this.emit("prerender");this.gl&&!this.gl.isContextLost()&&(this._nextTextureLocation=0,c||(this._lastObjectRendered=b),f||(f=b.parent,b.parent=this._tempDisplayObjectParent,b.updateTransform(),b.parent=f),this.bindRenderTexture(c,a),this.currentRenderer.start(),(void 0!==e?e:this.clearBeforeRender)&&this._activeRenderTarget.clear(),b.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender"))};d.prototype.setObjectRenderer=function(b){this.currentRenderer!==
b&&(this.currentRenderer.stop(),this.currentRenderer=b,this.currentRenderer.start())};d.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};d.prototype.resize=function(b,e){c.default.prototype.resize.call(this,b,e);this.rootRenderTarget.resize(b,e);this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))};d.prototype.setBlendMode=function(b){this.state.setBlendMode(b)};
d.prototype.clear=function(b){this._activeRenderTarget.clear(b)};d.prototype.setTransform=function(b){this._activeRenderTarget.transform=b};d.prototype.clearRenderTexture=function(b,c){(b=b.baseTexture._glRenderTargets[this.CONTEXT_UID])&&b.clear(c);return this};d.prototype.bindRenderTexture=function(b,c){if(b){var e=b.baseTexture;e._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(e,0);this.unbindTexture(e);e=e._glRenderTargets[this.CONTEXT_UID];e.setFrame(b.frame)}else e=this.rootRenderTarget;
e.transform=c;this.bindRenderTarget(e);return this};d.prototype.bindRenderTarget=function(b){b!==this._activeRenderTarget&&(this._activeRenderTarget=b,b.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=b.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(b.stencilMaskStack));return this};d.prototype.bindShader=function(b,c){this._activeShader!==b&&(this._activeShader=b,b.bind(),!1!==c&&(b.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)));
return this};d.prototype.bindTexture=function(b,c,e){b=b||this.emptyTextures[c];b=b.baseTexture||b;b.touched=this.textureGC.count;if(e)c=c||0;else{for(e=0;e<this.boundTextures.length;e++)if(this.boundTextures[e]===b)return e;void 0===c&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,c=this.boundTextures.length-this._nextTextureLocation-1)}e=this.gl;var a=b._glTextures[this.CONTEXT_UID];a?(this.boundTextures[c]=b,e.activeTexture(e.TEXTURE0+c),e.bindTexture(e.TEXTURE_2D,
a.texture)):this.textureManager.updateTexture(b,c);return c};d.prototype.unbindTexture=function(b){var c=this.gl;b=b.baseTexture||b;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]===b&&(this.boundTextures[e]=this.emptyTextures[e],c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[e]._glTextures[this.CONTEXT_UID].texture));return this};d.prototype.createVao=function(){return new A.default.VertexArrayObject(this.gl,this.state.attribState)};d.prototype.bindVao=
function(b){if(this._activeVao===b)return this;b?b.bind():this._activeVao&&this._activeVao.unbind();this._activeVao=b;return this};d.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this.bindVao(null);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;for(var b=0;b<this.boundTextures.length;b++)this.boundTextures[b]=this.emptyTextures[b];this.rootRenderTarget.activate();this.state.resetToDefault();return this};d.prototype.handleContextLost=function(b){b.preventDefault()};
d.prototype.handleContextRestored=function(){this.textureManager.removeAll();this.filterManager.destroy(!0);this._initContext()};d.prototype.destroy=function(b){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();a.prototype.destroy.call(this,b);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this._contextOptions=
this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.textureManager=this.filterManager=this.maskManager=null;this.gl.useProgram(null);this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext();this.gl=null};return d}(c.default);d.default=a;g.pluginTarget.mixin(a)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,
"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(a,g,d){d.__esModule=!0;var k=(a=a("./utils/mapWebGLBlendModesToPixi"))&&a.__esModule?a:{default:a};a=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=
1;this.stackIndex=0;this.stack=[];this.gl=c;this.maxAttribs=c.getParameter(c.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)};this.blendModes=(0,k.default)(c);this.nativeVaoExtension=c.getExtension("OES_vertex_array_object")||c.getExtension("MOZ_OES_vertex_array_object")||c.getExtension("WEBKIT_OES_vertex_array_object")}a.prototype.push=function(){var c=this.stack[this.stackIndex];c||(c=this.stack[this.stackIndex]=new Uint8Array(16));
++this.stackIndex;for(var a=0;a<this.activeState.length;a++)c[a]=this.activeState[a]};a.prototype.pop=function(){var c=this.stack[--this.stackIndex];this.setState(c)};a.prototype.setState=function(c){this.setBlend(c[0]);this.setDepthTest(c[1]);this.setFrontFace(c[2]);this.setCullFace(c[3]);this.setBlendMode(c[4])};a.prototype.setBlend=function(c){c=c?1:0;this.activeState[0]!==c&&(this.activeState[0]=c,this.gl[c?"enable":"disable"](this.gl.BLEND))};a.prototype.setBlendMode=function(c){c!==this.activeState[4]&&
(this.activeState[4]=c,c=this.blendModes[c],2===c.length?this.gl.blendFunc(c[0],c[1]):this.gl.blendFuncSeparate(c[0],c[1],c[2],c[3]))};a.prototype.setDepthTest=function(c){c=c?1:0;this.activeState[1]!==c&&(this.activeState[1]=c,this.gl[c?"enable":"disable"](this.gl.DEPTH_TEST))};a.prototype.setCullFace=function(c){c=c?1:0;this.activeState[3]!==c&&(this.activeState[3]=c,this.gl[c?"enable":"disable"](this.gl.CULL_FACE))};a.prototype.setFrontFace=function(c){c=c?1:0;this.activeState[2]!==c&&(this.activeState[2]=
c,this.gl.frontFace(this.gl[c?"CW":"CCW"]))};a.prototype.resetAttributes=function(){for(var c=0;c<this.attribState.tempAttribState.length;c++)this.attribState.tempAttribState[c]=0;for(c=0;c<this.attribState.attribState.length;c++)this.attribState.attribState[c]=0;for(c=1;c<this.maxAttribs;c++)this.gl.disableVertexAttribArray(c)};a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null);this.resetAttributes();for(var c=0;c<this.activeState.length;++c)this.activeState[c]=
32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1);this.setState(this.defaultState)};return a}();d.default=a},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(a,g,d){d.__esModule=!0;var k=function(){function b(b,c){for(var e=0;e<c.length;e++){var a=c[e];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(c,e,a){e&&b(c.prototype,e);a&&b(c,a);return c}}(),h=(g=a("./extractUniformsFromSrc"))&&g.__esModule?g:{default:g},
c=a("../../../utils"),f=a("../../../const"),b=(a=a("../../../settings"))&&a.__esModule?a:{default:a},e={};a=function(){function a(l,d,k){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.vertexSrc=l||a.defaultVertexSrc;this.fragmentSrc=d||a.defaultFragmentSrc;this._blendMode=f.BLEND_MODES.NORMAL;this.uniformData=k||(0,h.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var m in this.uniformData)this.uniforms[m]=this.uniformData[m].value,
this.uniformData[m].type&&(this.uniformData[m].type=this.uniformData[m].type.toLowerCase());this.glShaders={};e[this.vertexSrc+this.fragmentSrc]||(e[this.vertexSrc+this.fragmentSrc]=(0,c.uid)());this.glShaderKey=e[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=b.default.RESOLUTION;this.autoFit=this.enabled=!0}a.prototype.apply=function(b,c,e,a,f){b.applyFilter(this,c,e,a)};k(a,[{key:"blendMode",get:function(){return this._blendMode},set:function(b){this._blendMode=b}}],[{key:"defaultVertexSrc",
get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]);
return a}();d.default=a},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(a,g,d){function k(c){var a=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,b={};c=c.replace(/\s+/g," ").split(/\s*;\s*/);for(var e=0;e<c.length;e++){var l=c[e].trim();if(-1<l.indexOf("uniform")){var m=l.split(" ");l=m[1];var d=m[2],k=1;-1<d.indexOf("[")&&(m=d.split(/\[|]/),d=m[0],k*=Number(m[1]));d.match(a)||(b[d]={value:h(l,k),name:d,type:l})}}return b}d.__esModule=
!0;d.default=function(c,a,b){c=k(c,b);a=k(a,b);return Object.assign(c,a)};a=a("pixi-gl-core");var h=(a&&a.__esModule?a:{default:a}).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(a,g,d){d.__esModule=!0;d.calculateScreenSpaceMatrix=function(a,c,f){a=a.identity();a.translate(c.x/f.width,c.y/f.height);a.scale(f.width,f.height);return a};d.calculateNormalizedScreenSpaceMatrix=function(a,c,f){a=a.identity();a.translate(c.x/f.width,c.y/f.height);a.scale(f.width/c.width,f.height/c.height);
return a};d.calculateSpriteMatrix=function(a,c,f,b){var e=b._texture.orig;a=a.set(f.width,0,0,f.height,c.x,c.y);c=b.worldTransform.copy(k.Matrix.TEMP_MATRIX);c.invert();a.prepend(c);a.scale(1/e.width,1/e.height);a.translate(b.anchor.x,b.anchor.y);return a};var k=a("../../../math")},{"../../../math":70}],89:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,
{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;g=(g=a("../Filter"))&&g.__esModule?g:{default:g};var h=a("../../../../math");a("path");var c=(a=a("../../../../textures/TextureMatrix"))&&a.__esModule?a:{default:a};a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e=new h.Matrix;var f=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;c.renderable=!1;f.maskSprite=c;f.maskMatrix=e;return f}k(b,a);b.prototype.apply=function(b,a,f){var e=this.maskSprite,l=this.maskSprite.texture;l.valid&&(l.transform||(l.transform=new c.default(l,0)),l.transform.update(),this.uniforms.mask=l,this.uniforms.otherMatrix=b.calculateSpriteMatrix(this.maskMatrix,e).prepend(l.transform.mapCoord),this.uniforms.alpha=
e.worldAlpha,this.uniforms.maskClamp=l.transform.uClampFrame,b.applyFilter(this,a,f))};return b}(g.default);d.default=a},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:23}],90:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,
configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}function c(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function");}d.__esModule=!0;g=a("./WebGLManager");g=k(g);var f=a("../utils/RenderTarget"),b=k(f);f=a("../utils/Quad");var e=k(f),l=a("../../../math");f=a("../../../Shader");var m=k(f),q=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(c[e]=b[e]);c.default=b;return c}(a("../filters/filterTransforms"));
a=a("bit-twiddle");var x=k(a),r=function v(){c(this,v);this.renderTarget=null;this.sourceFrame=new l.Rectangle;this.destinationFrame=new l.Rectangle;this.filters=[];this.target=null;this.resolution=1};a=function(a){function f(b){c(this,f);var l=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l.gl=l.renderer.gl;l.quad=new e.default(l.gl,b.state.attribState);l.shaderCache={};l.pool=
{};l.filterData=null;l.managedFilters=[];return l}h(f,a);f.prototype.pushFilter=function(b,c){var e=this.renderer,a=this.filterData;if(!a){var f=new r;f.sourceFrame=f.destinationFrame=this.renderer._activeRenderTarget.size;f.renderTarget=e._activeRenderTarget;this.filterData=this.renderer._activeRenderTarget.filterData=a={index:0,stack:[f]}}(f=a.stack[++a.index])||(f=a.stack[a.index]=new r);var l=c[0].resolution,h=c[0].padding|0,m=b.filterArea||b.getBounds(!0),d=f.sourceFrame,k=f.destinationFrame;
d.x=(m.x*l|0)/l;d.y=(m.y*l|0)/l;d.width=(m.width*l|0)/l;d.height=(m.height*l|0)/l;a.stack[0].renderTarget.transform||c[0].autoFit&&d.fit(a.stack[0].destinationFrame);d.pad(h);k.width=d.width;k.height=d.height;a=this.getPotRenderTarget(e.gl,d.width,d.height,l);f.target=b;f.filters=c;f.resolution=l;f.renderTarget=a;a.setFrame(k,d);e.bindRenderTarget(a);a.clear()};f.prototype.popFilter=function(){var b=this.filterData,c=b.stack[b.index-1],e=b.stack[b.index];this.quad.map(e.renderTarget.size,e.sourceFrame).upload();
var a=e.filters;if(1===a.length)a[0].apply(this,e.renderTarget,c.renderTarget,!1,e),this.freePotRenderTarget(e.renderTarget);else{var f=e.renderTarget,l=this.getPotRenderTarget(this.renderer.gl,e.sourceFrame.width,e.sourceFrame.height,e.resolution);l.setFrame(e.destinationFrame,e.sourceFrame);l.clear();var h;for(h=0;h<a.length-1;++h){a[h].apply(this,f,l,!0,e);var d=f;f=l;l=d}a[h].apply(this,f,c.renderTarget,!1,e);this.freePotRenderTarget(f);this.freePotRenderTarget(l)}b.index--;0===b.index&&(this.filterData=
null)};f.prototype.applyFilter=function(b,c,e,a){var f=this.renderer,l=f.gl,h=b.glShaders[f.CONTEXT_UID];h||(b.glShaderKey?(h=this.shaderCache[b.glShaderKey],h||(h=new m.default(this.gl,b.vertexSrc,b.fragmentSrc),b.glShaders[f.CONTEXT_UID]=this.shaderCache[b.glShaderKey]=h,this.managedFilters.push(b))):(h=b.glShaders[f.CONTEXT_UID]=new m.default(this.gl,b.vertexSrc,b.fragmentSrc),this.managedFilters.push(b)),f.bindVao(null),this.quad.initVao(h));f.bindVao(this.quad.vao);f.bindRenderTarget(e);a&&(l.disable(l.SCISSOR_TEST),
f.clear(),l.enable(l.SCISSOR_TEST));e===f.maskManager.scissorRenderTarget&&f.maskManager.pushScissorMask(null,f.maskManager.scissorData);f.bindShader(h);e=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=e;this.syncUniforms(h,b);f.state.setBlendMode(b.blendMode);l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,c.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);l.bindTexture(l.TEXTURE_2D,e._glTextures[this.renderer.CONTEXT_UID].texture)};f.prototype.syncUniforms=
function(b,c){var e=c.uniformData;c=c.uniforms;var a=1,f=void 0;if(b.uniforms.filterArea){f=this.filterData.stack[this.filterData.index];var l=b.uniforms.filterArea;l[0]=f.renderTarget.size.width;l[1]=f.renderTarget.size.height;l[2]=f.sourceFrame.x;l[3]=f.sourceFrame.y;b.uniforms.filterArea=l}b.uniforms.filterClamp&&(f=f||this.filterData.stack[this.filterData.index],l=b.uniforms.filterClamp,l[0]=0,l[1]=0,l[2]=(f.sourceFrame.width-1)/f.renderTarget.size.width,l[3]=(f.sourceFrame.height-1)/f.renderTarget.size.height,
b.uniforms.filterClamp=l);for(var h in e)f=e[h].type,"sampler2d"===f&&0!==c[h]?(c[h].baseTexture?b.uniforms[h]=this.renderer.bindTexture(c[h].baseTexture,a):(b.uniforms[h]=a,f=this.renderer.gl,this.renderer.boundTextures[a]=this.renderer.emptyTextures[a],f.activeTexture(f.TEXTURE0+a),c[h].texture.bind()),a++):"mat3"===f?b.uniforms[h]=void 0!==c[h].a?c[h].toArray(!0):c[h]:"vec2"===f?void 0!==c[h].x?(f=b.uniforms[h]||new Float32Array(2),f[0]=c[h].x,f[1]=c[h].y,b.uniforms[h]=f):b.uniforms[h]=c[h]:"float"===
f?b.uniforms.data[h].value!==e[h]&&(b.uniforms[h]=c[h]):b.uniforms[h]=c[h]};f.prototype.getRenderTarget=function(b,c){b=this.filterData.stack[this.filterData.index];c=this.getPotRenderTarget(this.renderer.gl,b.sourceFrame.width,b.sourceFrame.height,c||b.resolution);c.setFrame(b.destinationFrame,b.sourceFrame);return c};f.prototype.returnRenderTarget=function(b){this.freePotRenderTarget(b)};f.prototype.calculateScreenSpaceMatrix=function(b){var c=this.filterData.stack[this.filterData.index];return q.calculateScreenSpaceMatrix(b,
c.sourceFrame,c.renderTarget.size)};f.prototype.calculateNormalizedScreenSpaceMatrix=function(b){var c=this.filterData.stack[this.filterData.index];return q.calculateNormalizedScreenSpaceMatrix(b,c.sourceFrame,c.renderTarget.size,c.destinationFrame)};f.prototype.calculateSpriteMatrix=function(b,c){var e=this.filterData.stack[this.filterData.index];return q.calculateSpriteMatrix(b,e.sourceFrame,e.renderTarget.size,c)};f.prototype.destroy=function(){for(var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:!1,c=this.renderer,e=this.managedFilters,a=0;a<e.length;a++)b||e[a].glShaders[c.CONTEXT_UID].destroy(),delete e[a].glShaders[c.CONTEXT_UID];this.shaderCache={};b?this.pool={}:this.emptyPool()};f.prototype.getPotRenderTarget=function(c,e,a,f){e=x.default.nextPow2(e*f);a=x.default.nextPow2(a*f);var l=(e&65535)<<16|a&65535;this.pool[l]||(this.pool[l]=[]);l=this.pool[l].pop();if(!l){var h=this.renderer.boundTextures[0];c.activeTexture(c.TEXTURE0);l=new b.default(c,e,a,null,1);c.bindTexture(c.TEXTURE_2D,
h._glTextures[this.renderer.CONTEXT_UID].texture)}l.resolution=f;l.defaultFrame.width=l.size.width=e/f;l.defaultFrame.height=l.size.height=a/f;return l};f.prototype.emptyPool=function(){for(var b in this.pool){var c=this.pool[b];if(c)for(var e=0;e<c.length;e++)c[e].destroy(!0)}this.pool={}};f.prototype.freePotRenderTarget=function(b){this.pool[(b.size.width*b.resolution&65535)<<16|b.size.height*b.resolution&65535].push(b)};return f}(g.default);d.default=a},{"../../../Shader":44,"../../../math":70,
"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;g=(g=a("./WebGLManager"))&&g.__esModule?
g:{default:g};var h=(a=a("../filters/spriteMask/SpriteMaskFilter"))&&a.__esModule?a:{default:a};a=function(c){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");b=c.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.scissor=!1;b.scissorData=null;b.scissorRenderTarget=null;b.enableScissor=!0;b.alphaMaskPool=[];b.alphaMaskIndex=0;return b}k(a,
c);a.prototype.pushMask=function(b,c){if(c.texture)this.pushSpriteMask(b,c);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&c.isFastRect()){var e=c.worldTransform;e=Math.atan2(e.b,e.a);e=Math.round(180/Math.PI*e);e%90?this.pushStencilMask(c):this.pushScissorMask(b,c)}else this.pushStencilMask(c)};a.prototype.popMask=function(b,c){c.texture?this.popSpriteMask(b,c):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?
this.popScissorMask(b,c):this.popStencilMask(b,c)};a.prototype.pushSpriteMask=function(b,c){var e=this.alphaMaskPool[this.alphaMaskIndex];e||(e=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(c)]);e[0].resolution=this.renderer.resolution;e[0].maskSprite=c;b.filterArea=c.getBounds(!0);this.renderer.filterManager.pushFilter(b,e);this.alphaMaskIndex++};a.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--};a.prototype.pushStencilMask=function(b){this.renderer.currentRenderer.stop();
this.renderer.stencilManager.pushStencil(b)};a.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};a.prototype.pushScissorMask=function(b,c){c.renderable=!0;b=this.renderer._activeRenderTarget;var e=c.getBounds();e.fit(b.size);c.renderable=!1;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var a=this.renderer.resolution;this.renderer.gl.scissor(e.x*a,(b.root?b.size.height-e.y-e.height:e.y)*a,e.width*a,e.height*a);this.scissorRenderTarget=
b;this.scissorData=c;this.scissor=!0};a.prototype.popScissorMask=function(){this.scissorData=this.scissorRenderTarget=null;this.scissor=!1;var b=this.renderer.gl;b.disable(b.SCISSOR_TEST)};return a}(g.default);d.default=a},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,
enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=(a=a("./WebGLManager"))&&a.__esModule?a:{default:a};a=function(c){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");b=c.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.stencilMaskStack=null;return b}k(a,
c);a.prototype.setMaskStack=function(b){this.stencilMaskStack=b;var c=this.renderer.gl;0===b.length?c.disable(c.STENCIL_TEST):c.enable(c.STENCIL_TEST)};a.prototype.pushStencil=function(b){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();var c=this.renderer.gl,a=this.stencilMaskStack.length;0===a&&c.enable(c.STENCIL_TEST);this.stencilMaskStack.push(b);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.EQUAL,a,this._getBitwiseMask());c.stencilOp(c.KEEP,
c.KEEP,c.INCR);this.renderer.plugins.graphics.render(b);this._useCurrent()};a.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var b=this.renderer.gl,c=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(b.disable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.clearStencil(0)):(b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.DECR),this.renderer.plugins.graphics.render(c),this._useCurrent())};a.prototype._useCurrent=function(){var b=this.renderer.gl;
b.colorMask(!0,!0,!0,!0);b.stencilFunc(b.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask());b.stencilOp(b.KEEP,b.KEEP,b.KEEP)};a.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1};a.prototype.destroy=function(){h.default.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};return a}(h.default);d.default=a},{"./WebGLManager":93}],93:[function(a,g,d){d.__esModule=!0;a=function(){function a(h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=h;this.renderer.on("context",this.onContextChange,this)}a.prototype.onContextChange=function(){};a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null};return a}();d.default=a},{}],94:[function(a,g,d){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}d.__esModule=!0;a=a("../managers/WebGLManager");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}k(c,a);c.prototype.start=function(){};c.prototype.stop=function(){this.flush()};c.prototype.flush=
function(){};c.prototype.render=function(c){};return c}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"../managers/WebGLManager":93}],95:[function(a,g,d){d.__esModule=!0;var k=(g=a("pixi-gl-core"))&&g.__esModule?g:{default:g},h=(a=a("../../../utils/createIndicesForQuads"))&&a.__esModule?a:{default:a};a=function(){function c(a,b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.gl=a;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,
0,1,0,1,1,0,1]);this.interleaved=new Float32Array(16);for(var e=0;4>e;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];this.indices=(0,h.default)(1);this.vertexBuffer=k.default.GLBuffer.createVertexBuffer(a,this.interleaved,a.STATIC_DRAW);this.indexBuffer=k.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);this.vao=new k.default.VertexArrayObject(a,b)}c.prototype.initVao=
function(c){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,c.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,c.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)};c.prototype.map=function(c,b){var a=0,f=0;this.uvs[0]=a;this.uvs[1]=f;this.uvs[2]=a+b.width/c.width;this.uvs[3]=f;this.uvs[4]=a+b.width/c.width;this.uvs[5]=f+b.height/c.height;this.uvs[6]=a;this.uvs[7]=f+b.height/c.height;a=b.x;f=b.y;this.vertices[0]=a;this.vertices[1]=f;this.vertices[2]=
a+b.width;this.vertices[3]=f;this.vertices[4]=a+b.width;this.vertices[5]=f+b.height;this.vertices[6]=a;this.vertices[7]=f+b.height;return this};c.prototype.upload=function(){for(var c=0;4>c;c++)this.interleaved[4*c]=this.vertices[2*c],this.interleaved[4*c+1]=this.vertices[2*c+1],this.interleaved[4*c+2]=this.uvs[2*c],this.interleaved[4*c+3]=this.uvs[2*c+1];this.vertexBuffer.upload(this.interleaved);return this};c.prototype.destroy=function(){var c=this.gl;c.deleteBuffer(this.vertexBuffer);c.deleteBuffer(this.indexBuffer)};
return c}();d.default=a},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":12}],96:[function(a,g,d){d.__esModule=!0;var k=a("../../../math"),h=a("../../../const"),c=(g=a("../../../settings"))&&g.__esModule?g:{default:g},f=a("pixi-gl-core");a=function(){function b(a,l,d,g,x,r){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.gl=a;this.texture=this.frameBuffer=null;this.clearColor=[0,0,0,0];this.size=new k.Rectangle(0,0,1,1);this.resolution=x||c.default.RESOLUTION;
this.projectionMatrix=new k.Matrix;this.frame=this.transform=null;this.defaultFrame=new k.Rectangle;this.stencilBuffer=this.sourceFrame=this.destinationFrame=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=void 0!==g?g:c.default.SCALE_MODE;(this.root=r)?(this.frameBuffer=new f.GLFramebuffer(a,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=f.GLFramebuffer.createRGBA(a,100,100),this.scaleMode===h.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),
this.texture=this.frameBuffer.texture);this.setFrame();this.resize(l,d)}b.prototype.clear=function(b){b=b||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])};b.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()};b.prototype.setFrame=function(b,c){this.destinationFrame=b||this.destinationFrame||this.defaultFrame;this.sourceFrame=c||this.sourceFrame||this.destinationFrame};b.prototype.activate=function(){var b=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,
this.sourceFrame);this.transform&&this.projectionMatrix.append(this.transform);this.destinationFrame!==this.sourceFrame?(b.enable(b.SCISSOR_TEST),b.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):b.disable(b.SCISSOR_TEST);b.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)};b.prototype.calculateProjection=
function(b,c){var a=this.projectionMatrix;c=c||b;a.identity();this.root?(a.a=1/b.width*2,a.d=-1/b.height*2,a.tx=-1-c.x*a.a,a.ty=1-c.y*a.d):(a.a=1/b.width*2,a.d=1/b.height*2,a.tx=-1-c.x*a.a,a.ty=-1-c.y*a.d)};b.prototype.resize=function(b,c){b|=0;c|=0;if(this.size.width!==b||this.size.height!==c)this.size.width=b,this.size.height=c,this.defaultFrame.width=b,this.defaultFrame.height=c,this.frameBuffer.resize(b*this.resolution,c*this.resolution),this.calculateProjection(this.frame||this.size)};b.prototype.destroy=
function(){this.frameBuffer.destroy();this.texture=this.frameBuffer=null};return b}();d.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(a,g,d){function k(c){for(var b="",a=0;a<c;++a)0<a&&(b+="\nelse "),a<c-1&&(b+="if(test == "+a+".0){}");return b}d.__esModule=!0;d.default=function(a,b){var e=!b;if(0===a)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");e&&(b=document.createElement("canvas"),b.width=1,b.height=1,
b=h.default.createContext(b));for(var f=b.createShader(b.FRAGMENT_SHADER);;){var d=c.replace(/%forloop%/gi,k(a));b.shaderSource(f,d);b.compileShader(f);if(b.getShaderParameter(f,b.COMPILE_STATUS))break;else a=a/2|0}e&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext();return a};var h=(a=a("pixi-gl-core"))&&a.__esModule?a:{default:a},c="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":12}],
98:[function(a,g,d){d.__esModule=!0;d.default=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];c[k.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA];c[k.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR];c[k.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.COLOR_DODGE]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.LUMINOSITY]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.NORMAL_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA];c[k.BLEND_MODES.ADD_NPM]=[a.SRC_ALPHA,a.DST_ALPHA,a.ONE,a.DST_ALPHA];c[k.BLEND_MODES.SCREEN_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_COLOR];return c};var k=a("../../../const")},{"../../../const":46}],99:[function(a,g,d){d.__esModule=!0;d.default=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c[k.DRAW_MODES.POINTS]=a.POINTS;c[k.DRAW_MODES.LINES]=
a.LINES;c[k.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP;c[k.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP;c[k.DRAW_MODES.TRIANGLES]=a.TRIANGLES;c[k.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP;c[k.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN;return c};var k=a("../../../const")},{"../../../const":46}],100:[function(a,g,d){d.__esModule=!0;d.default=function(a){a.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(a,g,d){d.__esModule=
!0;g=(g=a("./utils/maxRecommendedTextures"))&&g.__esModule?g:{default:g};a=(a=a("./utils/canUploadSameBuffer"))&&a.__esModule?a:{default:a};d.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,g.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},
TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,
configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),c=a("../math"),f=a("../utils"),b=a("../const"),e=(g=a("../textures/Texture"))&&g.__esModule?g:{default:g};a=(a=a("../display/Container"))&&a.__esModule?
a:{default:a};var l=new c.Point;a=function(a){function d(f){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var l=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l._anchor=new c.ObservablePoint(l._onAnchorUpdate,l);l._texture=null;l._width=0;l._height=0;l._tint=null;l._tintRGB=null;l.tint=16777215;l.blendMode=b.BLEND_MODES.NORMAL;l.shader=null;l.cachedTint=
16777215;l.texture=f||e.default.EMPTY;l.vertexData=new Float32Array(8);l.vertexTrimmedData=null;l._transformID=-1;l._textureID=-1;l._transformTrimmedID=-1;l._textureTrimmedID=-1;l.pluginName="sprite";return l}k(d,a);d.prototype._onTextureUpdate=function(){this._textureTrimmedID=this._textureID=-1;this.cachedTint=16777215;this._width&&(this.scale.x=(0,f.sign)(this.scale.x)*this._width/this._texture.orig.width);this._height&&(this.scale.y=(0,f.sign)(this.scale.y)*this._height/this._texture.orig.height)};
d.prototype._onAnchorUpdate=function(){this._transformTrimmedID=this._transformID=-1};d.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID;this._textureID=this._texture._updateID;var b=this._texture,c=this.transform.worldTransform,a=c.a,e=c.b,f=c.c,l=c.d,d=c.tx;c=c.ty;var h=this.vertexData,m=b.trim,k=b.orig,g=this._anchor;if(m){var q=m.x-g._x*k.width;b=q+m.width;g=m.y-g._y*k.height;
m=g+m.height}else q=-g._x*k.width,b=q+k.width,g=-g._y*k.height,m=g+k.height;h[0]=a*q+f*g+d;h[1]=l*g+e*q+c;h[2]=a*b+f*g+d;h[3]=l*g+e*b+c;h[4]=a*b+f*m+d;h[5]=l*m+e*b+c;h[6]=a*q+f*m+d;h[7]=l*m+e*q+c}};d.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=
this._texture._updateID;var b=this.vertexTrimmedData,c=this._texture.orig,a=this._anchor,e=this.transform.worldTransform,f=e.a,l=e.b,d=e.c,h=e.d,m=e.tx;e=e.ty;var k=-a._x*c.width,g=k+c.width;a=-a._y*c.height;c=a+c.height;b[0]=f*k+d*a+m;b[1]=h*a+l*k+e;b[2]=f*g+d*a+m;b[3]=h*a+l*g+e;b[4]=f*g+d*c+m;b[5]=h*c+l*g+e;b[6]=f*k+d*c+m;b[7]=h*c+l*k+e};d.prototype._renderWebGL=function(b){this.calculateVertices();b.setObjectRenderer(b.plugins[this.pluginName]);b.plugins[this.pluginName].render(this)};d.prototype._renderCanvas=
function(b){b.plugins[this.pluginName].render(this)};d.prototype._calculateBounds=function(){var b=this._texture.trim,c=this._texture.orig;!b||b.width===c.width&&b.height===c.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))};d.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*
-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),b||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)};d.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,l);var c=this._texture.orig.width;b=this._texture.orig.height;var a=-c*this.anchor.x;return l.x>=a&&l.x<a+c&&(c=-b*this.anchor.y,
l.y>=c&&l.y<c+b)?!0:!1};d.prototype.destroy=function(b){a.prototype.destroy.call(this,b);this._anchor=null;("boolean"===typeof b?b:b&&b.texture)&&this._texture.destroy(!!("boolean"===typeof b?b:b&&b.baseTexture));this.shader=this._texture=null};d.from=function(b){return new d(e.default.from(b))};d.fromFrame=function(b){var c=f.TextureCache[b];if(!c)throw Error('The frameId "'+b+'" does not exist in the texture cache');return new d(c)};d.fromImage=function(b,c,a){return new d(e.default.fromImage(b,
c,a))};h(d,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(b){var c=(0,f.sign)(this.scale.x)||1;this.scale.x=c*b/this._texture.orig.width;this._width=b}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(b){var c=(0,f.sign)(this.scale.y)||1;this.scale.y=c*b/this._texture.orig.height;this._height=b}},{key:"anchor",get:function(){return this._anchor},set:function(b){this._anchor.copy(b)}},{key:"tint",
get:function(){return this._tint},set:function(b){this._tint=b;this._tintRGB=(b>>16)+(b&65280)+((b&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(b){if(this._texture!==b&&(this._texture=b,this.cachedTint=16777215,this._textureTrimmedID=this._textureID=-1,b))if(b.baseTexture.hasLoaded)this._onTextureUpdate();else b.once("update",this._onTextureUpdate,this)}}]);return d}(a.default);d.default=a},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,
"../utils":125}],103:[function(a,g,d){d.__esModule=!0;g=(g=a("../../renderers/canvas/CanvasRenderer"))&&g.__esModule?g:{default:g};var k=a("../../const"),h=a("../../math"),c=(a=a("./CanvasTinter"))&&a.__esModule?a:{default:a},f=new h.Matrix;a=function(){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=c}b.prototype.render=function(b){var a=b._texture,e=this.renderer,d=a._frame.width,g=a._frame.height,r=b.transform.worldTransform;if(!(0>=
a.orig.width||0>=a.orig.height)&&a.baseTexture.source&&(e.setBlendMode(b.blendMode),a.valid)){e.context.globalAlpha=b.worldAlpha;var u=a.baseTexture.scaleMode===k.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==u&&(e.context[e.smoothProperty]=u);if(a.trim){u=a.trim.width/2+a.trim.x-b.anchor.x*a.orig.width;var v=a.trim.height/2+a.trim.y-b.anchor.y*a.orig.height}else u=(.5-b.anchor.x)*a.orig.width,v=(.5-b.anchor.y)*a.orig.height;a.rotate&&(r.copy(f),r=f,h.GroupD8.matrixAppendRotationInv(r,
a.rotate,u,v),v=u=0);u-=d/2;v-=g/2;e.roundPixels?(e.context.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution|0,r.ty*e.resolution|0),u|=0,v|=0):e.context.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution);r=a.baseTexture.resolution;if(16777215!==b.tint){if(b.cachedTint!==b.tint||b.tintedTexture.tintId!==b._texture._updateID)b.cachedTint=b.tint,b.tintedTexture=c.default.getTintedTexture(b,b.tint);e.context.drawImage(b.tintedTexture,0,0,d*r,g*r,u*e.resolution,v*e.resolution,d*e.resolution,
g*e.resolution)}else e.context.drawImage(a.baseTexture.source,a._frame.x*r,a._frame.y*r,d*r,g*r,u*e.resolution,v*e.resolution,d*e.resolution,g*e.resolution)}};b.prototype.destroy=function(){this.renderer=null};return b}();d.default=a;g.default.registerPlugin("sprite",a)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(a,g,d){d.__esModule=!0;var k=a("../../utils");a=(a=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"))&&a.__esModule?
a:{default:a};var h={getTintedTexture:function(c,a){c=c._texture;a=h.roundColor(a);var b="#"+("00000"+(a|0).toString(16)).substr(-6);c.tintCache=c.tintCache||{};var e=c.tintCache[b];if(e){if(e.tintId===c._updateID)return c.tintCache[b];e=c.tintCache[b]}else e=h.canvas||document.createElement("canvas");h.tintMethod(c,a,e);e.tintId=c._updateID;h.convertTintToImage?(a=new Image,a.src=e.toDataURL(),c.tintCache[b]=a):(c.tintCache[b]=e,h.canvas=null);return e},tintWithMultiply:function(c,a,b){var e=b.getContext("2d"),
f=c._frame.clone(),d=c.baseTexture.resolution;f.x*=d;f.y*=d;f.width*=d;f.height*=d;b.width=Math.ceil(f.width);b.height=Math.ceil(f.height);e.save();e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fillRect(0,0,f.width,f.height);e.globalCompositeOperation="multiply";e.drawImage(c.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);e.globalCompositeOperation="destination-atop";e.drawImage(c.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);e.restore()},tintWithOverlay:function(c,
a,b){var e=b.getContext("2d"),f=c._frame.clone(),d=c.baseTexture.resolution;f.x*=d;f.y*=d;f.width*=d;f.height*=d;b.width=Math.ceil(f.width);b.height=Math.ceil(f.height);e.save();e.globalCompositeOperation="copy";e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fillRect(0,0,f.width,f.height);e.globalCompositeOperation="destination-atop";e.drawImage(c.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);e.restore()},tintWithPerPixel:function(c,a,b){var e=b.getContext("2d"),f=c._frame.clone(),
d=c.baseTexture.resolution;f.x*=d;f.y*=d;f.width*=d;f.height*=d;b.width=Math.ceil(f.width);b.height=Math.ceil(f.height);e.save();e.globalCompositeOperation="copy";e.drawImage(c.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);e.restore();b=(0,k.hex2rgb)(a);c=b[0];a=b[1];b=b[2];f=e.getImageData(0,0,f.width,f.height);d=f.data;for(var h=0;h<d.length;h+=4)d[h+0]*=c,d[h+1]*=a,d[h+2]*=b;e.putImageData(f,0,0)},roundColor:function(c){var a=h.cacheStepsPerColorChannel;c=(0,k.hex2rgb)(c);c[0]=
Math.min(255,c[0]/a*a);c[1]=Math.min(255,c[1]/a*a);c[2]=Math.min(255,c[2]/a*a);return(0,k.rgb2hex)(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a.default)(),tintMethod:0};h.tintMethod=h.canUseMultiply?h.tintWithMultiply:h.tintWithPerPixel;d.default=h},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(a,g,d){d.__esModule=!0;a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.vertices=new ArrayBuffer(d);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}a.prototype.destroy=function(){this.colors=this.uvs=this.positions=this.vertices=null};return a}();d.default=a},{}],106:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;g=a("../../renderers/webgl/utils/ObjectRenderer");g=k(g);var c=a("../../renderers/webgl/WebGLRenderer");c=k(c);var f=a("../../utils/createIndicesForQuads"),b=k(f);f=a("./generateMultiTextureShader");var e=k(f);f=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader");var l=k(f);f=a("./BatchBuffer");var m=k(f);f=a("../../settings");var q=k(f),x=a("../../utils");f=a("pixi-gl-core");
var r=k(f);a=a("bit-twiddle");var u=k(a),v=0,w=0;a=function(c){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=c.call(this,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.vertSize=5;e.vertByteSize=4*e.vertSize;e.size=q.default.SPRITE_BATCH_SIZE;e.buffers=[];for(var f=1;f<=u.default.nextPow2(e.size);f*=2)e.buffers.push(new m.default(4*f*e.vertByteSize));
e.indices=(0,b.default)(e.size);e.shader=null;e.currentIndex=0;e.groups=[];for(f=0;f<e.size;f++)e.groups[f]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};e.sprites=[];e.vertexBuffers=[];e.vaos=[];e.vaoMax=2;e.vertexCount=0;e.renderer.on("prerender",e.onPrerender,e);return e}h(a,c);a.prototype.onContextChange=function(){var b=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),q.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=
(0,l.default)(this.MAX_TEXTURES,b));this.shader=(0,e.default)(b,this.MAX_TEXTURES);this.indexBuffer=r.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW);this.renderer.bindVao(null);for(var c=this.shader.attributes,a=0;a<this.vaoMax;a++){var f=this.vertexBuffers[a]=r.default.GLBuffer.createVertexBuffer(b,null,b.STREAM_DRAW),d=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(f,c.aVertexPosition,b.FLOAT,!1,this.vertByteSize,0).addAttribute(f,c.aTextureCoord,b.UNSIGNED_SHORT,
!0,this.vertByteSize,8).addAttribute(f,c.aColor,b.UNSIGNED_BYTE,!0,this.vertByteSize,12);c.aTextureId&&d.addAttribute(f,c.aTextureId,b.FLOAT,!1,this.vertByteSize,16);this.vaos[a]=d}this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=Array(this.MAX_TEXTURES)};a.prototype.onPrerender=function(){this.vertexCount=0};a.prototype.render=function(b){this.currentIndex>=this.size&&this.flush();b._texture._uvs&&(this.sprites[this.currentIndex++]=b)};a.prototype.flush=function(){if(0!==this.currentIndex){var b=
this.renderer.gl,c=this.MAX_TEXTURES,a=u.default.nextPow2(this.currentIndex);a=u.default.log2(a);var e=this.buffers[a],f=this.sprites;a=this.groups;var l=e.float32View,d=e.uint32View,h=this.boundTextures,m=this.renderer.boundTextures,k=this.renderer.textureGC.count,g=0,t=void 0,A=1,Q=0,N=a[0],S=x.premultiplyBlendMode[f[0]._texture.baseTexture.premultipliedAlpha?1:0][f[0].blendMode];N.textureCount=0;N.start=0;N.blend=S;v++;var I;for(I=0;I<c;++I){var M=m[I];M._enabled===v?h[I]=this.renderer.emptyTextures[I]:
(h[I]=M,M._virtalBoundId=I,M._enabled=v)}v++;for(I=0;I<this.currentIndex;++I){var P=f[I];M=P._texture.baseTexture;var K=x.premultiplyBlendMode[Number(M.premultipliedAlpha)][P.blendMode];S!==K&&(S=K,t=null,Q=c,v++);if(t!==M&&(t=M,M._enabled!==v)){Q===c&&(v++,N.size=I-N.start,Q=0,N=a[A++],N.blend=S,N.textureCount=0,N.start=I);M.touched=k;if(-1===M._virtalBoundId)for(K=0;K<c;++K){var O=(K+w)%c;var L=h[O];if(L._enabled!==v){w++;L._virtalBoundId=-1;M._virtalBoundId=O;h[O]=M;break}}M._enabled=v;N.textureCount++;
N.ids[Q]=M._virtalBoundId;N.textures[Q++]=M}K=P.vertexData;O=P._texture._uvs.uvsUint32;this.renderer.roundPixels?(L=this.renderer.resolution,l[g]=(K[0]*L|0)/L,l[g+1]=(K[1]*L|0)/L,l[g+5]=(K[2]*L|0)/L,l[g+6]=(K[3]*L|0)/L,l[g+10]=(K[4]*L|0)/L,l[g+11]=(K[5]*L|0)/L,l[g+15]=(K[6]*L|0)/L,l[g+16]=(K[7]*L|0)/L):(l[g]=K[0],l[g+1]=K[1],l[g+5]=K[2],l[g+6]=K[3],l[g+10]=K[4],l[g+11]=K[5],l[g+15]=K[6],l[g+16]=K[7]);d[g+2]=O[0];d[g+7]=O[1];d[g+12]=O[2];d[g+17]=O[3];K=Math.min(P.worldAlpha,1);P=1>K&&M.premultipliedAlpha?
(0,x.premultiplyTint)(P._tintRGB,K):P._tintRGB+(255*K<<24);d[g+3]=d[g+8]=d[g+13]=d[g+18]=P;l[g+4]=l[g+9]=l[g+14]=l[g+19]=M._virtalBoundId;g+=20}N.size=I-N.start;q.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,t=this.shader.attributes,I=this.vertexBuffers[this.vertexCount]=r.default.GLBuffer.createVertexBuffer(b,null,b.STREAM_DRAW),f=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(I,t.aVertexPosition,
b.FLOAT,!1,this.vertByteSize,0).addAttribute(I,t.aTextureCoord,b.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(I,t.aColor,b.UNSIGNED_BYTE,!0,this.vertByteSize,12),t.aTextureId&&f.addAttribute(I,t.aTextureId,b.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=f),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!1),this.vertexCount++);for(I=0;I<c;++I)m[I]._virtalBoundId=-1;for(I=0;I<A;++I){c=a[I];e=c.textureCount;for(f=0;f<e;f++)t=
c.textures[f],m[c.ids[f]]!==t&&this.renderer.bindTexture(t,c.ids[f],!0),t._virtalBoundId=-1;this.renderer.state.setBlendMode(c.blend);b.drawElements(b.TRIANGLES,6*c.size,b.UNSIGNED_SHORT,12*c.start)}this.currentIndex=0}};a.prototype.start=function(){this.renderer.bindShader(this.shader);q.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())};a.prototype.stop=function(){this.flush()};a.prototype.destroy=function(){for(var b=
0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy();this.renderer.off("prerender",this.onPrerender,this);c.prototype.destroy.call(this);this.shader&&(this.shader.destroy(),this.shader=null);this.sprites=this.indices=this.indexBuffer=this.vaos=this.vertexBuffers=null;for(b=0;b<this.buffers.length;++b)this.buffers[b].destroy()};return a}(g.default);d.default=a;c.default.registerPlugin("sprite",a)},
{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(a,g,d){function k(c){var b="\n\n";for(var a=0;a<c;a++)0<a&&(b+="\nelse "),a<c-1&&(b+="if(textureId == "+a+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",
b+="\n}";return b+"\n\n"}d.__esModule=!0;d.default=function(a,b){var e=c;e=e.replace(/%count%/gi,b);e=e.replace(/%forloop%/gi,k(b));a=new h.default(a,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",
e);e=[];for(var f=0;f<b;f++)e[f]=f;a.bind();a.uniforms.uSamplers=e;return a};var h=(g=a("../../Shader"))&&g.__esModule?g:{default:g};a("path");var c="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}"},{"../../Shader":44,path:23}],108:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,
c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}
return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}();g=a("../sprites/Sprite");g=k(g);var f=a("../textures/Texture"),b=k(f),e=a("../math"),l=a("../utils"),m=a("../const");f=a("../settings");var q=k(f);f=a("./TextStyle");var x=k(f);f=a("./TextMetrics");var r=k(f);a=a("../utils/trimCanvas");var u=k(a),v={texture:!0,children:!1,baseTexture:!0};a=function(a){function f(c,l,d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");d=d||document.createElement("canvas");
d.width=3;d.height=3;var h=b.default.fromCanvas(d,q.default.SCALE_MODE,"text");h.orig=new e.Rectangle;h.trim=new e.Rectangle;h=a.call(this,h);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;b.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]);h.canvas=d;h.context=h.canvas.getContext("2d");h.resolution=q.default.RESOLUTION;h._text=null;h._style=null;h._styleListener=null;h._font=
"";h.text=c;h.style=l;h.localStyleID=-1;return h}h(f,a);f.prototype.updateText=function(b){var c=this._style;this.localStyleID!==c.styleID&&(this.dirty=!0,this.localStyleID=c.styleID);if(this.dirty||!b){this._font=this._style.toFontString();var a=this.context,e=r.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),f=e.height;b=e.lines;var l=e.lineHeight,d=e.lineWidths,h=e.maxLineWidth,m=e.fontProperties;this.canvas.width=Math.ceil((e.width+2*c.padding)*this.resolution);this.canvas.height=
Math.ceil((f+2*c.padding)*this.resolution);a.scale(this.resolution,this.resolution);a.clearRect(0,0,this.canvas.width,this.canvas.height);a.font=this._font;a.strokeStyle=c.stroke;a.lineWidth=c.strokeThickness;a.textBaseline=c.textBaseline;a.lineJoin=c.lineJoin;a.miterLimit=c.miterLimit;if(c.dropShadow){a.fillStyle=c.dropShadowColor;a.globalAlpha=c.dropShadowAlpha;a.shadowBlur=c.dropShadowBlur;0<c.dropShadowBlur&&(a.shadowColor=c.dropShadowColor);for(var k=Math.cos(c.dropShadowAngle)*c.dropShadowDistance,
g=Math.sin(c.dropShadowAngle)*c.dropShadowDistance,q=0;q<b.length;q++)e=c.strokeThickness/2,f=c.strokeThickness/2+q*l+m.ascent,"right"===c.align?e+=h-d[q]:"center"===c.align&&(e+=(h-d[q])/2),c.fill&&(this.drawLetterSpacing(b[q],e+k+c.padding,f+g+c.padding),c.stroke&&c.strokeThickness&&(a.strokeStyle=c.dropShadowColor,this.drawLetterSpacing(b[q],e+k+c.padding,f+g+c.padding,!0),a.strokeStyle=c.stroke))}a.shadowBlur=0;a.globalAlpha=1;a.fillStyle=this._generateFillStyle(c,b);for(a=0;a<b.length;a++)e=
c.strokeThickness/2,f=c.strokeThickness/2+a*l+m.ascent,"right"===c.align?e+=h-d[a]:"center"===c.align&&(e+=(h-d[a])/2),c.stroke&&c.strokeThickness&&this.drawLetterSpacing(b[a],e+c.padding,f+c.padding,!0),c.fill&&this.drawLetterSpacing(b[a],e+c.padding,f+c.padding);this.updateTexture()}};f.prototype.drawLetterSpacing=function(b,c,a){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=this._style.letterSpacing;if(0===f)e?this.context.strokeText(b,c,a):this.context.fillText(b,c,a);else for(var l=
String.prototype.split.call(b,""),d=c,h=0,m;h<b.length;)m=l[h++],e?this.context.strokeText(m,d,a):this.context.fillText(m,d,a),d+=this.context.measureText(m).width+f};f.prototype.updateTexture=function(){var b=this.canvas;if(this._style.trim){var c=(0,u.default)(b);b.width=c.width;b.height=c.height;this.context.putImageData(c.data,0,0)}c=this._texture;var a=this._style;a=a.trim?0:a.padding;var e=c.baseTexture;e.hasLoaded=!0;e.resolution=this.resolution;e.realWidth=b.width;e.realHeight=b.height;e.width=
b.width/this.resolution;e.height=b.height/this.resolution;c.trim.width=c._frame.width=b.width/this.resolution;c.trim.height=c._frame.height=b.height/this.resolution;c.trim.x=-a;c.trim.y=-a;c.orig.width=c._frame.width-2*a;c.orig.height=c._frame.height-2*a;this._onTextureUpdate();e.emit("update",e);this.dirty=!1};f.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype.renderWebGL.call(this,b)};f.prototype._renderCanvas=
function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype._renderCanvas.call(this,b)};f.prototype.getLocalBounds=function(b){this.updateText(!0);return a.prototype.getLocalBounds.call(this,b)};f.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)};f.prototype._onStyleChange=function(){this.dirty=!0};f.prototype._generateFillStyle=function(b,c){if(!Array.isArray(b.fill))return b.fill;
if(navigator.isCocoonJS)return b.fill[0];var a=this.canvas.width/this.resolution;var e=this.canvas.height/this.resolution;var f=b.fill.slice(),l=b.fillGradientStops.slice();if(!l.length){var d=f.length+1;for(var h=1;h<d;++h)l.push(h/d)}f.unshift(b.fill[0]);l.unshift(0);f.push(b.fill[b.fill.length-1]);l.push(1);if(b.fillGradientType===m.TEXT_GRADIENT.LINEAR_VERTICAL)for(b=this.context.createLinearGradient(a/2,0,a/2,e),a=(f.length+1)*c.length,h=e=0;h<c.length;h++){e+=1;for(var k=0;k<f.length;k++)d=
"number"===typeof l[k]?l[k]/c.length+h/c.length:e/a,b.addColorStop(d,f[k]),e++}else for(b=this.context.createLinearGradient(0,e/2,a,e/2),a=f.length+1,e=1,c=0;c<f.length;c++)d="number"===typeof l[c]?l[c]:e/a,b.addColorStop(d,f[c]),e++;return b};f.prototype.destroy=function(b){"boolean"===typeof b&&(b={children:b});b=Object.assign({},v,b);a.prototype.destroy.call(this,b);this._style=this.canvas=this.context=null};c(f,[{key:"width",get:function(){this.updateText(!0);return Math.abs(this.scale.x)*this._texture.orig.width},
set:function(b){this.updateText(!0);var c=(0,l.sign)(this.scale.x)||1;this.scale.x=c*b/this._texture.orig.width;this._width=b}},{key:"height",get:function(){this.updateText(!0);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(b){this.updateText(!0);var c=(0,l.sign)(this.scale.y)||1;this.scale.y=c*b/this._texture.orig.height;this._height=b}},{key:"style",get:function(){return this._style},set:function(b){b=b||{};this._style=b instanceof x.default?b:new x.default(b);this.localStyleID=
-1;this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(b){b=String(""===b||null===b||void 0===b?" ":b);this._text!==b&&(this._text=b,this.dirty=!0)}}]);return f}(g.default);d.default=a},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(a,g,d){d.__esModule=!0;a=function(){function a(d,c,f,b,e,l,m,g,k){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.text=d;this.style=c;this.width=f;this.height=b;this.lines=e;this.lineWidths=l;this.lineHeight=m;this.maxLineWidth=g;this.fontProperties=k}a.measureText=function(d,c,f){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:a._canvas;f=f||c.wordWrap;var e=c.toFontString(),l=a.measureFont(e),h=b.getContext("2d");h.font=e;b=(f?a.wordWrap(d,c,b):d).split(/(?:\r\n|\r|\n)/);e=Array(b.length);for(var g=0,k=0;k<b.length;k++){var r=h.measureText(b[k]).width+(b[k].length-1)*c.letterSpacing;e[k]=
r;g=Math.max(g,r)}h=g+c.strokeThickness;c.dropShadow&&(h+=c.dropShadowDistance);k=c.lineHeight||l.fontSize+c.strokeThickness;r=Math.max(k,l.fontSize+c.strokeThickness)+(b.length-1)*(k+c.leading);c.dropShadow&&(r+=c.dropShadowDistance);return new a(d,c,h,r,b,e,k+c.leading,g,l)};a.wordWrap=function(d,c){for(var f=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:a._canvas).getContext("2d"),b="",e=d.charAt(0),l=d.split("\n"),h=c.wordWrapWidth,g={},k=0;k<l.length;k++){for(var r=h,u=l[k].split(" "),
v=0;v<u.length;v++){var w=f.measureText(u[v]).width;if(c.breakWords&&w>h){w=u[v].split("");for(var t=0;t<w.length;t++){var A=w[t],y=g[A];void 0===y&&(y=f.measureText(A).width,g[A]=y);y>r?(b+="\n"+A,r=h-y):(0===t&&(0<v||" "===e)&&(b+=" "),b+=A,r-=y)}}else t=w+f.measureText(" ").width,0===v||t>r?(0<v&&(b+="\n"),b+=u[v],r=h-w):(r-=t,b+=" "+u[v])}k<l.length-1&&(b+="\n")}return b};a.measureFont=function(d){if(a._fonts[d])return a._fonts[d];var c={},f=a._canvas,b=a._context;b.font=d;var e=Math.ceil(b.measureText("|M\u00c9q").width),
l=Math.ceil(b.measureText("M").width),h=2*l;l=1.4*l|0;f.width=e;f.height=h;b.fillStyle="#f00";b.fillRect(0,0,e,h);b.font=d;b.textBaseline="alphabetic";b.fillStyle="#000";b.fillText("|M\u00c9q",0,l);f=b.getImageData(0,0,e,h).data;b=f.length;e*=4;var g,k=0,r=!1;for(g=0;g<l;++g){for(var u=0;u<e;u+=4)if(255!==f[k+u]){r=!0;break}if(r)break;else k+=e}c.ascent=l-g;k=b-e;r=!1;for(g=h;g>l;--g){for(h=0;h<e;h+=4)if(255!==f[k+h]){r=!0;break}if(r)break;else k-=e}c.descent=g-l;c.fontSize=c.ascent+c.descent;return a._fonts[d]=
c};return a}();d.default=a;d=document.createElement("canvas");d.width=d.height=10;a._canvas=d;a._context=d.getContext("2d");a._fonts={}},{}],110:[function(a,g,d){function k(c){if("number"===typeof c)return(0,b.hex2string)(c);"string"===typeof c&&0===c.indexOf("0x")&&(c=c.replace("0x","#"));return c}function h(b){if(Array.isArray(b)){for(var c=0;c<b.length;++c)b[c]=k(b[c]);return b}return k(b)}function c(b,c,a){for(var e in a)Array.isArray(c[e])?b[e]=c[e].slice():b[e]=c[e]}d.__esModule=!0;var f=function(){function b(b,
c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}();g=a("../const");var b=a("../utils"),e={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:g.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",
fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0};a=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.styleID=0;this.reset();c(this,a,a)}b.prototype.clone=function(){var a={};c(a,this,e);return new b(a)};b.prototype.reset=function(){c(this,
e,e)};b.prototype.toFontString=function(){var b="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,c=this.fontFamily;Array.isArray(this.fontFamily)||(c=this.fontFamily.split(","));for(var a=c.length-1;0<=a;a--){var e=c[a].trim();/(["'])[^'"]+\1/.test(e)||(e='"'+e+'"');c[a]=e}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+b+" "+c.join(",")};f(b,[{key:"align",get:function(){return this._align},set:function(b){this._align!==b&&(this._align=b,this.styleID++)}},{key:"breakWords",
get:function(){return this._breakWords},set:function(b){this._breakWords!==b&&(this._breakWords=b,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(b){this._dropShadow!==b&&(this._dropShadow=b,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(b){this._dropShadowAlpha!==b&&(this._dropShadowAlpha=b,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(b){this._dropShadowAngle!==
b&&(this._dropShadowAngle=b,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(b){this._dropShadowBlur!==b&&(this._dropShadowBlur=b,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(b){b=h(b);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(b){this._dropShadowDistance!==b&&(this._dropShadowDistance=
b,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(b){b=h(b);this._fill!==b&&(this._fill=b,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(b){this._fillGradientType!==b&&(this._fillGradientType=b,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(b){a:{var c=this._fillGradientStops;if(Array.isArray(c)&&Array.isArray(b)&&c.length===b.length){for(var a=0;a<c.length;++a)if(c[a]!==
b[a]){c=!1;break a}c=!0}else c=!1}c||(this._fillGradientStops=b,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(b){this.fontFamily!==b&&(this._fontFamily=b,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(b){this._fontSize!==b&&(this._fontSize=b,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(b){this._fontStyle!==b&&(this._fontStyle=b,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},
set:function(b){this._fontVariant!==b&&(this._fontVariant=b,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(b){this._fontWeight!==b&&(this._fontWeight=b,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(b){this._letterSpacing!==b&&(this._letterSpacing=b,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(b){this._lineHeight!==b&&(this._lineHeight=b,this.styleID++)}},{key:"leading",
get:function(){return this._leading},set:function(b){this._leading!==b&&(this._leading=b,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(b){this._lineJoin!==b&&(this._lineJoin=b,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(b){this._miterLimit!==b&&(this._miterLimit=b,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(b){this._padding!==b&&(this._padding=b,this.styleID++)}},{key:"stroke",
get:function(){return this._stroke},set:function(b){b=h(b);this._stroke!==b&&(this._stroke=b,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(b){this._strokeThickness!==b&&(this._strokeThickness=b,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(b){this._textBaseline!==b&&(this._textBaseline=b,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(b){this._trim!==b&&(this._trim=b,this.styleID++)}},
{key:"wordWrap",get:function(){return this._wordWrap},set:function(b){this._wordWrap!==b&&(this._wordWrap=b,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(b){this._wordWrapWidth!==b&&(this._wordWrapWidth=b,this.styleID++)}}]);return b}();d.default=a},{"../const":46,"../utils":125}],111:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=
Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;g=(g=a("./BaseTexture"))&&g.__esModule?g:{default:g};var h=(a=a("../settings"))&&a.__esModule?a:{default:a};a=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,f=arguments[2],d=arguments[3];if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var g=c.call(this,null,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.resolution=d||h.default.RESOLUTION;g.width=Math.ceil(b);g.height=Math.ceil(e);g.realWidth=g.width*g.resolution;g.realHeight=g.height*g.resolution;g.scaleMode=void 0!==f?f:h.default.SCALE_MODE;g.hasLoaded=!0;g._glRenderTargets={};g._canvasRenderTarget=null;g.valid=!1;return g}k(a,c);a.prototype.resize=function(b,c){b=Math.ceil(b);
c=Math.ceil(c);if(b!==this.width||c!==this.height)this.valid=0<b&&0<c,this.width=b,this.height=c,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this)};a.prototype.destroy=function(){c.prototype.destroy.call(this,!0);this.renderer=null};return a}(g.default);d.default=a},{"../settings":101,"./BaseTexture":112}],112:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==
c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=a("../utils");g=a("../settings");var f=k(g);g=a("eventemitter3");g=k(g);var b=a("../utils/determineCrossOrigin"),e=k(b);a=a("bit-twiddle");var l=k(a);a=function(b){function a(e,l,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var h=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.uid=(0,c.uid)();h.touched=0;h.resolution=d||f.default.RESOLUTION;h.width=100;h.height=100;h.realWidth=100;h.realHeight=100;h.scaleMode=void 0!==l?l:f.default.SCALE_MODE;h.hasLoaded=!1;h.isLoading=!1;h.source=null;h.origSource=null;h.imageType=null;h.sourceScale=1;h.premultipliedAlpha=!0;h.imageUrl=null;h.isPowerOfTwo=!1;h.mipmap=
f.default.MIPMAP_TEXTURES;h.wrapMode=f.default.WRAP_MODE;h._glTextures={};h._enabled=0;h._virtalBoundId=-1;h._destroyed=!1;h.textureCacheIds=[];e&&h.loadSource(e);return h}h(a,b);a.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions());this.emit("update",this)};a.prototype._updateDimensions=function(){this.width=
this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight)};a.prototype.loadSource=function(b){var c=this.isLoading;this.isLoading=this.hasLoaded=!1;c&&this.source&&(this.source.onload=null,this.source.onerror=null);var a=!this.source;this.source=b;if((b.src&&b.complete||b.getContext)&&b.width&&b.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),a&&this.emit("loaded",
this);else if(!b.getContext){this.isLoading=!0;var e=this;b.onload=function(){e._updateImageType();b.onload=null;b.onerror=null;e.isLoading&&(e.isLoading=!1,e._sourceLoaded(),"svg"===e.imageType?e._loadSvgSource():e.emit("loaded",e))};b.onerror=function(){b.onload=null;b.onerror=null;e.isLoading&&(e.isLoading=!1,e.emit("error",e))};b.complete&&b.src&&(b.onload=null,b.onerror=null,"svg"===e.imageType?e._loadSvgSource():(this.isLoading=!1,b.width&&b.height?(this._sourceLoaded(),c&&this.emit("loaded",
this)):c&&this.emit("error",this)))}};a.prototype._updateImageType=function(){if(this.imageUrl){var b=(0,c.decomposeDataUri)(this.imageUrl);if(b&&"image"===b.mediaType){if(b=b.subType.split("+")[0],b=(0,c.getUrlFileExtension)("."+b),!b)throw Error("Invalid image type in data URI.");}else(b=(0,c.getUrlFileExtension)(this.imageUrl))||(b="png");this.imageType=b}};a.prototype._loadSvgSource=function(){if("svg"===this.imageType){var b=(0,c.decomposeDataUri)(this.imageUrl);b?this._loadSvgSourceUsingDataUri(b):
this._loadSvgSourceUsingXhr()}};a.prototype._loadSvgSourceUsingDataUri=function(b){if("base64"===b.encoding){if(!atob)throw Error("Your browser doesn't support base64 conversions.");b=atob(b.data)}else b=b.data;this._loadSvgSourceUsingString(b)};a.prototype._loadSvgSourceUsingXhr=function(){var b=this,c=new XMLHttpRequest;c.onload=function(){if(c.readyState!==c.DONE||200!==c.status)throw Error("Failed to load SVG using XHR.");b._loadSvgSourceUsingString(c.response)};c.onerror=function(){return b.emit("error",
b)};c.open("GET",this.imageUrl,!0);c.send()};a.prototype._loadSvgSourceUsingString=function(b){var e=(0,c.getSvgSize)(b);b=e.width;e=e.height;if(!b||!e)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(b*this.sourceScale);this.realHeight=Math.round(e*this.sourceScale);this._updateDimensions();var f=document.createElement("canvas");f.width=this.realWidth;f.height=this.realHeight;f._pixiId="canvas_"+(0,c.uid)();f.getContext("2d").drawImage(this.source,
0,0,b,e,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=f;a.addToCache(this,f._pixiId);this.isLoading=!1;this._sourceLoaded();this.emit("loaded",this)};a.prototype._sourceLoaded=function(){this.hasLoaded=!0;this.update()};a.prototype.destroy=function(){this.imageUrl&&(delete c.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=""));this.source=null;this.dispose();a.removeFromCache(this);this.textureCacheIds=null;this._destroyed=!0};a.prototype.dispose=
function(){this.emit("dispose",this)};a.prototype.updateSourceImage=function(b){this.source.src=b;this.loadSource(this.source)};a.fromImage=function(b,f,l,d){var h=c.BaseTextureCache[b];if(!h){var g=new Image;void 0===f&&0!==b.indexOf("data:")?g.crossOrigin=(0,e.default)(b):f&&(g.crossOrigin="string"===typeof f?f:"anonymous");h=new a(g,l);h.imageUrl=b;d&&(h.sourceScale=d);h.resolution=(0,c.getResolutionOfUrl)(b);g.src=b;a.addToCache(h,b)}return h};a.fromCanvas=function(b,e){var f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:"canvas";b._pixiId||(b._pixiId=f+"_"+(0,c.uid)());f=c.BaseTextureCache[b._pixiId];f||(f=new a(b,e),a.addToCache(f,b._pixiId));return f};a.from=function(b,e,f){if("string"===typeof b)return a.fromImage(b,void 0,e,f);if(b instanceof HTMLImageElement){var l=b.src,d=c.BaseTextureCache[l];d||(d=new a(b,e),d.imageUrl=l,f&&(d.sourceScale=f),d.resolution=(0,c.getResolutionOfUrl)(l),a.addToCache(d,l));return d}return b instanceof HTMLCanvasElement?a.fromCanvas(b,e):b};a.addToCache=
function(b,a){a&&(-1===b.textureCacheIds.indexOf(a)&&b.textureCacheIds.push(a),c.BaseTextureCache[a]&&console.warn("BaseTexture added to the cache with an id ["+a+"] that already had an entry"),c.BaseTextureCache[a]=b)};a.removeFromCache=function(b){if("string"===typeof b){var a=c.BaseTextureCache[b];if(a){var e=a.textureCacheIds.indexOf(b);-1<e&&a.textureCacheIds.splice(e,1);delete c.BaseTextureCache[b];return a}}else if(b&&b.textureCacheIds){for(a=0;a<b.textureCacheIds.length;++a)delete c.BaseTextureCache[b.textureCacheIds[a]];
b.textureCacheIds.length=0;return b}return null};return a}(g.default);d.default=a},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,
a):c.__proto__=a)}d.__esModule=!0;var h=(g=a("./BaseRenderTexture"))&&g.__esModule?g:{default:g};a=a("./Texture");a=function(c){function a(b,e,f,d,g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var l=null;if(!(b instanceof h.default)){var m=e;console.warn("Please use RenderTexture.create("+m+", "+f+") instead of the ctor directly.");l=b;e=null;b=new h.default(m,f,d,g)}b=c.call(this,b,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.legacyRenderer=l;b.valid=!0;b._updateUvs();return b}k(a,c);a.prototype.resize=function(b,c,a){b=Math.ceil(b);c=Math.ceil(c);this.valid=0<b&&0<c;this._frame.width=this.orig.width=b;this._frame.height=this.orig.height=c;a||this.baseTexture.resize(b,c);this._updateUvs()};a.create=function(b,c,f,d){return new a(new h.default(b,c,f,d))};return a}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"./BaseRenderTexture":111,"./Texture":115}],
114:[function(a,g,d){d.__esModule=!0;var k=function(){function c(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=a("../"),c=a("../utils");a=function(){function a(b,c){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.baseTexture=
b;this.textures={};this.data=c;this.resolution=this._updateResolution(e||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}k(a,null,[{key:"BATCH_SIZE",get:function(){return 1E3}}]);a.prototype._updateResolution=function(b){var a=this.data.meta.scale;b=(0,c.getResolutionOfUrl)(b,null);null===b&&(b=void 0!==a?parseFloat(a):1);1!==b&&(this.baseTexture.resolution=b,this.baseTexture.update());return b};a.prototype.parse=
function(b){this._batchIndex=0;this._callback=b;this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()};a.prototype._processFrames=function(b){for(var c=b,f=a.BATCH_SIZE,d=this.baseTexture.sourceScale;c-b<f&&c<this._frameKeys.length;){var g=this._frameKeys[c],k=this._frames[g].frame;if(k){var r=null,u=new h.Rectangle(0,0,Math.floor(this._frames[g].sourceSize.w*d)/this.resolution,Math.floor(this._frames[g].sourceSize.h*d)/this.resolution);var v=this._frames[g].rotated?
new h.Rectangle(Math.floor(k.x*d)/this.resolution,Math.floor(k.y*d)/this.resolution,Math.floor(k.h*d)/this.resolution,Math.floor(k.w*d)/this.resolution):new h.Rectangle(Math.floor(k.x*d)/this.resolution,Math.floor(k.y*d)/this.resolution,Math.floor(k.w*d)/this.resolution,Math.floor(k.h*d)/this.resolution);this._frames[g].trimmed&&(r=new h.Rectangle(Math.floor(this._frames[g].spriteSourceSize.x*d)/this.resolution,Math.floor(this._frames[g].spriteSourceSize.y*d)/this.resolution,Math.floor(k.w*d)/this.resolution,
Math.floor(k.h*d)/this.resolution));this.textures[g]=new h.Texture(this.baseTexture,v,u,r,this._frames[g].rotated?2:0);h.Texture.addToCache(this.textures[g],g)}c++}};a.prototype._parseComplete=function(){var b=this._callback;this._callback=null;this._batchIndex=0;b.call(this,this.textures)};a.prototype._nextBatch=function(){var b=this;this._processFrames(this._batchIndex*a.BATCH_SIZE);this._batchIndex++;setTimeout(function(){b._batchIndex*a.BATCH_SIZE<b._frameKeys.length?b._nextBatch():b._parseComplete()},
0)};a.prototype.destroy=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,c;for(c in this.textures)this.textures[c].destroy();this.textures=this.data=this._frameKeys=this._frames=null;b&&this.baseTexture.destroy();this.baseTexture=null};return a}();d.default=a},{"../":65,"../utils":125}],115:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}function c(b){b.destroy=function(){};b.on=function(){};b.once=function(){};b.emit=function(){}}d.__esModule=!0;var f=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&
b(c.prototype,a);e&&b(c,e);return c}}();g=a("./BaseTexture");var b=k(g);g=a("./VideoBaseTexture");var e=k(g);g=a("./TextureUvs");var l=k(g);g=a("eventemitter3");g=k(g);var m=a("../math"),q=a("../utils");a=a("../settings");var x=k(a),r=function(c){function a(b,e,f,l,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var h=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==
typeof h?this:h;h.noFrame=!1;e||(h.noFrame=!0,e=new m.Rectangle(0,0,1,1));b instanceof a&&(b=b.baseTexture);h.baseTexture=b;h._frame=e;h.trim=l;h.valid=!1;h.requiresUpdate=!1;h._uvs=null;h.orig=f||e;h._rotate=Number(d||0);if(!0===d)h._rotate=2;else if(0!==h._rotate%2)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");if(b.hasLoaded)h.noFrame&&(e=new m.Rectangle(0,0,b.width,b.height),b.on("update",h.onBaseTextureUpdated,h)),h.frame=e;else b.once("loaded",h.onBaseTextureLoaded,
h);h._updateID=0;h.transform=null;h.textureCacheIds=[];return h}h(a,c);a.prototype.update=function(){this.baseTexture.update()};a.prototype.onBaseTextureLoaded=function(b){this._updateID++;this.frame=this.noFrame?new m.Rectangle(0,0,b.width,b.height):this._frame;this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)};a.prototype.onBaseTextureUpdated=function(b){this._updateID++;this._frame.width=b.width;this._frame.height=b.height;this.emit("update",this)};a.prototype.destroy=
function(b){this.baseTexture&&(b&&(q.TextureCache[this.baseTexture.imageUrl]&&a.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null);this.orig=this.trim=this._uvs=this._frame=null;this.valid=!1;a.removeFromCache(this);this.textureCacheIds=null};a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};
a.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default);this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};a.fromImage=function(c,e,f,l){var d=q.TextureCache[c];d||(d=new a(b.default.fromImage(c,e,f,l)),a.addToCache(d,c));return d};a.fromFrame=function(b){var c=q.TextureCache[b];if(!c)throw Error('The frameId "'+b+'" does not exist in the texture cache');return c};a.fromCanvas=function(c,e){return new a(b.default.fromCanvas(c,e,2<arguments.length&&void 0!==arguments[2]?
arguments[2]:"canvas"))};a.fromVideo=function(b,c){return"string"===typeof b?a.fromVideoUrl(b,c):new a(e.default.fromVideo(b,c))};a.fromVideoUrl=function(b,c){return new a(e.default.fromUrl(b,c))};a.from=function(c){if("string"===typeof c){var e=q.TextureCache[c];return e?e:null!==c.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?a.fromVideoUrl(c):a.fromImage(c)}return c instanceof HTMLImageElement?new a(b.default.from(c)):c instanceof HTMLCanvasElement?a.fromCanvas(c,x.default.SCALE_MODE,"HTMLCanvasElement"):
c instanceof HTMLVideoElement?a.fromVideo(c):c instanceof b.default?new a(c):c};a.fromLoader=function(c,e,f){c=new b.default(c,void 0,(0,q.getResolutionOfUrl)(e));var l=new a(c);c.imageUrl=e;f||(f=e);b.default.addToCache(l.baseTexture,f);a.addToCache(l,f);f!==e&&(b.default.addToCache(l.baseTexture,e),a.addToCache(l,e));return l};a.addToCache=function(b,c){c&&(-1===b.textureCacheIds.indexOf(c)&&b.textureCacheIds.push(c),q.TextureCache[c]&&console.warn("Texture added to the cache with an id ["+c+"] that already had an entry"),
q.TextureCache[c]=b)};a.removeFromCache=function(b){if("string"===typeof b){var c=q.TextureCache[b];if(c){var a=c.textureCacheIds.indexOf(b);-1<a&&c.textureCacheIds.splice(a,1);delete q.TextureCache[b];return c}}else if(b&&b.textureCacheIds){for(c=0;c<b.textureCacheIds.length;++c)q.TextureCache[b.textureCacheIds[c]]===b&&delete q.TextureCache[b.textureCacheIds[c]];b.textureCacheIds.length=0;return b}return null};f(a,[{key:"frame",get:function(){return this._frame},set:function(b){this._frame=b;this.noFrame=
!1;var c=b.x,a=b.y,e=b.width,f=b.height,l=c+e>this.baseTexture.width,d=a+f>this.baseTexture.height;if(l||d)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+c+" + "+e+" = "+(c+e)+" > "+this.baseTexture.width+" "+(l&&d?"and":"or")+" "+("Y: "+a+" + "+f+" = "+(a+f)+" > "+this.baseTexture.height)));this.valid=e&&f&&this.baseTexture.hasLoaded;this.trim||this.rotate||(this.orig=b);this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},
set:function(b){this._rotate=b;this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]);return a}(g.default);d.default=r;r.EMPTY=new r(new b.default);c(r.EMPTY);c(r.EMPTY.baseTexture);r.WHITE=function(){var c=document.createElement("canvas");c.width=10;c.height=10;var a=c.getContext("2d");a.fillStyle="white";a.fillRect(0,0,10,10);return new r(new b.default(c))}();c(r.WHITE);c(r.WHITE.baseTexture)},{"../math":70,"../settings":101,
"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(a,g,d){d.__esModule=!0;var k=function(){function c(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=(a=a("../math/Matrix"))&&a.__esModule?a:{default:a},c=new h.default;a=function(){function a(b,c){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this._texture=b;this.mapCoord=new h.default;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._lastTextureID=-1;this.clampOffset=0;this.clampMargin="undefined"===typeof c?.5:c}a.prototype.multiplyUvs=function(b,c){void 0===c&&(c=b);for(var a=this.mapCoord,e=0;e<b.length;e+=2){var f=b[e],d=b[e+1];c[e]=f*a.a+d*a.c+a.tx;c[e+1]=f*a.b+d*a.d+a.ty}return c};a.prototype.update=function(b){var a=this._texture;if(!a||
!a.valid||!b&&this._lastTextureID===a._updateID)return!1;this._lastTextureID=a._updateID;b=a._uvs;this.mapCoord.set(b.x1-b.x0,b.y1-b.y0,b.x3-b.x0,b.y3-b.y0,b.x0,b.y0);b=a.orig;var f=a.trim;f&&(c.set(b.width/f.width,0,0,b.height/f.height,-f.x/f.width,-f.y/f.height),this.mapCoord.append(c));b=a.baseTexture;f=this.uClampFrame;var d=this.clampMargin/b.resolution,h=this.clampOffset;f[0]=(a._frame.x+d+h)/b.width;f[1]=(a._frame.y+d+h)/b.height;f[2]=(a._frame.x+a._frame.width-d+h)/b.width;f[3]=(a._frame.y+
a._frame.height-d+h)/b.height;this.uClampOffset[0]=h/b.realWidth;this.uClampOffset[1]=h/b.realHeight;return!0};k(a,[{key:"texture",get:function(){return this._texture},set:function(b){this._texture=b;this._lastTextureID=-1}}]);return a}();d.default=a},{"../math/Matrix":67}],117:[function(a,g,d){d.__esModule=!0;var k=(a=a("../math/GroupD8"))&&a.__esModule?a:{default:a};a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.y0=this.x0=0;this.x1=
1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}a.prototype.set=function(c,a,b){var e=a.width,f=a.height;if(b){a=c.width/2/e;var d=c.height/2/f;e=c.x/e+a;c=c.y/f+d;b=k.default.add(b,k.default.NW);this.x0=e+a*k.default.uX(b);this.y0=c+d*k.default.uY(b);b=k.default.add(b,2);this.x1=e+a*k.default.uX(b);this.y1=c+d*k.default.uY(b);b=k.default.add(b,2);this.x2=e+a*k.default.uX(b);this.y2=c+d*k.default.uY(b);b=k.default.add(b,2);this.x3=e+a*k.default.uX(b);this.y3=c+
d*k.default.uY(b)}else this.x0=c.x/e,this.y0=c.y/f,this.x1=(c.x+c.width)/e,this.y1=c.y/f,this.x2=(c.x+c.width)/e,this.y2=(c.y+c.height)/f,this.x3=c.x/e,this.y3=(c.y+c.height)/f;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535;this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535;this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535;this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535};return a}();d.default=a},{"../math/GroupD8":66}],118:[function(a,g,
d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}function h(b,c){c||(c="video/"+b.substr(b.lastIndexOf(".")+1));var a=document.createElement("source");a.src=b;a.type=c;return a}d.__esModule=!0;var c=function(){function b(b,c){for(var a=
0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),f=(g=a("./BaseTexture"))&&g.__esModule?g:{default:g},b=a("../utils"),e=a("../ticker"),l=a("../const"),m=(a=a("../utils/determineCrossOrigin"))&&a.__esModule?a:{default:a};a=function(a){function d(b,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");if(!b)throw Error("No video source element specified.");
(b.readyState===b.HAVE_ENOUGH_DATA||b.readyState===b.HAVE_FUTURE_DATA)&&b.width&&b.height&&(b.complete=!0);c=a.call(this,b,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.width=b.videoWidth;c.height=b.videoHeight;c._autoUpdate=!0;c._isAutoUpdating=!1;c.autoPlay=!0;c.update=c.update.bind(c);c._onCanPlay=c._onCanPlay.bind(c);b.addEventListener("play",c._onPlayStart.bind(c));b.addEventListener("pause",
c._onPlayStop.bind(c));c.hasLoaded=!1;c.__loaded=!1;c._isSourceReady()?c._onCanPlay():(b.addEventListener("canplay",c._onCanPlay),b.addEventListener("canplaythrough",c._onCanPlay));return c}k(d,a);d.prototype._isSourcePlaying=function(){var b=this.source;return 0<b.currentTime&&!1===b.paused&&!1===b.ended&&2<b.readyState};d.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState};d.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay();!this._isAutoUpdating&&
this.autoUpdate&&(e.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)};d.prototype._onPlayStop=function(){this._isAutoUpdating&&(e.shared.remove(this.update,this),this._isAutoUpdating=!1)};d.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=
!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())};d.prototype.destroy=function(){this._isAutoUpdating&&e.shared.remove(this.update,this);this.source&&this.source._pixiId&&(f.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load());a.prototype.destroy.call(this)};d.fromVideo=function(c,a){c._pixiId||(c._pixiId="video_"+(0,b.uid)());var e=b.BaseTextureCache[c._pixiId];
e||(e=new d(c,a),f.default.addToCache(e,c._pixiId));return e};d.fromUrl=function(b,c,a){var e=document.createElement("video");e.setAttribute("webkit-playsinline","");e.setAttribute("playsinline","");var f=Array.isArray(b)?b[0].src||b[0]:b.src||b;void 0===a&&0!==f.indexOf("data:")?e.crossOrigin=(0,m.default)(f):a&&(e.crossOrigin="string"===typeof a?a:"anonymous");if(Array.isArray(b))for(a=0;a<b.length;++a)e.appendChild(h(b[a].src||b[a],b[a].mime));else e.appendChild(h(f,b.mime));e.load();return d.fromVideo(e,
c)};c(d,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(b){b!==this._autoUpdate&&(this._autoUpdate=b,!this._autoUpdate&&this._isAutoUpdating?(e.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(e.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]);return d}(f.default);d.default=a;a.fromUrls=a.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],
119:[function(a,g,d){d.__esModule=!0;var k=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,f){a&&b(c.prototype,a);f&&b(c,f);return c}}(),h=(g=a("../settings"))&&g.__esModule?g:{default:g},c=a("../const"),f=(a=a("./TickerListener"))&&a.__esModule?a:{default:a};a=function(){function b(){var c=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this._head=new f.default(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/h.default.TARGET_FPMS;this.lastTime=-1;this.speed=1;this.started=!1;this._tick=function(b){c._requestId=null;c.started&&(c.update(b),c.started&&null===c._requestId&&c._head.next&&(c._requestId=requestAnimationFrame(c._tick)))}}b.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};
b.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)};b.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()};b.prototype.add=function(b,a){return this._addListener(new f.default(b,a,2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.UPDATE_PRIORITY.NORMAL))};b.prototype.addOnce=function(b,a){return this._addListener(new f.default(b,a,2<arguments.length&&void 0!==arguments[2]?
arguments[2]:c.UPDATE_PRIORITY.NORMAL,!0))};b.prototype._addListener=function(b){var c=this._head.next,a=this._head;if(c){for(;c;){if(b.priority>c.priority){b.connect(a);break}a=c;c=c.next}b.previous||b.connect(a)}else b.connect(a);this._startIfPossible();return this};b.prototype.remove=function(b,c){for(var a=this._head.next;a;)a=a.match(b,c)?a.destroy():a.next;this._head.next||this._cancelIfNeeded();return this};b.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())};
b.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};b.prototype.destroy=function(){this.stop();for(var b=this._head.next;b;)b=b.destroy(!0);this._head.destroy();this._head=null};b.prototype.update=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now();if(b>this.lastTime){var c=this.elapsedMS=b-this.lastTime;c>this._maxElapsedMS&&(c=this._maxElapsedMS);this.deltaTime=c*h.default.TARGET_FPMS*this.speed;c=this._head;for(var a=c.next;a;)a=
a.emit(this.deltaTime);c.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=b};k(b,[{key:"FPS",get:function(){return 1E3/this.elapsedMS}},{key:"minFPS",get:function(){return 1E3/this._maxElapsedMS},set:function(b){this._maxElapsedMS=1/Math.min(Math.max(0,b)/1E3,h.default.TARGET_FPMS)}}]);return b}();d.default=a},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(a,g,d){d.__esModule=!0;a=function(){function a(d){var c=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:null,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.fn=d;this.context=c;this.priority=f;this.once=b;this.previous=this.next=null;this._destroyed=!1}a.prototype.match=function(a,c){return this.fn===a&&this.context===(c||null)};a.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));a=this.next;
this.once&&this.destroy(!0);this._destroyed&&(this.next=null);return a};a.prototype.connect=function(a){this.previous=a;a.next&&(a.next.previous=this);this.next=a.next;a.next=this};a.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this._destroyed=!0;this.context=this.fn=null;this.previous&&(this.previous.next=this.next);this.next&&(this.next.previous=this.previous);var c=this.previous;this.next=a?null:c;this.previous=null;return c};return a}();d.default=
a},{}],121:[function(a,g,d){d.__esModule=!0;d.Ticker=d.shared=void 0;a=(a=a("./Ticker"))&&a.__esModule?a:{default:a};g=new a.default;g.autoStart=!0;g.destroy=function(){};d.shared=g;d.Ticker=a.default},{"./Ticker":119}],122:[function(a,g,d){d.__esModule=!0;d.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(a,g,d){d.__esModule=!0;d.default=function(a){a*=6;for(var d=new Uint16Array(a),c=0,f=0;c<a;c+=6,f+=4)d[c+0]=f+0,d[c+1]=f+1,d[c+2]=
f+2,d[c+3]=f+0,d[c+4]=f+2,d[c+5]=f+3;return d}},{}],124:[function(a,g,d){d.__esModule=!0;d.default=function(c){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===c.indexOf("data:"))return"";a=a||window.location;h||(h=document.createElement("a"));h.href=c;c=k.default.parse(h.href);var b=!c.port&&""===a.port||c.port===a.port;return c.hostname===a.hostname&&b&&c.protocol===a.protocol?"":"anonymous"};var k=(a=a("url"))&&a.__esModule?a:{default:a},h=void 0},{url:29}],125:[function(a,
g,d){function k(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}function h(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;d.premultiplyBlendMode=d.BaseTextureCache=d.TextureCache=d.mixins=d.pluginTarget=d.EventEmitter=d.removeItems=d.isMobile=void 0;d.uid=function(){return++q};d.hex2rgb=function(b,c){c=c||[];c[0]=(b>>16&255)/255;c[1]=(b>>8&255)/255;c[2]=(b&255)/255;return c};d.hex2string=function(b){b=
b.toString(16);b="000000".substr(0,6-b.length)+b;return"#"+b};d.rgb2hex=function(b){return(255*b[0]<<16)+(255*b[1]<<8)+(255*b[2]|0)};d.getResolutionOfUrl=function(b,c){return(b=f.default.RETINA_PREFIX.exec(b))?parseFloat(b[1]):void 0!==c?c:1};d.decomposeDataUri=function(b){if(b=c.DATA_URI.exec(b))return{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,encoding:b[3]?b[3].toLowerCase():void 0,data:b[4]}};d.getUrlFileExtension=function(b){if(b=c.URL_FILE_EXTENSION.exec(b))return b[1].toLowerCase()};
d.getSvgSize=function(b){b=c.SVG_SIZE.exec(b);var a={};b&&(a[b[1]]=Math.round(parseFloat(b[3])),a[b[5]]=Math.round(parseFloat(b[7])));return a};d.skipHello=function(){x=!0};d.sayHello=function(b){x||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c PixiJS "+c.VERSION+" - \u2730 "+b+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;",
"background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS "+c.VERSION+" - "+b+" - http://www.pixijs.com/"),x=!0)};d.isWebGLSupported=function(){var b={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var c=
document.createElement("canvas"),a=c.getContext("webgl",b)||c.getContext("experimental-webgl",b),e=!(!a||!a.getContextAttributes().stencil);if(a){var f=a.getExtension("WEBGL_lose_context");f&&f.loseContext()}return e}catch(B){return!1}};d.sign=function(b){return 0===b?0:0>b?-1:1};d.destroyTextureCache=function(){var b=void 0;for(b in r)r[b].destroy();for(b in u)u[b].destroy()};d.clearTextureCache=function(){var b=void 0;for(b in r)delete r[b];for(b in u)delete u[b]};d.correctBlendMode=function(b,
c){return v[c?1:0][b]};d.premultiplyTint=function(b,c){return 1===c?(255*c<<24)+b:0===c?0:(255*c<<24)+(((b>>16&255)*c+.5|0)<<16)+(((b>>8&255)*c+.5|0)<<8)+((b&255)*c+.5|0)};d.premultiplyRgba=function(b,c,a,e){a=a||new Float32Array(4);e||void 0===e?(a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c):(a[0]=b[0],a[1]=b[1],a[2]=b[2]);a[3]=c;return a};d.premultiplyTintToRgba=function(b,c,a,e){a=a||new Float32Array(4);a[0]=(b>>16&255)/255;a[1]=(b>>8&255)/255;a[2]=(b&255)/255;if(e||void 0===e)a[0]*=c,a[1]*=c,a[2]*=c;a[3]=
c;return a};var c=a("../const");g=a("../settings");var f=h(g);g=a("eventemitter3");g=h(g);var b=a("./pluginTarget");b=h(b);var e=a("./mixin");e=k(e);var l=a("ismobilejs");l=k(l);var m=a("remove-array-items");m=h(m);a=a("./mapPremultipliedBlendModes");a=h(a);var q=0,x=!1;d.isMobile=l;d.removeItems=m.default;d.EventEmitter=g.default;d.pluginTarget=b.default;d.mixins=e;var r=d.TextureCache=Object.create(null),u=d.BaseTextureCache=Object.create(null),v=d.premultiplyBlendMode=(0,a.default)()},{"../const":46,
"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(a,g,d){d.__esModule=!0;d.default=function(){for(var a=[],c=[],f=0;32>f;f++)a[f]=f,c[f]=f;a[k.BLEND_MODES.NORMAL_NPM]=k.BLEND_MODES.NORMAL;a[k.BLEND_MODES.ADD_NPM]=k.BLEND_MODES.ADD;a[k.BLEND_MODES.SCREEN_NPM]=k.BLEND_MODES.SCREEN;c[k.BLEND_MODES.NORMAL]=k.BLEND_MODES.NORMAL_NPM;c[k.BLEND_MODES.ADD]=k.BLEND_MODES.ADD_NPM;c[k.BLEND_MODES.SCREEN]=
k.BLEND_MODES.SCREEN_NPM;f=[];f.push(c);f.push(a);return f};var k=a("../const")},{"../const":46}],127:[function(a,g,d){d.__esModule=!0;d.default=function(a){return k.default.tablet||k.default.phone?4:a};var k=(a=a("ismobilejs"))&&a.__esModule?a:{default:a}},{ismobilejs:4}],128:[function(a,g,d){function k(c,a){if(c&&a)for(var b=Object.keys(a),e=0;e<b.length;++e){var f=b[e];Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(a,f))}}d.__esModule=!0;d.mixin=k;d.delayMixin=function(c,a){h.push(c,
a)};d.performMixins=function(){for(var c=0;c<h.length;c+=2)k(h[c],h[c+1]);h.length=0};var h=[]},{}],129:[function(a,g,d){function k(a){a.__plugins={};a.registerPlugin=function(c,f){a.__plugins[c]=f};a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var c in a.__plugins)this.plugins[c]=new a.__plugins[c](this)};a.prototype.destroyPlugins=function(){for(var c in this.plugins)this.plugins[c].destroy(),this.plugins[c]=null;this.plugins=null}}d.__esModule=!0;d.default={mixin:function(a){k(a)}}},
{}],130:[function(a,g,d){d.__esModule=!0;d.default=function(a){var d=a.width,c=a.height;a=a.getContext("2d");c=a.getImageData(0,0,d,c).data;var f=c.length,b=null,e=null,l=null,g=null,k;for(k=0;k<f;k+=4)if(0!==c[k+3]){var x=k/4%d;var r=~~(k/4/d);null===b&&(b=r);null===e?e=x:x<e&&(e=x);null===l?l=x+1:l<x&&(l=x+1);null===g?g=r:g<r&&(g=r)}d=l-e;c=g-b+1;a=a.getImageData(e,b,d,c);return{height:c,width:d,data:a}}},{}],131:[function(a,g,d){function k(a){var c=Error().stack;"undefined"===typeof c?console.warn("Deprecation Warning: ",
a):(c=c.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(c),console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(c)))}d.__esModule=!0;d.default=function(a){var c=a.mesh,f=a.particles,b=a.extras,e=a.filters,d=a.prepare,h=a.loaders,g=a.interaction;Object.defineProperties(a,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");
}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.");}},Stage:{get:function(){k("You do not need to use a PIXI Stage any more, you can simply render any container.");return a.Container}},DisplayObjectContainer:{get:function(){k("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return a.Container}},Strip:{get:function(){k("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");
return c.Mesh}},Rope:{get:function(){k("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return c.Rope}},ParticleContainer:{get:function(){k("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.");return f.ParticleContainer}},MovieClip:{get:function(){k("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.");return b.AnimatedSprite}},TilingSprite:{get:function(){k("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");
return b.TilingSprite}},BitmapText:{get:function(){k("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return b.BitmapText}},blendModes:{get:function(){k("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return a.BLEND_MODES}},scaleModes:{get:function(){k("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return a.SCALE_MODES}},BaseTextureCache:{get:function(){k("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");
return a.utils.BaseTextureCache}},TextureCache:{get:function(){k("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return a.utils.TextureCache}},math:{get:function(){k("The math namespace is deprecated, please access members already accessible on PIXI.");return a}},AbstractFilter:{get:function(){k("AstractFilter has been renamed to Filter, please use PIXI.Filter");return a.Filter}},TransformManual:{get:function(){k("TransformManual has been renamed to TransformBase, please update your pixi-spine");
return a.TransformBase}},TARGET_FPMS:{get:function(){k("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");return a.settings.TARGET_FPMS},set:function(b){k("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");a.settings.TARGET_FPMS=b}},FILTER_RESOLUTION:{get:function(){k("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");return a.settings.FILTER_RESOLUTION},set:function(b){k("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");
a.settings.FILTER_RESOLUTION=b}},RESOLUTION:{get:function(){k("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");return a.settings.RESOLUTION},set:function(b){k("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");a.settings.RESOLUTION=b}},MIPMAP_TEXTURES:{get:function(){k("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");return a.settings.MIPMAP_TEXTURES},set:function(b){k("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");
a.settings.MIPMAP_TEXTURES=b}},SPRITE_BATCH_SIZE:{get:function(){k("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");return a.settings.SPRITE_BATCH_SIZE},set:function(b){k("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");a.settings.SPRITE_BATCH_SIZE=b}},SPRITE_MAX_TEXTURES:{get:function(){k("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");return a.settings.SPRITE_MAX_TEXTURES},
set:function(b){k("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");a.settings.SPRITE_MAX_TEXTURES=b}},RETINA_PREFIX:{get:function(){k("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");return a.settings.RETINA_PREFIX},set:function(b){k("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");a.settings.RETINA_PREFIX=b}},DEFAULT_RENDER_OPTIONS:{get:function(){k("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS");
return a.settings.RENDER_OPTIONS}}});for(var x=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],r=function(b){var c=x[b];Object.defineProperty(a[c.parent],"DEFAULT",{get:function(){k("PIXI."+c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));return a.settings[c.target]},set:function(b){k("PIXI."+
c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));a.settings[c.target]=b}})},u=0;u<x.length;u++)r(u);Object.defineProperties(a.settings,{PRECISION:{get:function(){k("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");return a.settings.PRECISION_FRAGMENT},set:function(b){k("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");a.settings.PRECISION_FRAGMENT=b}}});b.AnimatedSprite&&Object.defineProperties(b,
{MovieClip:{get:function(){k("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.");return b.AnimatedSprite}}});b&&Object.defineProperties(b,{TextureTransform:{get:function(){k("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on.");return a.TextureMatrix}}});a.DisplayObject.prototype.generateTexture=function(b,c,a){k("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");
return b.generateTexture(this,c,a)};a.Graphics.prototype.generateTexture=function(b,c){k("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(b,c)};a.GroupD8.isSwapWidthHeight=function(b){k("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical");return a.GroupD8.isVertical(b)};a.RenderTexture.prototype.render=function(b,c,a,e){this.legacyRenderer.render(b,this,a,c,!e);k("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};
a.RenderTexture.prototype.getImage=function(b){k("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(b)};a.RenderTexture.prototype.getBase64=function(b){k("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(b)};a.RenderTexture.prototype.getCanvas=function(b){k("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");
return this.legacyRenderer.extract.canvas(b)};a.RenderTexture.prototype.getPixels=function(b){k("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(b)};a.Sprite.prototype.setTexture=function(b){this.texture=b;k("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};b.BitmapText&&(b.BitmapText.prototype.setText=function(b){this.text=b;k("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});
a.Text.prototype.setText=function(b){this.text=b;k("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};a.Text.calculateFontProperties=function(b){k("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont");return a.TextMetrics.measureFont(b)};Object.defineProperties(a.Text,{fontPropertiesCache:{get:function(){k("Text.fontPropertiesCache is deprecated");return a.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){k("Text.fontPropertiesCanvas is deprecated");
return a.TextMetrics._canvas}},fontPropertiesContext:{get:function(){k("Text.fontPropertiesContext is deprecated");return a.TextMetrics._context}}});a.Text.prototype.setStyle=function(b){this.style=b;k("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};a.Text.prototype.determineFontProperties=function(b){k("determineFontProperties is now deprecated, please use TextMetrics.measureFont method");return a.TextMetrics.measureFont(b)};a.Text.getFontStyle=function(b){k("getFontStyle is now deprecated, please use TextStyle.toFontString() instead");
b=b||{};b instanceof a.TextStyle||(b=new a.TextStyle(b));return b.toFontString()};Object.defineProperties(a.TextStyle.prototype,{font:{get:function(){k("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+("number"===typeof this._fontSize?this._fontSize+"px":this._fontSize)+" "+this._fontFamily},set:function(b){k("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");
1<b.indexOf("italic")?this._fontStyle="italic":-1<b.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal";-1<b.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";b=b.split(" ");var c=-1;this._fontSize=26;for(var a=0;a<b.length;++a)if(b[a].match(/(px|pt|em|%)/)){c=a;this._fontSize=b[a];break}this._fontWeight="normal";for(a=0;a<c;++a)if(b[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=b[a];break}if(-1<c&&c<b.length-
1){this._fontFamily="";for(c+=1;c<b.length;++c)this._fontFamily+=b[c]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}});a.Texture.prototype.setFrame=function(b){this.frame=b;k("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};a.Texture.addTextureToCache=function(b,c){a.Texture.addToCache(b,c);k("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")};a.Texture.removeTextureFromCache=
function(b){k("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache");a.BaseTexture.removeFromCache(b);return a.Texture.removeFromCache(b)};Object.defineProperties(e,{AbstractFilter:{get:function(){k("AstractFilter has been renamed to Filter, please use PIXI.Filter");return a.AbstractFilter}},SpriteMaskFilter:{get:function(){k("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");
return a.SpriteMaskFilter}},VoidFilter:{get:function(){k("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter");return e.AlphaFilter}}});a.utils.uuid=function(){k("utils.uuid() is deprecated, please use utils.uid() from now on.");return a.utils.uid()};a.utils.canUseNewCanvasBlendModes=function(){k("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return a.CanvasTinter.canUseMultiply};var v=!0;Object.defineProperty(a.utils,
"_saidHello",{set:function(b){b&&(k("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello());v=b},get:function(){return v}});d.BasePrepare&&(d.BasePrepare.prototype.register=function(b,c){k("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook");b&&this.registerFindHook(b);c&&this.registerUploadHook(c);return this});d.canvas&&Object.defineProperty(d.canvas,"UPLOADS_PER_FRAME",
{set:function(){k("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){k("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});d.webgl&&Object.defineProperty(d.webgl,"UPLOADS_PER_FRAME",{set:function(){k("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},
get:function(){k("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});if(h.Loader){var w=h.Resource;d=h.Loader;Object.defineProperties(w.prototype,{isJson:{get:function(){k("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.");return this.type===w.TYPE.JSON}},isXml:{get:function(){k("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.");return this.type===w.TYPE.XML}},isImage:{get:function(){k("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.");
return this.type===w.TYPE.IMAGE}},isAudio:{get:function(){k("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.");return this.type===w.TYPE.AUDIO}},isVideo:{get:function(){k("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.");return this.type===w.TYPE.VIDEO}}});Object.defineProperties(d.prototype,{before:{get:function(){k("The before() method is deprecated, please use pre().");return this.pre}},after:{get:function(){k("The after() method is deprecated, please use use().");
return this.use}}})}g.interactiveTarget&&Object.defineProperty(g.interactiveTarget,"defaultCursor",{set:function(b){k("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=b},get:function(){k("Property defaultCursor has been replaced with 'cursor'. ");return this.cursor}});g.InteractionManager&&(Object.defineProperty(g.InteractionManager,"defaultCursorStyle",{set:function(b){k("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");this.cursorStyles.default=
b},get:function(){k("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");return this.cursorStyles.default}}),Object.defineProperty(g.InteractionManager,"currentCursorStyle",{set:function(b){k("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");this.currentCursorMode=b},get:function(){k("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");return this.currentCursorMode}}))}},
{}],132:[function(a,g,d){d.__esModule=!0;var k=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(a("../../core")),h=new k.Rectangle;a=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.renderer=a;a.extract=this}c.prototype.image=function(c){var b=new Image;b.src=this.base64(c);return b};c.prototype.base64=function(c){return this.canvas(c).toDataURL()};
c.prototype.canvas=function(c){var b=this.renderer,a=void 0,f=void 0;c&&(f=c instanceof k.RenderTexture?c:b.generateTexture(c));f?(c=f.baseTexture._canvasRenderTarget.context,a=f.baseTexture._canvasRenderTarget.resolution,b=f.frame):(c=b.rootContext,b=h,b.width=this.renderer.width,b.height=this.renderer.height);var d=b.width*a,g=b.height*a;f=new k.CanvasRenderTarget(d,g);a=c.getImageData(b.x*a,b.y*a,d,g);f.context.putImageData(a,0,0);return f.canvas};c.prototype.pixels=function(c){var b=this.renderer,
a=void 0;var f=void 0;c&&(f=c instanceof k.RenderTexture?c:b.generateTexture(c));f?(c=f.baseTexture._canvasRenderTarget.context,a=f.baseTexture._canvasRenderTarget.resolution,f=f.frame):(c=b.rootContext,f=h,f.width=b.width,f.height=b.height);return c.getImageData(0,0,f.width*a,f.height*a).data};c.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return c}();d.default=a;k.CanvasRenderer.registerPlugin("extract",a)},{"../../core":65}],133:[function(a,g,d){d.__esModule=!0;var k=
a("./webgl/WebGLExtract");Object.defineProperty(d,"webgl",{enumerable:!0,get:function(){return(k&&k.__esModule?k:{default:k}).default}});var h=a("./canvas/CanvasExtract");Object.defineProperty(d,"canvas",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(a,g,d){d.__esModule=!0;var k=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&
(a[b]=c[b]);a.default=c;return a}(a("../../core")),h=new k.Rectangle;a=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.renderer=a;a.extract=this}c.prototype.image=function(c){var b=new Image;b.src=this.base64(c);return b};c.prototype.base64=function(c){return this.canvas(c).toDataURL()};c.prototype.canvas=function(c){var b=this.renderer;var a=void 0;c&&(a=c instanceof k.RenderTexture?c:this.renderer.generateTexture(c));if(a){var f=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];
c=f.resolution;var d=a.frame;a=!1}else f=this.renderer.rootRenderTarget,c=f.resolution,a=!0,d=h,d.width=f.size.width,d.height=f.size.height;var g=d.width*c,x=d.height*c,r=new k.CanvasRenderTarget(g,x);f&&(b.bindRenderTarget(f),f=new Uint8Array(4*g*x),b=b.gl,b.readPixels(d.x*c,d.y*c,g,x,b.RGBA,b.UNSIGNED_BYTE,f),b=r.context.getImageData(0,0,g,x),b.data.set(f),r.context.putImageData(b,0,0),a&&(r.context.scale(1,-1),r.context.drawImage(r.canvas,0,-x)));return r.canvas};c.prototype.pixels=function(c){var b=
this.renderer;var a=void 0;c&&(a=c instanceof k.RenderTexture?c:this.renderer.generateTexture(c));if(a){var f=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];c=f.resolution;a=a.frame}else f=this.renderer.rootRenderTarget,c=f.resolution,a=h,a.width=f.size.width,a.height=f.size.height;var d=a.width*c,g=a.height*c,x=new Uint8Array(4*d*g);f&&(b.bindRenderTarget(f),b=b.gl,b.readPixels(a.x*c,a.y*c,d,g,b.RGBA,b.UNSIGNED_BYTE,x));return x};c.prototype.destroy=function(){this.renderer=this.renderer.extract=
null};return c}();d.default=a;k.WebGLRenderer.registerPlugin("extract",a)},{"../../core":65}],135:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;var h=function(){function c(b,c){for(var a=0;a<c.length;a++){var e=
c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),c=function(c){if(c&&c.__esModule)return c;var b={};if(null!=c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a]);b.default=c;return b}(a("../core"));a=function(a){function b(e,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=a.call(this,e[0]instanceof c.Texture?
e[0]:e[0].texture);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d._textures=null;d._durations=null;d.textures=e;d._autoUpdate=!1!==f;d.animationSpeed=1;d.loop=!0;d.onComplete=null;d.onFrameChange=null;d.onLoop=null;d._currentTime=0;d.playing=!1;return d}k(b,a);b.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&c.ticker.shared.remove(this.update,this))};b.prototype.play=
function(){this.playing||(this.playing=!0,this._autoUpdate&&c.ticker.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH))};b.prototype.gotoAndStop=function(b){this.stop();var c=this.currentFrame;this._currentTime=b;c!==this.currentFrame&&this.updateTexture()};b.prototype.gotoAndPlay=function(b){var c=this.currentFrame;this._currentTime=b;c!==this.currentFrame&&this.updateTexture();this.play()};b.prototype.update=function(b){var c=this.animationSpeed*b,a=this.currentFrame;if(null!==this._durations){var e=
this._currentTime%1*this._durations[this.currentFrame];for(e+=c/60*1E3;0>e;)this._currentTime--,e+=this._durations[this.currentFrame];b=Math.sign(this.animationSpeed*b);for(this._currentTime=Math.floor(this._currentTime);e>=this._durations[this.currentFrame];)e-=this._durations[this.currentFrame]*b,this._currentTime+=b;this._currentTime+=e/this._durations[this.currentFrame]}else this._currentTime+=c;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=
this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else if(a!==this.currentFrame){if(this.loop&&this.onLoop)if(0<this.animationSpeed&&this.currentFrame<a)this.onLoop();else if(0>this.animationSpeed&&this.currentFrame>a)this.onLoop();this.updateTexture()}};b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame];this._textureID=-1;this.cachedTint=16777215;if(this.onFrameChange)this.onFrameChange(this.currentFrame)};
b.prototype.destroy=function(b){this.stop();a.prototype.destroy.call(this,b)};b.fromFrames=function(a){for(var e=[],f=0;f<a.length;++f)e.push(c.Texture.fromFrame(a[f]));return new b(e)};b.fromImages=function(a){for(var e=[],f=0;f<a.length;++f)e.push(c.Texture.fromImage(a[f]));return new b(e)};h(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(b){if(b[0]instanceof c.Texture)this._textures=b,this._durations=null;else{this._textures=
[];this._durations=[];for(var a=0;a<b.length;a++)this._textures.push(b[a].texture),this._durations.push(b[a].time)}this.gotoAndStop(0);this.updateTexture()}},{key:"currentFrame",get:function(){var b=Math.floor(this._currentTime)%this._textures.length;0>b&&(b+=this._textures.length);return b}}]);return b}(c.Sprite);d.default=a},{"../core":65}],136:[function(a,g,d){function k(b,c){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&
"function"!==typeof c?b:c}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),f=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),b=(g=a("../core/math/ObservablePoint"))&&g.__esModule?g:{default:g},e=a("../core/utils"),l=(a=a("../core/settings"))&&a.__esModule?a:{default:a};a=function(a){function d(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{};if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var f=k(this,a.call(this));f._textWidth=0;f._textHeight=0;f._glyphs=[];f._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0};f.font=e.font;f._text=c;f._maxWidth=0;f._maxLineHeight=0;f._anchor=new b.default(function(){f.dirty=!0},f,0,0);f.dirty=!1;f.updateText();return f}h(d,a);d.prototype.updateText=function(){for(var b=d.fonts[this._font.name],c=this._font.size/b.size,a=new f.Point,
e=[],l=[],h=null,g=0,k=0,m=0,q=-1,D=0,E=0,C=0,F=0;F<this.text.length;F++){var G=this.text.charCodeAt(F);/(\s)/.test(this.text.charAt(F))&&(q=F,D=g);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(F)))l.push(g),k=Math.max(k,g),m++,a.x=0,a.y+=b.lineHeight,h=null;else if(-1!==q&&0<this._maxWidth&&a.x*c>this._maxWidth)f.utils.removeItems(e,q-E,F-q),F=q,q=-1,++E,l.push(D),k=Math.max(k,D),m++,a.x=0,a.y+=b.lineHeight,h=null;else{var H=b.chars[G];H&&(h&&H.kerning[h]&&(a.x+=H.kerning[h]),e.push({texture:H.texture,
line:m,charCode:G,position:new f.Point(a.x+H.xOffset,a.y+H.yOffset)}),g=a.x+(H.texture.width+H.xOffset),a.x+=H.xAdvance,C=Math.max(C,H.yOffset+H.texture.height),h=G)}}l.push(g);k=Math.max(k,g);h=[];for(g=0;g<=m;g++)q=0,"right"===this._font.align?q=k-l[g]:"center"===this._font.align&&(q=(k-l[g])/2),h.push(q);l=e.length;m=this.tint;for(g=0;g<l;g++)(q=this._glyphs[g])?q.texture=e[g].texture:(q=new f.Sprite(e[g].texture),this._glyphs.push(q)),q.position.x=(e[g].position.x+h[e[g].line])*c,q.position.y=
e[g].position.y*c,q.scale.x=q.scale.y=c,q.tint=m,q.parent||this.addChild(q);for(e=l;e<this._glyphs.length;++e)this.removeChild(this._glyphs[e]);this._textWidth=k*c;this._textHeight=(a.y+b.lineHeight)*c;if(0!==this.anchor.x||0!==this.anchor.y)for(b=0;b<l;b++)this._glyphs[b].x-=this._textWidth*this.anchor.x,this._glyphs[b].y-=this._textHeight*this.anchor.y;this._maxLineHeight=C*c};d.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};d.prototype.getLocalBounds=function(){this.validate();
return a.prototype.getLocalBounds.call(this)};d.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};d.registerFont=function(b,c){var a={},h=b.getElementsByTagName("info")[0],g=b.getElementsByTagName("common")[0],k=b.getElementsByTagName("page")[0].getAttribute("file");k=(0,e.getResolutionOfUrl)(k,l.default.RESOLUTION);a.font=h.getAttribute("face");a.size=parseInt(h.getAttribute("size"),10);a.lineHeight=parseInt(g.getAttribute("lineHeight"),10)/k;a.chars={};h=b.getElementsByTagName("char");
for(g=0;g<h.length;g++){var m=h[g],q=parseInt(m.getAttribute("id"),10),r=new f.Rectangle(parseInt(m.getAttribute("x"),10)/k+c.frame.x/k,parseInt(m.getAttribute("y"),10)/k+c.frame.y/k,parseInt(m.getAttribute("width"),10)/k,parseInt(m.getAttribute("height"),10)/k);a.chars[q]={xOffset:parseInt(m.getAttribute("xoffset"),10)/k,yOffset:parseInt(m.getAttribute("yoffset"),10)/k,xAdvance:parseInt(m.getAttribute("xadvance"),10)/k,kerning:{},texture:new f.Texture(c.baseTexture,r)}}b=b.getElementsByTagName("kerning");
for(c=0;c<b.length;c++)m=b[c],h=parseInt(m.getAttribute("first"),10)/k,g=parseInt(m.getAttribute("second"),10)/k,m=parseInt(m.getAttribute("amount"),10)/k,a.chars[g]&&(a.chars[g].kerning[h]=m);return d.fonts[a.font]=a};c(d,[{key:"tint",get:function(){return this._font.tint},set:function(b){this._font.tint="number"===typeof b&&0<=b?b:16777215;this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(b){this._font.align=b||"left";this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},
set:function(b){"number"===typeof b?this._anchor.set(b):this._anchor.copy(b)}},{key:"font",get:function(){return this._font},set:function(b){b&&("string"===typeof b?(b=b.split(" "),this._font.name=1===b.length?b[0]:b.slice(1).join(" "),this._font.size=2<=b.length?parseInt(b[0],10):d.fonts[this._font.name].size):(this._font.name=b.name,this._font.size="number"===typeof b.size?b.size:parseInt(b.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(b){b=b.toString()||
" ";this._text!==b&&(this._text=b,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(b){this._maxWidth!==b&&(this._maxWidth=b,this.dirty=!0)}},{key:"maxLineHeight",get:function(){this.validate();return this._maxLineHeight}},{key:"textWidth",get:function(){this.validate();return this._textWidth}},{key:"textHeight",get:function(){this.validate();return this._textHeight}}]);return d}(f.Container);d.default=a;a.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,
"../core/settings":101,"../core/utils":125}],137:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),c=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),f=(a=a("../core/sprites/canvas/CanvasTinter"))&&a.__esModule?a:{default:a},b=new c.Point;a=function(a){function e(b){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,d=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:100;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var h=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.tileTransform=new c.TransformStatic;h._width=f;h._height=d;h._canvasPattern=null;h.uvTransform=b.transform||new c.TextureMatrix(b);h.pluginName="tilingSprite";h.uvRespectAnchor=!1;return h}k(e,a);e.prototype._onTextureUpdate=
function(){this.uvTransform&&(this.uvTransform.texture=this._texture);this.cachedTint=16777215};e.prototype._renderWebGL=function(b){var c=this._texture;c&&c.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),b.setObjectRenderer(b.plugins[this.pluginName]),b.plugins[this.pluginName].render(this))};e.prototype._renderCanvas=function(b){var a=this._texture;if(a.baseTexture.hasLoaded){var e=b.context,d=this.worldTransform,h=b.resolution,l=a.baseTexture,g=l.resolution,k=this.tilePosition.x/
this.tileScale.x%a._frame.width*g,m=this.tilePosition.y/this.tileScale.y%a._frame.height*g;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var y=new c.CanvasRenderTarget(a._frame.width,a._frame.height,g);16777215!==this.tint?(this.tintedTexture=f.default.getTintedTexture(this,this.tint),y.context.drawImage(this.tintedTexture,0,0)):y.context.drawImage(l.source,-a._frame.x*g,-a._frame.y*g);this.cachedTint=this.tint;this._canvasPattern=
y.context.createPattern(y.canvas,"repeat")}e.globalAlpha=this.worldAlpha;e.setTransform(d.a*h,d.b*h,d.c*h,d.d*h,d.tx*h,d.ty*h);b.setBlendMode(this.blendMode);e.fillStyle=this._canvasPattern;e.scale(this.tileScale.x/g,this.tileScale.y/g);b=this.anchor.x*-this._width;a=this.anchor.y*-this._height;this.uvRespectAnchor?(e.translate(k,m),e.fillRect(-k+b,-m+a,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g)):(e.translate(k+b,m+a),e.fillRect(-k,-m,this._width/this.tileScale.x*g,this._height/
this.tileScale.y*g))}};e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))};e.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||
(this._localBoundsRect=new c.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)};e.prototype.containsPoint=function(c){this.worldTransform.applyInverse(c,b);var a=this._width;c=this._height;var e=-a*this.anchor._x;return b.x>=e&&b.x<e+a&&(a=-c*this.anchor._y,b.y>=a&&b.y<a+c)?!0:!1};e.prototype.destroy=function(b){a.prototype.destroy.call(this,b);this.uvTransform=this.tileTransform=null};e.from=function(b,a,f){return new e(c.Texture.from(b),a,
f)};e.fromFrame=function(b,a,f){var d=c.utils.TextureCache[b];if(!d)throw Error('The frameId "'+b+'" does not exist in the texture cache '+this);return new e(d,a,f)};e.fromImage=function(b,a,f,d,h){return new e(c.Texture.fromImage(b,d,h),a,f)};h(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(b){this.uvTransform.clampMargin=b;this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(b){this.tileTransform.scale.copy(b)}},
{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(b){this.tileTransform.position.copy(b)}},{key:"width",get:function(){return this._width},set:function(b){this._width=b}},{key:"height",get:function(){return this._height},set:function(b){this._height=b}}]);return e}(c.Sprite);d.default=a},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(a,g,d){var k=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,
a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),h=(g=a("../core/textures/Texture"))&&g.__esModule?g:{default:g},c=(g=a("../core/textures/BaseTexture"))&&g.__esModule?g:{default:g},f=a("../core/utils");a=k.DisplayObject;var b=new k.Matrix;a.prototype._cacheAsBitmap=!1;a.prototype._cacheData=!1;var e=function m(){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.sprite=this.originalFilterArea=this.originalMask=this.originalDestroy=this.originalHitTest=this.originalUpdateTransform=
this.originalGetLocalBounds=this.originalCalculateBounds=this.originalRenderCanvas=this.originalRenderWebGL=this.textureCacheId=null};Object.defineProperties(a.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(b){this._cacheAsBitmap!==b&&((this._cacheAsBitmap=b)?(this._cacheData||(this._cacheData=new e),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=
this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,
this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea))}}});a.prototype._renderCachedWebGL=function(b){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObject(b),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(b))};a.prototype._initCachedDisplayObject=
function(a){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1;a.currentRenderer.flush();var d=this.getLocalBounds().clone();this._filters&&d.pad(this._filters[0].padding);var g=a._activeRenderTarget,m=a.filterManager.filterStack,v=k.RenderTexture.create(d.width|0,d.height|0),w="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=w;c.default.addToCache(v.baseTexture,w);h.default.addToCache(v,w);b.tx=-d.x;b.ty=-d.y;this.transform.worldTransform.identity();this.renderWebGL=
this._cacheData.originalRenderWebGL;a.render(this,v,!0,b,!0);a.bindRenderTarget(g);a.filterManager.filterStack=m;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.filterArea=this._mask=null;g=new k.Sprite(v);g.transform.worldTransform=this.transform.worldTransform;g.anchor.x=-(d.x/d.width);g.anchor.y=-(d.y/d.height);g.alpha=e;g._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=
g;this.transform._parentID=-1;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.containsPoint=g.containsPoint.bind(g)}};a.prototype._renderCachedCanvas=function(b){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObjectCanvas(b),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(b))};a.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var e=
this.getLocalBounds(),d=this.alpha;this.alpha=1;var g=a.context,m=k.RenderTexture.create(e.width|0,e.height|0),v="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=v;c.default.addToCache(m.baseTexture,v);h.default.addToCache(m,v);this.transform.localTransform.copy(b);b.invert();b.tx-=e.x;b.ty-=e.y;this.renderCanvas=this._cacheData.originalRenderCanvas;a.render(this,m,!0,b,!1);a.context=g;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this.filterArea=
this._mask=null;g=new k.Sprite(m);g.transform.worldTransform=this.transform.worldTransform;g.anchor.x=-(e.x/e.width);g.anchor.y=-(e.y/e.height);g._bounds=this._bounds;g.alpha=d;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=g;this.containsPoint=g.containsPoint.bind(g)}};a.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()};
a.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()};a.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0);this._cacheData.sprite=null;c.default.removeFromCache(this._cacheData.textureCacheId);h.default.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};a.prototype._cacheAsBitmapDestroy=function(b){this.cacheAsBitmap=!1;this.destroy(b)}},{"../core":65,"../core/textures/BaseTexture":112,
"../core/textures/Texture":115,"../core/utils":125}],139:[function(a,g,d){a=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);d.default=a;return d}(a("../core"));a.DisplayObject.prototype.name=null;a.Container.prototype.getChildByName=function(a){for(var d=0;d<this.children.length;d++)if(this.children[d].name===a)return this.children[d];return null}},{"../core":65}],140:[function(a,g,d){var k=function(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(c[f]=a[f]);c.default=a;return c}(a("../core"));k.DisplayObject.prototype.getGlobalPosition=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new k.Point,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.parent?this.parent.toGlobal(this.position,a,c):(a.x=this.position.x,a.y=this.position.y);return a}},{"../core":65}],141:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}
d.__esModule=!0;d.BitmapText=d.TilingSpriteRenderer=d.TilingSprite=d.AnimatedSprite=void 0;var h=a("./AnimatedSprite");Object.defineProperty(d,"AnimatedSprite",{enumerable:!0,get:function(){return k(h).default}});var c=a("./TilingSprite");Object.defineProperty(d,"TilingSprite",{enumerable:!0,get:function(){return k(c).default}});var f=a("./webgl/TilingSpriteRenderer");Object.defineProperty(d,"TilingSpriteRenderer",{enumerable:!0,get:function(){return k(f).default}});var b=a("./BitmapText");Object.defineProperty(d,
"BitmapText",{enumerable:!0,get:function(){return k(b).default}});a("./cacheAsBitmap");a("./getChildByName");a("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,
{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core")),c=a("../../core/const");a("path");var f=new h.Matrix;a=function(b){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");c=b.call(this,
c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;c.simpleShader=null;c.quad=null;return c}k(a,b);a.prototype.onContextChange=function(){var b=this.renderer.gl;this.shader=new h.Shader(b,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n");this.simpleShader=new h.Shader(b,
"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n");
this.renderer.bindVao(null);this.quad=new h.Quad(b,this.renderer.state.attribState);this.quad.initVao(this.shader)};a.prototype.render=function(b){var a=this.renderer,e=this.quad;a.bindVao(e.vao);var d=e.vertices;d[0]=d[6]=b._width*-b.anchor.x;d[1]=d[3]=b._height*-b.anchor.y;d[2]=d[4]=b._width*(1-b.anchor.x);d[5]=d[7]=b._height*(1-b.anchor.y);b.uvRespectAnchor&&(d=e.uvs,d[0]=d[6]=-b.anchor.x,d[1]=d[3]=-b.anchor.y,d[2]=d[4]=1-b.anchor.x,d[5]=d[7]=1-b.anchor.y);e.upload();d=b._texture;var l=d.baseTexture,
g=b.tileTransform.localTransform,k=b.uvTransform,w=l.isPowerOfTwo&&d.frame.width===l.width&&d.frame.height===l.height;w&&(l._glTextures[a.CONTEXT_UID]?w=l.wrapMode!==c.WRAP_MODES.CLAMP:l.wrapMode===c.WRAP_MODES.CLAMP&&(l.wrapMode=c.WRAP_MODES.REPEAT));var t=w?this.simpleShader:this.shader;a.bindShader(t);var A=d.width,y=d.height,z=b._width,B=b._height;f.set(g.a*A/z,g.b*A/B,g.c*y/z,g.d*y/B,g.tx/z,g.ty/B);f.invert();w?f.prepend(k.mapCoord):(t.uniforms.uMapCoord=k.mapCoord.toArray(!0),t.uniforms.uClampFrame=
k.uClampFrame,t.uniforms.uClampOffset=k.uClampOffset);t.uniforms.uTransform=f.toArray(!0);t.uniforms.uColor=h.utils.premultiplyTintToRgba(b.tint,b.worldAlpha,t.uniforms.uColor,l.premultipliedAlpha);t.uniforms.translationMatrix=b.transform.worldTransform.toArray(!0);t.uniforms.uSampler=a.bindTexture(d);a.setBlendMode(h.utils.correctBlendMode(b.blendMode,l.premultipliedAlpha));e.vao.draw(this.renderer.gl.TRIANGLES,6,0)};return a}(h.ObjectRenderer);d.default=a;h.WebGLRenderer.registerPlugin("tilingSprite",
a)},{"../../core":65,"../../core/const":46,path:23}],143:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=function(){function c(c,b){for(var a=0;a<b.length;a++){var f=b[a];f.enumerable=f.enumerable||
!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();g=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(a("../../core"));a("path");a=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var e=c.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.alpha=b;e.glShaderKey="alpha";return e}k(a,c);h(a,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(b){this.uniforms.uAlpha=b}}]);return a}(g.Filter);d.default=a},{"../../core":65,path:23}],144:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,
writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),c=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=
b;return c}(a("../../core")),f=(g=a("./BlurXFilter"))&&g.__esModule?g:{default:g},b=(a=a("./BlurYFilter"))&&a.__esModule?a:{default:a};a=function(a){function e(d,h,l,g){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var k=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k.blurXFilter=new f.default(d,h,l,g);k.blurYFilter=new b.default(d,h,l,g);k.padding=
0;k.resolution=l||c.settings.RESOLUTION;k.quality=h||4;k.blur=d||8;return k}k(e,a);e.prototype.apply=function(b,c,a){var e=b.getRenderTarget(!0);this.blurXFilter.apply(b,c,e,!0);this.blurYFilter.apply(b,e,a,!1);b.returnRenderTarget(e)};h(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(b){this.blurXFilter.blur=this.blurYFilter.blur=b;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},
set:function(b){this.blurXFilter.quality=this.blurYFilter.quality=b}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(b){this.blurXFilter.blur=b;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(b){this.blurYFilter.blur=b;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},
set:function(b){this.blurYFilter._blendMode=b}}]);return e}(c.Filter);d.default=a},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,
c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),f=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core"));g=a("./generateBlurVertSource");var b=k(g);g=a("./generateBlurFragSource");
var e=k(g);a=a("./getMaxBlurKernelSize");var l=k(a);a=function(a){function d(c,h,l,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");g=g||5;var k=(0,b.default)(g,!0);g=(0,e.default)(g);k=a.call(this,k,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k.resolution=l||f.settings.RESOLUTION;k._quality=0;k.quality=h||4;k.strength=c||8;k.firstRun=!0;return k}h(d,a);
d.prototype.apply=function(c,a,f,d){if(this.firstRun){var h=c.renderer.gl;h=(0,l.default)(h);this.vertexSrc=(0,b.default)(h,!0);this.fragmentSrc=(0,e.default)(h);this.firstRun=!1}this.uniforms.strength=1/f.size.width*(f.size.width/a.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)c.applyFilter(this,a,f,d);else{for(var g=h=c.getRenderTarget(!0),k=0;k<this.passes-1;k++){c.applyFilter(this,a,g,!0);var m=g;g=a;a=m}c.applyFilter(this,a,f,d);c.returnRenderTarget(h)}};
c(d,[{key:"blur",get:function(){return this.strength},set:function(b){this.padding=2*Math.abs(b);this.strength=b}},{key:"quality",get:function(){return this._quality},set:function(b){this.passes=this._quality=b}}]);return d}(f.Filter);d.default=a},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),f=function(b){if(b&&b.__esModule)return b;var c={};
if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core"));g=a("./generateBlurVertSource");var b=k(g);g=a("./generateBlurFragSource");var e=k(g);a=a("./getMaxBlurKernelSize");var l=k(a);a=function(a){function d(c,h,l,g){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");g=g||5;var k=(0,b.default)(g,!1);g=(0,e.default)(g);k=a.call(this,k,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k.resolution=l||f.settings.RESOLUTION;k._quality=0;k.quality=h||4;k.strength=c||8;k.firstRun=!0;return k}h(d,a);d.prototype.apply=function(c,a,f,d){if(this.firstRun){var h=c.renderer.gl;h=(0,l.default)(h);this.vertexSrc=(0,b.default)(h,!1);this.fragmentSrc=(0,e.default)(h);this.firstRun=!1}this.uniforms.strength=1/f.size.height*(f.size.height/a.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)c.applyFilter(this,
a,f,d);else{for(var g=h=c.getRenderTarget(!0),k=0;k<this.passes-1;k++){c.applyFilter(this,a,g,!0);var m=g;g=a;a=m}c.applyFilter(this,a,f,d);c.returnRenderTarget(h)}};c(d,[{key:"blur",get:function(){return this.strength},set:function(b){this.padding=2*Math.abs(b);this.strength=b}},{key:"quality",get:function(){return this._quality},set:function(b){this.passes=this._quality=b}}]);return d}(f.Filter);d.default=a},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],
147:[function(a,g,d){d.__esModule=!0;d.default=function(c){for(var a=k[c],b=a.length,e=h,d="",g,q=0;q<c;q++){var x="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",q);g=q;q>=b&&(g=c-q-1);x=x.replace("%value%",a[g]);d+=x;d+="\n"}e=e.replace("%blur%",d);return e=e.replace("%size%",c)};var k={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,
.009255,.027867,.065666,.121117,.174868,.197641],15:[4.89E-4,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},h="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],148:[function(a,g,d){d.__esModule=!0;d.default=function(a,c){var f=Math.ceil(a/2),b=k,e="";c=c?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";
for(var d=0;d<a;d++){var h=c.replace("%index%",d);h=h.replace("%sampleIndex%",d-(f-1)+".0");e+=h;e+="\n"}b=b.replace("%blur%",e);return b=b.replace("%size%",a)};var k="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],149:[function(a,g,d){d.__esModule=!0;d.default=function(a){a=
a.getParameter(a.MAX_VARYING_VECTORS);for(var d=15;d>a;)d-=2;return d}},{}],150:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=function(){function c(c,b){for(var a=0;a<b.length;a++){var f=b[a];
f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();g=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(a("../../core"));a("path");a=function(c){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=c.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];b.alpha=1;return b}k(a,c);a.prototype._loadMatrix=function(b){var c=b;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(c,this.uniforms.m,b),c=this._colorMatrix(c));this.uniforms.m=c};a.prototype._multiply=function(b,c,a){b[0]=c[0]*a[0]+c[1]*a[5]+c[2]*a[10]+c[3]*a[15];b[1]=
c[0]*a[1]+c[1]*a[6]+c[2]*a[11]+c[3]*a[16];b[2]=c[0]*a[2]+c[1]*a[7]+c[2]*a[12]+c[3]*a[17];b[3]=c[0]*a[3]+c[1]*a[8]+c[2]*a[13]+c[3]*a[18];b[4]=c[0]*a[4]+c[1]*a[9]+c[2]*a[14]+c[3]*a[19]+c[4];b[5]=c[5]*a[0]+c[6]*a[5]+c[7]*a[10]+c[8]*a[15];b[6]=c[5]*a[1]+c[6]*a[6]+c[7]*a[11]+c[8]*a[16];b[7]=c[5]*a[2]+c[6]*a[7]+c[7]*a[12]+c[8]*a[17];b[8]=c[5]*a[3]+c[6]*a[8]+c[7]*a[13]+c[8]*a[18];b[9]=c[5]*a[4]+c[6]*a[9]+c[7]*a[14]+c[8]*a[19]+c[9];b[10]=c[10]*a[0]+c[11]*a[5]+c[12]*a[10]+c[13]*a[15];b[11]=c[10]*a[1]+c[11]*
a[6]+c[12]*a[11]+c[13]*a[16];b[12]=c[10]*a[2]+c[11]*a[7]+c[12]*a[12]+c[13]*a[17];b[13]=c[10]*a[3]+c[11]*a[8]+c[12]*a[13]+c[13]*a[18];b[14]=c[10]*a[4]+c[11]*a[9]+c[12]*a[14]+c[13]*a[19]+c[14];b[15]=c[15]*a[0]+c[16]*a[5]+c[17]*a[10]+c[18]*a[15];b[16]=c[15]*a[1]+c[16]*a[6]+c[17]*a[11]+c[18]*a[16];b[17]=c[15]*a[2]+c[16]*a[7]+c[17]*a[12]+c[18]*a[17];b[18]=c[15]*a[3]+c[16]*a[8]+c[17]*a[13]+c[18]*a[18];b[19]=c[15]*a[4]+c[16]*a[9]+c[17]*a[14]+c[18]*a[19]+c[19];return b};a.prototype._colorMatrix=function(b){b=
new Float32Array(b);b[4]/=255;b[9]/=255;b[14]/=255;b[19]/=255;return b};a.prototype.brightness=function(b,c){this._loadMatrix([b,0,0,0,0,0,b,0,0,0,0,0,b,0,0,0,0,0,1,0],c)};a.prototype.greyscale=function(b,c){this._loadMatrix([b,b,b,0,0,b,b,b,0,0,b,b,b,0,0,0,0,0,1,0],c)};a.prototype.blackAndWhite=function(b){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],b)};a.prototype.hue=function(b,c){b=(b||0)/180*Math.PI;var a=Math.cos(b);b=Math.sin(b);var e=Math.sqrt,f=1/3;e=e(f);this._loadMatrix([a+
(1-a)*f,f*(1-a)-e*b,f*(1-a)+e*b,0,0,f*(1-a)+e*b,a+f*(1-a),f*(1-a)-e*b,0,0,f*(1-a)-e*b,f*(1-a)+e*b,a+f*(1-a),0,0,0,0,0,1,0],c)};a.prototype.contrast=function(b,c){b=(b||0)+1;var a=-.5*(b-1);this._loadMatrix([b,0,0,0,a,0,b,0,0,a,0,0,b,0,a,0,0,0,1,0],c)};a.prototype.saturate=function(){var b=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,c=-.5*(b-1);this._loadMatrix([b,c,c,0,0,c,b,c,0,0,c,c,b,0,0,0,0,0,1,0],arguments[1])};a.prototype.desaturate=function(){this.saturate(-1)};a.prototype.negative=
function(b){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],b)};a.prototype.sepia=function(b){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],b)};a.prototype.technicolor=function(b){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,
0,0,0,1,0],b)};a.prototype.polaroid=function(b){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],b)};a.prototype.toBGR=function(b){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],b)};a.prototype.kodachrome=function(b){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,
0,35.62982807460946,0,0,0,1,0],b)};a.prototype.browni=function(b){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],b)};a.prototype.vintage=function(b){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,
0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],b)};a.prototype.colorTone=function(b,c,a,f,d){a=a||16770432;f=f||3375104;var e=(a>>16&255)/255,h=(a>>8&255)/255;a=(a&255)/255;var g=(f>>16&255)/255,k=(f>>8&255)/255;f=(f&255)/255;this._loadMatrix([.3,.59,.11,0,0,e,h,a,b||.2,0,g,k,f,c||.15,0,e-g,h-k,a-f,0,0],d)};a.prototype.night=function(b,c){b=b||.1;this._loadMatrix([-2*b,-b,0,0,0,-b,0,b,0,0,0,b,2*b,0,0,0,0,0,1,0],c)};a.prototype.predator=function(b,
c){this._loadMatrix([11.224130630493164*b,-4.794486999511719*b,-2.8746118545532227*b,0*b,.40342438220977783*b,-3.6330697536468506*b,9.193157196044922*b,-2.951810836791992*b,0*b,-1.316135048866272*b,-3.2184197902679443*b,-4.2375030517578125*b,7.476448059082031*b,0*b,.8044459223747253*b,0,0,0,1,0],c)};a.prototype.lsd=function(b){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],b)};a.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};h(a,[{key:"matrix",
get:function(){return this.uniforms.m},set:function(b){this.uniforms.m=b}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(b){this.uniforms.uAlpha=b}}]);return a}(g.Filter);d.default=a;a.prototype.grayscale=a.prototype.greyscale},{"../../core":65,path:23}],151:[function(a,g,d){function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}d.__esModule=!0;var h=function(){function c(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),c=function(c){if(c&&c.__esModule)return c;var b={};if(null!=c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=
c[a]);b.default=c;return b}(a("../../core"));a("path");a=function(a){function b(e,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=new c.Matrix;e.renderable=!1;var h=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}",
"varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.maskSprite=e;h.maskMatrix=d;h.uniforms.mapSampler=e._texture;h.uniforms.filterMatrix=d;h.uniforms.scale={x:1,y:1};if(null===f||void 0===f)f=20;h.scale=new c.Point(f,f);return h}k(b,a);b.prototype.apply=function(b,c,a){var e=1/a.destinationFrame.width*(a.size.width/c.size.width);this.uniforms.filterMatrix=b.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x*e;this.uniforms.scale.y=this.scale.y*e;b.applyFilter(this,
c,a)};h(b,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(b){this.uniforms.mapSampler=b}}]);return b}(c.Filter);d.default=a},{"../../core":65,path:23}],152:[function(a,g,d){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=
c)}d.__esModule=!0;g=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(c[f]=a[f]);c.default=a;return c}(a("../../core"));a("path");a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",
'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n');
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}k(c,a);return c}(g.Filter);d.default=a},{"../../core":65,path:23}],153:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;var h=a("./fxaa/FXAAFilter");Object.defineProperty(d,"FXAAFilter",{enumerable:!0,get:function(){return k(h).default}});var c=a("./noise/NoiseFilter");Object.defineProperty(d,"NoiseFilter",{enumerable:!0,
get:function(){return k(c).default}});var f=a("./displacement/DisplacementFilter");Object.defineProperty(d,"DisplacementFilter",{enumerable:!0,get:function(){return k(f).default}});var b=a("./blur/BlurFilter");Object.defineProperty(d,"BlurFilter",{enumerable:!0,get:function(){return k(b).default}});var e=a("./blur/BlurXFilter");Object.defineProperty(d,"BlurXFilter",{enumerable:!0,get:function(){return k(e).default}});var l=a("./blur/BlurYFilter");Object.defineProperty(d,"BlurYFilter",{enumerable:!0,
get:function(){return k(l).default}});var m=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(d,"ColorMatrixFilter",{enumerable:!0,get:function(){return k(m).default}});var q=a("./alpha/AlphaFilter");Object.defineProperty(d,"AlphaFilter",{enumerable:!0,get:function(){return k(q).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,
"./noise/NoiseFilter":154}],154:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=function(){function c(c,b){for(var a=0;a<b.length;a++){var f=b[a];f.enumerable=f.enumerable||!1;f.configurable=!0;
"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();g=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(a("../../core"));a("path");a=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var f=c.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.noise=b;f.seed=e;return f}k(a,c);h(a,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(b){this.uniforms.uNoise=b}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(b){this.uniforms.uSeed=b}}]);return a}(g.Filter);d.default=a},{"../../core":65,path:23}],155:[function(a,g,d){d.__esModule=!0;var k=function(){function c(c,
b){for(var a=0;a<b.length;a++){var f=b[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),h=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(a("../core"));a=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.global=
new h.Point;this.identifier=this.originalEvent=this.target=null;this.isPrimary=!1;this.tiltY=this.tiltX=this.height=this.width=this.buttons=this.button=0;this.pointerType=null;this.tangentialPressure=this.twist=this.rotationAngle=this.pressure=0}c.prototype.getLocalPosition=function(c,b,a){return c.worldTransform.applyInverse(a||this.global,b)};c.prototype._copyEvent=function(c){c.isPrimary&&(this.isPrimary=!0);this.button=c.button;this.buttons=c.buttons;this.width=c.width;this.height=c.height;this.tiltX=
c.tiltX;this.tiltY=c.tiltY;this.pointerType=c.pointerType;this.pressure=c.pressure;this.rotationAngle=c.rotationAngle;this.twist=c.twist||0;this.tangentialPressure=c.tangentialPressure||0};c.prototype._reset=function(){this.isPrimary=!1};k(c,[{key:"pointerId",get:function(){return this.identifier}}]);return c}();d.default=a},{"../core":65}],156:[function(a,g,d){d.__esModule=!0;a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.stopped=!1;
this.data=this.type=this.currentTarget=this.target=null}a.prototype.stopPropagation=function(){this.stopped=!0};a.prototype._reset=function(){this.stopped=!1;this.target=this.currentTarget=null};return a}();d.default=a},{}],157:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,
writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core"));g=a("./InteractionData");
var b=k(g);g=a("./InteractionEvent");var e=k(g);g=a("./InteractionTrackingData");var l=k(g);g=a("eventemitter3");g=k(g);a=a("./interactiveTarget");a=k(a);f.utils.mixins.delayMixin(f.DisplayObject.prototype,a.default);var m={target:null,data:{global:null}};a=function(a){function d(c,h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&
"function"!==typeof g?this:g;h=h||{};g.renderer=c;g.autoPreventDefault=void 0!==h.autoPreventDefault?h.autoPreventDefault:!0;g.interactionFrequency=h.interactionFrequency||10;g.mouse=new b.default;g.mouse.identifier="MOUSE";g.mouse.global.set(-999999);g.activeInteractionData={};g.activeInteractionData.MOUSE=g.mouse;g.interactionDataPool=[];g.eventData=new e.default;g.interactionDOMElement=null;g.moveWhenInside=!1;g.eventsAdded=!1;g.mouseOverRenderer=!1;g.supportsTouchEvents="ontouchstart"in window;
g.supportsPointerEvents=!!window.PointerEvent;g.onPointerUp=g.onPointerUp.bind(g);g.processPointerUp=g.processPointerUp.bind(g);g.onPointerCancel=g.onPointerCancel.bind(g);g.processPointerCancel=g.processPointerCancel.bind(g);g.onPointerDown=g.onPointerDown.bind(g);g.processPointerDown=g.processPointerDown.bind(g);g.onPointerMove=g.onPointerMove.bind(g);g.processPointerMove=g.processPointerMove.bind(g);g.onPointerOut=g.onPointerOut.bind(g);g.processPointerOverOut=g.processPointerOverOut.bind(g);g.onPointerOver=
g.onPointerOver.bind(g);g.cursorStyles={default:"inherit",pointer:"pointer"};g.currentCursorMode=null;g.cursor=null;g._tempPoint=new f.Point;g.resolution=1;g.setTargetElement(g.renderer.view,g.renderer.resolution);return g}h(d,a);d.prototype.hitTest=function(b,c){m.target=null;m.data.global=b;c||(c=this.renderer._lastObjectRendered);this.processInteractive(m,c,null,!0);return m.target};d.prototype.setTargetElement=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents();
this.interactionDOMElement=b;this.resolution=c;this.addEvents()};d.prototype.addEvents=function(){this.interactionDOMElement&&(f.ticker.shared.add(this.update,this,f.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",
this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",
this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),
this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)};d.prototype.removeEvents=function(){this.interactionDOMElement&&(f.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",
this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",
this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,
!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)};d.prototype.update=function(b){this._deltaTime+=b;if(!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var c in this.activeInteractionData)this.activeInteractionData.hasOwnProperty(c)&&(b=this.activeInteractionData[c],b.originalEvent&&"touch"!==b.pointerType&&
(b=this.configureInteractionEventForDOMEvent(this.eventData,b.originalEvent,b),this.processInteractive(b,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)));this.setCursorMode(this.cursor)}};d.prototype.setCursorMode=function(b){b=b||"default";if(this.currentCursorMode!==b){this.currentCursorMode=b;var a=this.cursorStyles[b];if(a)switch("undefined"===typeof a?"undefined":c(a)){case "string":this.interactionDOMElement.style.cursor=a;break;case "function":a(b);break;case "object":Object.assign(this.interactionDOMElement.style,
a)}else"string"!==typeof b||Object.prototype.hasOwnProperty.call(this.cursorStyles,b)||(this.interactionDOMElement.style.cursor=b)}};d.prototype.dispatchEvent=function(b,c,a){if(!a.stopped&&(a.currentTarget=b,a.type=c,b.emit(c,a),b[c]))b[c](a)};d.prototype.mapPositionToPoint=function(b,c,a){var e=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var f=navigator.isCocoonJS?this.resolution:1/this.resolution;b.x=this.interactionDOMElement.width/
e.width*(c-e.left)*f;b.y=this.interactionDOMElement.height/e.height*(a-e.top)*f};d.prototype.processInteractive=function(b,c,a,e,f){if(!c||!c.visible)return!1;var d=b.data.global;f=c.interactive||f;var h=!1,g=f;c.hitArea?g=!1:e&&c._mask&&(c._mask.containsPoint(d)||(e=!1));if(c.interactiveChildren&&c.children)for(var k=c.children,l=k.length-1;0<=l;l--){var m=k[l],q=this.processInteractive(b,m,a,e,g);q&&m.parent&&(g=!1,q&&(b.target&&(e=!1),h=!0))}f&&(e&&!b.target&&(c.hitArea?(c.worldTransform.applyInverse(d,
this._tempPoint),c.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(h=!0)):c.containsPoint&&c.containsPoint(d)&&(h=!0)),c.interactive&&(h&&!b.target&&(b.target=c),a&&a(b,c,!!h)));return h};d.prototype.onPointerDown=function(b){if(!this.supportsTouchEvents||"touch"!==b.pointerType){var c=this.normalizeToPointerData(b);this.autoPreventDefault&&c[0].isNormalized&&b.preventDefault();for(var a=c.length,e=0;e<a;e++){var f=c[e],d=this.getInteractionDataForPointerId(f);d=this.configureInteractionEventForDOMEvent(this.eventData,
f,d);d.data.originalEvent=b;this.processInteractive(d,this.renderer._lastObjectRendered,this.processPointerDown,!0);this.emit("pointerdown",d);"touch"===f.pointerType?this.emit("touchstart",d):("mouse"===f.pointerType||"pen"===f.pointerType)&&this.emit(2===f.button?"rightdown":"mousedown",this.eventData)}}};d.prototype.processPointerDown=function(b,c,a){var e=b.data,f=b.data.identifier;if(a)if(c.trackedPointers[f]||(c.trackedPointers[f]=new l.default(f)),this.dispatchEvent(c,"pointerdown",b),"touch"===
e.pointerType)this.dispatchEvent(c,"touchstart",b);else if("mouse"===e.pointerType||"pen"===e.pointerType)(a=2===e.button)?c.trackedPointers[f].rightDown=!0:c.trackedPointers[f].leftDown=!0,this.dispatchEvent(c,a?"rightdown":"mousedown",b)};d.prototype.onPointerComplete=function(b,c,a){for(var e=this.normalizeToPointerData(b),f=e.length,d=b.target!==this.interactionDOMElement?"outside":"",h=0;h<f;h++){var g=e[h],k=this.getInteractionDataForPointerId(g),l=this.configureInteractionEventForDOMEvent(this.eventData,
g,k);l.data.originalEvent=b;this.processInteractive(l,this.renderer._lastObjectRendered,a,c||!d);this.emit(c?"pointercancel":"pointerup"+d,l);"mouse"===g.pointerType||"pen"===g.pointerType?this.emit(2===g.button?"rightup"+d:"mouseup"+d,l):"touch"===g.pointerType&&(this.emit(c?"touchcancel":"touchend"+d,l),this.releaseInteractionDataForPointerId(g.pointerId,k))}};d.prototype.onPointerCancel=function(b){if(!this.supportsTouchEvents||"touch"!==b.pointerType)this.onPointerComplete(b,!0,this.processPointerCancel)};
d.prototype.processPointerCancel=function(b,c){var a=b.data,e=b.data.identifier;void 0!==c.trackedPointers[e]&&(delete c.trackedPointers[e],this.dispatchEvent(c,"pointercancel",b),"touch"===a.pointerType&&this.dispatchEvent(c,"touchcancel",b))};d.prototype.onPointerUp=function(b){if(!this.supportsTouchEvents||"touch"!==b.pointerType)this.onPointerComplete(b,!1,this.processPointerUp)};d.prototype.processPointerUp=function(b,c,a){var e=b.data,f=b.data.identifier,d=c.trackedPointers[f],h="touch"===e.pointerType;
if("mouse"===e.pointerType||"pen"===e.pointerType){e=2===e.button;var g=l.default.FLAGS;g=e?g.RIGHT_DOWN:g.LEFT_DOWN;g=void 0!==d&&d.flags&g;a?(this.dispatchEvent(c,e?"rightup":"mouseup",b),g&&this.dispatchEvent(c,e?"rightclick":"click",b)):g&&this.dispatchEvent(c,e?"rightupoutside":"mouseupoutside",b);d&&(e?d.rightDown=!1:d.leftDown=!1)}a?(this.dispatchEvent(c,"pointerup",b),h&&this.dispatchEvent(c,"touchend",b),d&&(this.dispatchEvent(c,"pointertap",b),h&&(this.dispatchEvent(c,"tap",b),d.over=!1))):
d&&(this.dispatchEvent(c,"pointerupoutside",b),h&&this.dispatchEvent(c,"touchendoutside",b));d&&d.none&&delete c.trackedPointers[f]};d.prototype.onPointerMove=function(b){if(!this.supportsTouchEvents||"touch"!==b.pointerType){var c=this.normalizeToPointerData(b);"mouse"===c[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var a=c.length,e=0;e<a;e++){var f=c[e],d=this.getInteractionDataForPointerId(f);d=this.configureInteractionEventForDOMEvent(this.eventData,f,d);d.data.originalEvent=b;this.processInteractive(d,
this.renderer._lastObjectRendered,this.processPointerMove,"touch"===f.pointerType?this.moveWhenInside:!0);this.emit("pointermove",d);"touch"===f.pointerType&&this.emit("touchmove",d);"mouse"!==f.pointerType&&"pen"!==f.pointerType||this.emit("mousemove",d)}"mouse"===c[0].pointerType&&this.setCursorMode(this.cursor)}};d.prototype.processPointerMove=function(b,c,a){var e=b.data,f="touch"===e.pointerType;(e="mouse"===e.pointerType||"pen"===e.pointerType)&&this.processPointerOverOut(b,c,a);if(!this.moveWhenInside||
a)this.dispatchEvent(c,"pointermove",b),f&&this.dispatchEvent(c,"touchmove",b),e&&this.dispatchEvent(c,"mousemove",b)};d.prototype.onPointerOut=function(b){if(!this.supportsTouchEvents||"touch"!==b.pointerType){b=this.normalizeToPointerData(b)[0];"mouse"===b.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var c=this.getInteractionDataForPointerId(b),a=this.configureInteractionEventForDOMEvent(this.eventData,b,c);a.data.originalEvent=b;this.processInteractive(a,this.renderer._lastObjectRendered,
this.processPointerOverOut,!1);this.emit("pointerout",a);"mouse"===b.pointerType||"pen"===b.pointerType?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(c.identifier)}};d.prototype.processPointerOverOut=function(b,c,a){var e=b.data,f=b.data.identifier;e="mouse"===e.pointerType||"pen"===e.pointerType;var d=c.trackedPointers[f];a&&!d&&(d=c.trackedPointers[f]=new l.default(f));void 0!==d&&(a&&this.mouseOverRenderer?(d.over||(d.over=!0,this.dispatchEvent(c,"pointerover",b),e&&this.dispatchEvent(c,
"mouseover",b)),e&&null===this.cursor&&(this.cursor=c.cursor)):d.over&&(d.over=!1,this.dispatchEvent(c,"pointerout",this.eventData),e&&this.dispatchEvent(c,"mouseout",b),d.none&&delete c.trackedPointers[f]))};d.prototype.onPointerOver=function(b){b=this.normalizeToPointerData(b)[0];var c=this.getInteractionDataForPointerId(b);c=this.configureInteractionEventForDOMEvent(this.eventData,b,c);c.data.originalEvent=b;"mouse"===b.pointerType&&(this.mouseOverRenderer=!0);this.emit("pointerover",c);"mouse"!==
b.pointerType&&"pen"!==b.pointerType||this.emit("mouseover",c)};d.prototype.getInteractionDataForPointerId=function(c){var a=c.pointerId;if("MOUSE"===a||"mouse"===c.pointerType)var e=this.mouse;else this.activeInteractionData[a]?e=this.activeInteractionData[a]:(e=this.interactionDataPool.pop()||new b.default,e.identifier=a,this.activeInteractionData[a]=e);e._copyEvent(c);return e};d.prototype.releaseInteractionDataForPointerId=function(b){var c=this.activeInteractionData[b];c&&(delete this.activeInteractionData[b],
c._reset(),this.interactionDataPool.push(c))};d.prototype.configureInteractionEventForDOMEvent=function(b,c,a){b.data=a;this.mapPositionToPoint(a.global,c.clientX,c.clientY);navigator.isCocoonJS&&"touch"===c.pointerType&&(a.global.x/=this.resolution,a.global.y/=this.resolution);"touch"===c.pointerType&&(c.globalX=a.global.x,c.globalY=a.global.y);a.originalEvent=c;b._reset();return b};d.prototype.normalizeToPointerData=function(b){var c=[];if(this.supportsTouchEvents&&b instanceof TouchEvent)for(var a=
0,e=b.changedTouches.length;a<e;a++){var f=b.changedTouches[a];"undefined"===typeof f.button&&(f.button=b.touches.length?1:0);"undefined"===typeof f.buttons&&(f.buttons=b.touches.length?1:0);"undefined"===typeof f.isPrimary&&(f.isPrimary=1===b.touches.length&&"touchstart"===b.type);"undefined"===typeof f.width&&(f.width=f.radiusX||1);"undefined"===typeof f.height&&(f.height=f.radiusY||1);"undefined"===typeof f.tiltX&&(f.tiltX=0);"undefined"===typeof f.tiltY&&(f.tiltY=0);"undefined"===typeof f.pointerType&&
(f.pointerType="touch");"undefined"===typeof f.pointerId&&(f.pointerId=f.identifier||0);"undefined"===typeof f.pressure&&(f.pressure=f.force||.5);f.twist=0;f.tangentialPressure=0;"undefined"===typeof f.layerX&&(f.layerX=f.offsetX=f.clientX);"undefined"===typeof f.layerY&&(f.layerY=f.offsetY=f.clientY);f.isNormalized=!0;c.push(f)}else b instanceof MouseEvent&&!(this.supportsPointerEvents&&b instanceof window.PointerEvent)&&("undefined"===typeof b.isPrimary&&(b.isPrimary=!0),"undefined"===typeof b.width&&
(b.width=1),"undefined"===typeof b.height&&(b.height=1),"undefined"===typeof b.tiltX&&(b.tiltX=0),"undefined"===typeof b.tiltY&&(b.tiltY=0),"undefined"===typeof b.pointerType&&(b.pointerType="mouse"),"undefined"===typeof b.pointerId&&(b.pointerId="MOUSE"),"undefined"===typeof b.pressure&&(b.pressure=.5),b.twist=0,b.tangentialPressure=0,b.isNormalized=!0),c.push(b);return c};d.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();this._tempPoint=this.onPointerOver=this.processPointerOverOut=
this.onPointerOut=this.processPointerMove=this.onPointerMove=this.processPointerCancel=this.onPointerCancel=this.processPointerUp=this.onPointerUp=this.processPointerDown=this.onPointerDown=this.interactionDOMElement=this.eventData=this.mouse=this.renderer=null};return d}(g.default);d.default=a;f.WebGLRenderer.registerPlugin("interaction",a);f.CanvasRenderer.registerPlugin("interaction",a)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,
eventemitter3:3}],158:[function(a,g,d){d.__esModule=!0;var k=function(){function a(c,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,e.key,e)}}return function(c,f,b){f&&a(c.prototype,f);b&&a(c,b);return c}}();a=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._pointerId=c;this._flags=a.FLAGS.NONE}a.prototype._doSet=function(c,a){this._flags=a?
this._flags|c:this._flags&~c};k(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(c){this._flags=c}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(c){this._doSet(this.constructor.FLAGS.OVER,c)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(c){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,
c)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(c){this._doSet(this.constructor.FLAGS.LEFT_DOWN,c)}}]);return a}();d.default=a;a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;var h=a("./InteractionData");Object.defineProperty(d,"InteractionData",{enumerable:!0,get:function(){return k(h).default}});var c=a("./InteractionManager");Object.defineProperty(d,
"InteractionManager",{enumerable:!0,get:function(){return k(c).default}});var f=a("./interactiveTarget");Object.defineProperty(d,"interactiveTarget",{enumerable:!0,get:function(){return k(f).default}});var b=a("./InteractionTrackingData");Object.defineProperty(d,"InteractionTrackingData",{enumerable:!0,get:function(){return k(b).default}});var e=a("./InteractionEvent");Object.defineProperty(d,"InteractionEvent",{enumerable:!0,get:function(){return k(e).default}})},{"./InteractionData":155,"./InteractionEvent":156,
"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(a,g,d){d.__esModule=!0;d.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(a){a?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){void 0===this._trackedPointers&&(this._trackedPointers={});return this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(a,g,d){function k(c,
a){c.bitmapFont=b.BitmapText.registerFont(c.data,a)}d.__esModule=!0;d.parse=k;d.default=function(){return function(b,a){if(b.data&&b.type===f.Resource.TYPE.XML)if(0===b.data.getElementsByTagName("page").length||0===b.data.getElementsByTagName("info").length||null===b.data.getElementsByTagName("info")[0].getAttribute("face"))a();else{var e=b.isDataUrl?"":h.dirname(b.url);b.isDataUrl&&("."===e&&(e=""),this.baseUrl&&e&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/"));(e=e.replace(this.baseUrl,
""))&&"/"!==e.charAt(e.length-1)&&(e+="/");e+=b.data.getElementsByTagName("page")[0].getAttribute("file");c.utils.TextureCache[e]?(k(b,c.utils.TextureCache[e]),a()):this.add(b.name+"_image",e,{crossOrigin:b.crossOrigin,loadType:f.Resource.LOAD_TYPE.IMAGE,metadata:b.metadata.imageMetadata,parentResource:b},function(c){k(b,c.texture);a()})}else a()}};var h=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("path")),
c=a("../core"),f=a("resource-loader"),b=a("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=!0;d.shared=d.Resource=d.textureParser=d.getResourcePath=d.spritesheetParser=d.parseBitmapFontData=d.bitmapFontParser=d.Loader=void 0;var h=a("./bitmapFontParser");Object.defineProperty(d,"bitmapFontParser",{enumerable:!0,get:function(){return k(h).default}});Object.defineProperty(d,"parseBitmapFontData",
{enumerable:!0,get:function(){return h.parse}});var c=a("./spritesheetParser");Object.defineProperty(d,"spritesheetParser",{enumerable:!0,get:function(){return k(c).default}});Object.defineProperty(d,"getResourcePath",{enumerable:!0,get:function(){return c.getResourcePath}});var f=a("./textureParser");Object.defineProperty(d,"textureParser",{enumerable:!0,get:function(){return k(f).default}});var b=a("resource-loader");Object.defineProperty(d,"Resource",{enumerable:!0,get:function(){return b.Resource}});
g=a("../core/Application");g=k(g);a=a("./loader");var e=k(a);d.Loader=e.default;var l=new e.default;l.destroy=function(){};d.shared=l;d=g.default.prototype;d._loader=null;Object.defineProperty(d,"loader",{get:function(){this._loader||(this._loader=this._options.sharedLoader?l:new e.default);return this._loader}});d._parentDestroy=d.destroy;d.destroy=function(b){this._loader&&(this._loader.destroy(),this._loader=null);this._parentDestroy(b)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,
"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}function h(b,c){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?b:c}function c(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;g=a("resource-loader");g=k(g);var f=a("resource-loader/lib/middlewares/parsing/blob"),b=a("eventemitter3"),e=k(b);b=a("./textureParser");b=k(b);var l=a("./spritesheetParser");l=k(l);a=a("./bitmapFontParser");a=k(a);var m=function(b){function a(c,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var d=h(this,b.call(this,c,f));e.default.call(d);
for(c=0;c<a._pixiMiddleware.length;++c)d.use(a._pixiMiddleware[c]());d.onStart.add(function(b){return d.emit("start",b)});d.onProgress.add(function(b,c){return d.emit("progress",b,c)});d.onError.add(function(b,c,a){return d.emit("error",b,c,a)});d.onLoad.add(function(b,c){return d.emit("load",b,c)});d.onComplete.add(function(b,c){return d.emit("complete",b,c)});return d}c(a,b);a.addPixiMiddleware=function(b){a._pixiMiddleware.push(b)};a.prototype.destroy=function(){this.removeAllListeners();this.reset()};
return a}(g.default);d.default=m;for(var q in e.default.prototype)m.prototype[q]=e.default.prototype[q];m._pixiMiddleware=[f.blobMiddlewareFactory,b.default,l.default,a.default];d=g.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(a,g,d){function k(b,a){return b.isDataUrl?b.data.meta.image:c.default.resolve(b.url.replace(a,
""),b.data.meta.image)}d.__esModule=!0;d.default=function(){return function(b,c){var a=b.name+"_image";if(b.data&&b.type===h.Resource.TYPE.JSON&&b.data.frames&&!this.resources[a]){var e={crossOrigin:b.crossOrigin,loadType:h.Resource.LOAD_TYPE.IMAGE,metadata:b.metadata.imageMetadata,parentResource:b},d=k(b,this.baseUrl);this.add(a,d,e,function(a){var e=new f.Spritesheet(a.texture.baseTexture,b.data,b.url);e.parse(function(){b.spritesheet=e;b.textures=e.textures;c()})})}else c()}};d.getResourcePath=
k;var h=a("resource-loader"),c=(g=a("url"))&&g.__esModule?g:{default:g},f=a("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(a,g,d){d.__esModule=!0;d.default=function(){return function(c,a){c.data&&c.type===k.Resource.TYPE.IMAGE&&(c.texture=h.default.fromLoader(c.data,c.url,c.name));a()}};var k=a("resource-loader"),h=(a=a("../core/textures/Texture"))&&a.__esModule?a:{default:a}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(a,g,d){function k(b,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,
a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),c=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),f=(a=a("../core/textures/Texture"))&&a.__esModule?a:{default:a},b=new c.Point,e=new c.Polygon;a=function(a){function d(b,e,h,g,k){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var l=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l._texture=b||f.default.EMPTY;l.uvs=h||new Float32Array([0,0,1,0,1,1,0,1]);l.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]);l.indices=g||new Uint16Array([0,1,3,2]);l.dirty=0;l.indexDirty=0;l.blendMode=c.BLEND_MODES.NORMAL;l.canvasPadding=0;l.drawMode=k||d.DRAW_MODES.TRIANGLE_MESH;l.shader=null;l.tintRgb=new Float32Array([1,1,1]);l._glDatas={};l._uvTransform=new c.TextureMatrix(l._texture);l.uploadUvTransform=!1;l.pluginName="mesh";return l}
k(d,a);d.prototype._renderWebGL=function(b){this.refresh();b.setObjectRenderer(b.plugins[this.pluginName]);b.plugins[this.pluginName].render(this)};d.prototype._renderCanvas=function(b){this.refresh();b.plugins[this.pluginName].render(this)};d.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture;this.refresh()};d.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)};d.prototype.refresh=function(b){this._uvTransform.update(b)&&this._refresh()};
d.prototype._refresh=function(){};d.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};d.prototype.containsPoint=function(c){if(!this.getBounds().contains(c.x,c.y))return!1;this.worldTransform.applyInverse(c,b);c=this.vertices;for(var a=e.points,f=this.indices,h=this.indices.length,g=this.drawMode===d.DRAW_MODES.TRIANGLES?3:1,k=0;k+2<h;k+=g){var l=2*f[k],m=2*f[k+1],q=2*f[k+2];a[0]=c[l];a[1]=c[l+1];a[2]=c[m];a[3]=c[m+1];a[4]=c[q];a[5]=
c[q+1];if(e.contains(b.x,b.y))return!0}return!1};h(d,[{key:"texture",get:function(){return this._texture},set:function(b){if(this._texture!==b&&(this._texture=b))if(b.baseTexture.hasLoaded)this._onTextureUpdate();else b.once("update",this._onTextureUpdate,this)}},{key:"tint",get:function(){return c.utils.rgb2hex(this.tintRgb)},set:function(b){this.tintRgb=c.utils.hex2rgb(b,this.tintRgb)}}]);return d}(c.Container);d.default=a;a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],
167:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=function(){function c(c,b){for(var a=0;a<b.length;a++){var f=b[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);
Object.defineProperty(c,f.key,f)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();a=a("./Plane");a=function(c){function a(b,e,f,d,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var g=c.call(this,b,4,4);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g._origWidth=b.orig.width;g._origHeight=b.orig.height;g._width=g._origWidth;g._height=g._origHeight;
g.leftWidth="undefined"!==typeof e?e:10;g.rightWidth="undefined"!==typeof d?d:10;g.topHeight="undefined"!==typeof f?f:10;g.bottomHeight="undefined"!==typeof h?h:10;g.refresh(!0);return g}k(a,c);a.prototype.updateHorizontalVertices=function(){var b=this.vertices;b[9]=b[11]=b[13]=b[15]=this._topHeight;b[17]=b[19]=b[21]=b[23]=this._height-this._bottomHeight;b[25]=b[27]=b[29]=b[31]=this._height};a.prototype.updateVerticalVertices=function(){var b=this.vertices;b[2]=b[10]=b[18]=b[26]=this._leftWidth;b[4]=
b[12]=b[20]=b[28]=this._width-this._rightWidth;b[6]=b[14]=b[22]=b[30]=this._width};a.prototype._renderCanvas=function(b){var c=b.context;c.globalAlpha=this.worldAlpha;var a=this.worldTransform,f=b.resolution;b.roundPixels?c.setTransform(a.a*f,a.b*f,a.c*f,a.d*f,a.tx*f|0,a.ty*f|0):c.setTransform(a.a*f,a.b*f,a.c*f,a.d*f,a.tx*f,a.ty*f);f=this._texture.baseTexture;b=f.source;a=f.width*f.resolution;f=f.height*f.resolution;this.drawSegment(c,b,a,f,0,1,10,11);this.drawSegment(c,b,a,f,2,3,12,13);this.drawSegment(c,
b,a,f,4,5,14,15);this.drawSegment(c,b,a,f,8,9,18,19);this.drawSegment(c,b,a,f,10,11,20,21);this.drawSegment(c,b,a,f,12,13,22,23);this.drawSegment(c,b,a,f,16,17,26,27);this.drawSegment(c,b,a,f,18,19,28,29);this.drawSegment(c,b,a,f,20,21,30,31)};a.prototype.drawSegment=function(b,c,a,f,d,h,g,k){var e=this.uvs,l=this.vertices,m=(e[g]-e[d])*a,q=(e[k]-e[h])*f;g=l[g]-l[d];k=l[k]-l[h];1>m&&(m=1);1>q&&(q=1);1>g&&(g=1);1>k&&(k=1);b.drawImage(c,e[d]*a,e[h]*f,m,q,l[d],l[h],g,k)};a.prototype._refresh=function(){c.prototype._refresh.call(this);
var b=this.uvs,a=this._texture;this._origWidth=a.orig.width;this._origHeight=a.orig.height;a=1/this._origWidth;var f=1/this._origHeight;b[0]=b[8]=b[16]=b[24]=0;b[1]=b[3]=b[5]=b[7]=0;b[6]=b[14]=b[22]=b[30]=1;b[25]=b[27]=b[29]=b[31]=1;b[2]=b[10]=b[18]=b[26]=a*this._leftWidth;b[4]=b[12]=b[20]=b[28]=1-a*this._rightWidth;b[9]=b[11]=b[13]=b[15]=f*this._topHeight;b[17]=b[19]=b[21]=b[23]=1-f*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.dirty++;this.multiplyUvs()};
h(a,[{key:"width",get:function(){return this._width},set:function(b){this._width=b;this._refresh()}},{key:"height",get:function(){return this._height},set:function(b){this._height=b;this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(b){this._leftWidth=b;this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(b){this._rightWidth=b;this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(b){this._topHeight=
b;this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(b){this._bottomHeight=b;this._refresh()}}]);return a}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"./Plane":168}],168:[function(a,g,d){function k(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?
Object.setPrototypeOf(c,a):c.__proto__=a)}d.__esModule=!0;var h=(a=a("./Mesh"))&&a.__esModule?a:{default:a};a=function(c){function a(b,e,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");b=c.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b._ready=!0;b.verticesX=e||10;b.verticesY=f||10;b.drawMode=h.default.DRAW_MODES.TRIANGLES;b.refresh();return b}k(a,
c);a.prototype._refresh=function(){var b=this._texture,c=this.verticesX*this.verticesY,a=[],f=[],d=[],h=this.verticesX-1,g=this.verticesY-1,k=b.width/h;b=b.height/g;for(var v=0;v<c;v++){var w=v%this.verticesX,t=v/this.verticesX|0;a.push(w*k,t*b);f.push(w/h,t/g)}c=h*g;for(g=0;g<c;g++)k=g%h,b=g/h|0,v=b*this.verticesX+k+1,w=(b+1)*this.verticesX+k,t=(b+1)*this.verticesX+k+1,d.push(b*this.verticesX+k,v,w),d.push(v,t,w);this.vertices=new Float32Array(a);this.uvs=new Float32Array(f);this.colors=new Float32Array([]);
this.indices=new Uint16Array(d);this.dirty++;this.indexDirty++;this.multiplyUvs()};a.prototype._onTextureUpdate=function(){h.default.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};return a}(h.default);d.default=a},{"./Mesh":166}],169:[function(a,g,d){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}d.__esModule=!0;a=a("./Mesh");a=function(a){function c(f,b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");f=a.call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.points=b;f.vertices=new Float32Array(4*b.length);f.uvs=new Float32Array(4*b.length);f.colors=new Float32Array(2*b.length);
f.indices=new Uint16Array(2*b.length);f.autoUpdate=!0;f.refresh();return f}k(c,a);c.prototype._refresh=function(){var c=this.points;if(!(1>c.length)&&this._texture._uvs){this.vertices.length/4!==c.length&&(this.vertices=new Float32Array(4*c.length),this.uvs=new Float32Array(4*c.length),this.colors=new Float32Array(2*c.length),this.indices=new Uint16Array(2*c.length));var b=this.uvs,a=this.indices,d=this.colors;b[0]=0;b[1]=0;b[2]=0;b[3]=1;d[0]=1;d[1]=1;a[0]=0;a[1]=1;c=c.length;for(var h=1;h<c;h++){var g=
4*h,k=h/(c-1);b[g]=k;b[g+1]=0;b[g+2]=k;b[g+3]=1;g=2*h;d[g]=1;d[g+1]=1;g=2*h;a[g]=g;a[g+1]=g+1}this.dirty++;this.indexDirty++;this.multiplyUvs();this.refreshVertices()}};c.prototype.refreshVertices=function(){var c=this.points;if(!(1>c.length))for(var b=c[0],a,d,h=this.vertices,g=c.length,k=0;k<g;k++){var r=c[k],u=4*k;a=k<c.length-1?c[k+1]:r;d=-(a.x-b.x);b=a.y-b.y;a=Math.sqrt(b*b+d*d);var v=this._texture.height/2;b/=a;d/=a;b*=v;d*=v;h[u]=r.x+b;h[u+1]=r.y+d;h[u+2]=r.x-b;h[u+3]=r.y-d;b=r}};c.prototype.updateTransform=
function(){this.autoUpdate&&this.refreshVertices();this.containerUpdateTransform()};return c}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"./Mesh":166}],170:[function(a,g,d){d.__esModule=!0;g=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(c[f]=a[f]);c.default=a;return c}(a("../../core"));var k=(a=a("../Mesh"))&&a.__esModule?a:{default:a};a=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=c}a.prototype.render=function(c){var a=this.renderer,b=a.context,e=c.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(e.a*d,e.b*d,e.c*d,e.d*d,e.tx*d|0,e.ty*d|0):b.setTransform(e.a*d,e.b*d,e.c*d,e.d*d,e.tx*d,e.ty*d);a.setBlendMode(c.blendMode);c.drawMode===k.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(c):this._renderTriangles(c)};a.prototype._renderTriangleMesh=function(c){for(var a=c.vertices.length/2,b=0;b<a-2;b++){var e=2*b;this._renderDrawTriangle(c,e,e+2,
e+4)}};a.prototype._renderTriangles=function(c){for(var a=c.indices,b=a.length,e=0;e<b;e+=3)this._renderDrawTriangle(c,2*a[e],2*a[e+1],2*a[e+2])};a.prototype._renderDrawTriangle=function(c,a,b,e){var f=this.renderer.context,d=c.uvs,g=c.vertices,h=c._texture;if(h.valid){h=h.baseTexture;var k=h.source,u=h.width,v=h.height;if(c.uploadUvTransform){var w=c._uvTransform.mapCoord;var t=(d[a]*w.a+d[a+1]*w.c+w.tx)*h.width;var A=(d[b]*w.a+d[b+1]*w.c+w.tx)*h.width;var y=(d[e]*w.a+d[e+1]*w.c+w.tx)*h.width;var z=
(d[a]*w.b+d[a+1]*w.d+w.ty)*h.height;var B=(d[b]*w.b+d[b+1]*w.d+w.ty)*h.height;d=(d[e]*w.b+d[e+1]*w.d+w.ty)*h.height}else t=d[a]*h.width,A=d[b]*h.width,y=d[e]*h.width,z=d[a+1]*h.height,B=d[b+1]*h.height,d=d[e+1]*h.height;w=g[a];var D=g[b],E=g[e];a=g[a+1];b=g[b+1];e=g[e+1];if(0<c.canvasPadding){g=c.canvasPadding/c.worldTransform.a;c=c.canvasPadding/c.worldTransform.d;var C=(w+D+E)/3,F=(a+b+e)/3,G=w-C,H=a-F,J=Math.sqrt(G*G+H*H);w=C+G/J*(J+g);a=F+H/J*(J+c);G=D-C;H=b-F;J=Math.sqrt(G*G+H*H);D=C+G/J*(J+
g);b=F+H/J*(J+c);G=E-C;H=e-F;J=Math.sqrt(G*G+H*H);E=C+G/J*(J+g);e=F+H/J*(J+c)}f.save();f.beginPath();f.moveTo(w,a);f.lineTo(D,b);f.lineTo(E,e);f.closePath();f.clip();c=t*B+z*y+A*d-B*y-z*A-t*d;f.transform((w*B+z*E+D*d-B*E-z*D-w*d)/c,(a*B+z*e+b*d-B*e-z*b-a*d)/c,(t*D+w*y+A*E-D*y-w*A-t*E)/c,(t*b+a*y+A*e-b*y-a*A-t*e)/c,(t*B*E+z*D*y+w*A*d-w*B*y-z*A*E-t*D*d)/c,(t*B*e+z*b*y+a*A*d-a*B*y-z*A*e-t*b*d)/c);f.drawImage(k,0,0,u*h.resolution,v*h.resolution,0,0,u,v);f.restore();this.renderer.invalidateBlendMode()}};
a.prototype.renderMeshFlat=function(c){var a=this.renderer.context;c=c.vertices;var b=c.length/2;a.beginPath();for(var e=1;e<b-2;++e){var d=2*e,h=c[d+2],g=c[d+3],k=c[d+4],r=c[d+5];a.moveTo(c[d],c[d+1]);a.lineTo(h,g);a.lineTo(k,r)}a.fillStyle="#FF0000";a.fill();a.closePath()};a.prototype.destroy=function(){this.renderer=null};return a}();d.default=a;g.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(a,g,d){function k(b){return b&&b.__esModule?b:{default:b}}d.__esModule=
!0;var h=a("./Mesh");Object.defineProperty(d,"Mesh",{enumerable:!0,get:function(){return k(h).default}});var c=a("./webgl/MeshRenderer");Object.defineProperty(d,"MeshRenderer",{enumerable:!0,get:function(){return k(c).default}});var f=a("./canvas/CanvasMeshRenderer");Object.defineProperty(d,"CanvasMeshRenderer",{enumerable:!0,get:function(){return k(f).default}});var b=a("./Plane");Object.defineProperty(d,"Plane",{enumerable:!0,get:function(){return k(b).default}});var e=a("./NineSlicePlane");Object.defineProperty(d,
"NineSlicePlane",{enumerable:!0,get:function(){return k(e).default}});var l=a("./Rope");Object.defineProperty(d,"Rope",{enumerable:!0,get:function(){return k(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,
{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core")),c=(g=a("pixi-gl-core"))&&g.__esModule?g:{default:g},f=(g=a("../Mesh"))&&g.__esModule?g:{default:g};a("path");var b=h.Matrix.IDENTITY;a=function(a){function e(b){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");b=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.shader=null;return b}k(e,a);e.prototype.onContextChange=function(){this.shader=new h.Shader(this.renderer.gl,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
"varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")};e.prototype.render=function(a){var e=this.renderer,d=e.gl,g=a._texture;if(g.valid){var k=a._glDatas[e.CONTEXT_UID];k||(e.bindVao(null),k={shader:this.shader,vertexBuffer:c.default.GLBuffer.createVertexBuffer(d,a.vertices,d.STREAM_DRAW),uvBuffer:c.default.GLBuffer.createVertexBuffer(d,a.uvs,d.STREAM_DRAW),indexBuffer:c.default.GLBuffer.createIndexBuffer(d,
a.indices,d.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},k.vao=(new c.default.VertexArrayObject(d)).addIndex(k.indexBuffer).addAttribute(k.vertexBuffer,k.shader.attributes.aVertexPosition,d.FLOAT,!1,8,0).addAttribute(k.uvBuffer,k.shader.attributes.aTextureCoord,d.FLOAT,!1,8,0),a._glDatas[e.CONTEXT_UID]=k);e.bindVao(k.vao);a.dirty!==k.dirty&&(k.dirty=a.dirty,k.uvBuffer.upload(a.uvs));a.indexDirty!==k.indexDirty&&(k.indexDirty=a.indexDirty,k.indexBuffer.upload(a.indices));k.vertexBuffer.upload(a.vertices);
e.bindShader(k.shader);k.shader.uniforms.uSampler=e.bindTexture(g);e.state.setBlendMode(h.utils.correctBlendMode(a.blendMode,g.baseTexture.premultipliedAlpha));k.shader.uniforms.uTransform&&(k.shader.uniforms.uTransform=a.uploadUvTransform?a._uvTransform.mapCoord.toArray(!0):b.toArray(!0));k.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0);k.shader.uniforms.uColor=h.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,k.shader.uniforms.uColor,g.baseTexture.premultipliedAlpha);k.vao.draw(a.drawMode===
f.default.DRAW_MODES.TRIANGLE_MESH?d.TRIANGLE_STRIP:d.TRIANGLES,a.indices.length,0)}};return e}(h.ObjectRenderer);d.default=a;h.WebGLRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?
Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,f){a&&b(c.prototype,a);f&&b(c,f);return c}}(),c=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),f=a("../core/utils");a=function(b){function a(){var e=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,f=arguments[1],d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var h=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;16384<d&&(d=16384);d>e&&(d=e);h._properties=[!1,!0,!1,
!1,!1];h._maxSize=e;h._batchSize=d;h._glBuffers={};h._bufferToUpdate=0;h.interactiveChildren=!1;h.blendMode=c.BLEND_MODES.NORMAL;h.autoResize=g;h.roundPixels=!0;h.baseTexture=null;h.setProperties(f);h._tint=0;h.tintRgb=new Float32Array(4);h.tint=16777215;return h}k(a,b);a.prototype.setProperties=function(b){b&&(this._properties[0]="scale"in b?!!b.scale:this._properties[0],this._properties[1]="position"in b?!!b.position:this._properties[1],this._properties[2]="rotation"in b?!!b.rotation:this._properties[2],
this._properties[3]="uvs"in b?!!b.uvs:this._properties[3],this._properties[4]="alpha"in b||"tint"in b?!!b.alpha||!!b.tint:this._properties[4])};a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};a.prototype.renderWebGL=function(b){var c=this;if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){if(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded))this.baseTexture.once("update",function(){return c.onChildrenChange(0)});
b.setObjectRenderer(b.plugins.particle);b.plugins.particle.render(this)}};a.prototype.onChildrenChange=function(b){b=Math.floor(b/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)};a.prototype.renderCanvas=function(b){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var c=b.context,a=this.worldTransform,e=!0;b.setBlendMode(this.blendMode);c.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var f=0;f<this.children.length;++f){var d=this.children[f];
if(d.visible){var h=d._texture.frame;c.globalAlpha=this.worldAlpha*d.alpha;if(0===d.rotation%(2*Math.PI)){e&&(c.setTransform(a.a,a.b,a.c,a.d,a.tx*b.resolution,a.ty*b.resolution),e=!1);var g=d.anchor.x*-h.width*d.scale.x+d.position.x+.5;var k=d.anchor.y*-h.height*d.scale.y+d.position.y+.5;var l=h.width*d.scale.x;var y=h.height*d.scale.y}else e||(e=!0),d.displayObjectUpdateTransform(),g=d.worldTransform,b.roundPixels?c.setTransform(g.a,g.b,g.c,g.d,g.tx*b.resolution|0,g.ty*b.resolution|0):c.setTransform(g.a,
g.b,g.c,g.d,g.tx*b.resolution,g.ty*b.resolution),g=d.anchor.x*-h.width+.5,k=d.anchor.y*-h.height+.5,l=h.width,y=h.height;var z=d._texture.baseTexture.resolution;c.drawImage(d._texture.baseTexture.source,h.x*z,h.y*z,h.width*z,h.height*z,g*b.resolution,k*b.resolution,l*b.resolution,y*b.resolution)}}}};a.prototype.destroy=function(c){b.prototype.destroy.call(this,c);if(this._buffers)for(c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._buffers=this._properties=null};h(a,[{key:"tint",get:function(){return this._tint},
set:function(b){this._tint=b;(0,f.hex2rgb)(b,this.tintRgb)}}]);return a}(c.Container);d.default=a},{"../core":65,"../core/utils":125}],174:[function(a,g,d){d.__esModule=!0;var k=a("./ParticleContainer");Object.defineProperty(d,"ParticleContainer",{enumerable:!0,get:function(){return(k&&k.__esModule?k:{default:k}).default}});var h=a("./webgl/ParticleRenderer");Object.defineProperty(d,"ParticleRenderer",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}})},{"./ParticleContainer":173,
"./webgl/ParticleRenderer":176}],175:[function(a,g,d){d.__esModule=!0;var k=(g=a("pixi-gl-core"))&&g.__esModule?g:{default:g},h=(a=a("../../core/utils/createIndicesForQuads"))&&a.__esModule?a:{default:a};a=function(){function c(a,b,e,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.gl=a;this.size=d;this.dynamicProperties=[];this.staticProperties=[];for(a=0;a<b.length;++a)d=b[a],d={attribute:d.attribute,size:d.size,uploadFunction:d.uploadFunction,unsignedByte:d.unsignedByte,
offset:d.offset},e[a]?this.dynamicProperties.push(d):this.staticProperties.push(d);this.staticStride=0;this.staticDataUint32=this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=null;this.initBuffers()}c.prototype.initBuffers=function(){var c=this.gl,b=0;this.indices=(0,h.default)(this.size);this.indexBuffer=k.default.GLBuffer.createIndexBuffer(c,this.indices,c.STATIC_DRAW);for(var a=this.dynamicStride=0;a<this.dynamicProperties.length;++a){var d=
this.dynamicProperties[a];d.offset=b;b+=d.size;this.dynamicStride+=d.size}b=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(b);this.dynamicDataUint32=new Uint32Array(b);this.dynamicBuffer=k.default.GLBuffer.createVertexBuffer(c,b,c.STREAM_DRAW);for(a=this.staticStride=b=0;a<this.staticProperties.length;++a)d=this.staticProperties[a],d.offset=b,b+=d.size,this.staticStride+=d.size;b=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(b);
this.staticDataUint32=new Uint32Array(b);this.staticBuffer=k.default.GLBuffer.createVertexBuffer(c,b,c.STATIC_DRAW);this.vao=(new k.default.VertexArrayObject(c)).addIndex(this.indexBuffer);for(b=0;b<this.dynamicProperties.length;++b)a=this.dynamicProperties[b],a.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,a.attribute,c.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*a.offset):this.vao.addAttribute(this.dynamicBuffer,a.attribute,c.FLOAT,!1,4*this.dynamicStride,4*a.offset);for(b=0;b<this.staticProperties.length;++b)a=
this.staticProperties[b],a.unsignedByte?this.vao.addAttribute(this.staticBuffer,a.attribute,c.UNSIGNED_BYTE,!0,4*this.staticStride,4*a.offset):this.vao.addAttribute(this.staticBuffer,a.attribute,c.FLOAT,!1,4*this.staticStride,4*a.offset)};c.prototype.uploadDynamic=function(c,b,a){for(var e=0;e<this.dynamicProperties.length;e++){var d=this.dynamicProperties[e];d.uploadFunction(c,b,a,d.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,d.offset)}this.dynamicBuffer.upload()};c.prototype.uploadStatic=
function(c,b,a){for(var e=0;e<this.staticProperties.length;e++){var d=this.staticProperties[e];d.uploadFunction(c,b,a,d.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,d.offset)}this.staticBuffer.upload()};c.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicBuffer.destroy();this.staticProperties=this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=null;this.staticBuffer.destroy();this.staticDataUint32=this.staticData=this.staticBuffer=null};return c}();
d.default=a},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":12}],176:[function(a,g,d){function k(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}d.__esModule=!0;var h=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,
a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core")),c=(g=a("./ParticleShader"))&&g.__esModule?g:{default:g},f=(g=a("./ParticleBuffer"))&&g.__esModule?g:{default:g},b=a("../../core/utils");a=function(a){function e(b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");b=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.shader=null;b.indexBuffer=null;
b.properties=null;b.tempMatrix=new h.Matrix;b.CONTEXT_UID=0;return b}k(e,a);e.prototype.onContextChange=function(){var b=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new c.default(b);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,
offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]};e.prototype.start=function(){this.renderer.bindShader(this.shader)};e.prototype.render=function(b){var c=b.children,a=b._maxSize,e=b._batchSize,d=this.renderer,f=c.length;if(0!==f){f>a&&(f=a);(a=b._glBuffers[d.CONTEXT_UID])||(a=b._glBuffers[d.CONTEXT_UID]=this.generateBuffers(b));var g=c[0]._texture.baseTexture;
this.renderer.setBlendMode(h.utils.correctBlendMode(b.blendMode,g.premultipliedAlpha));var k=d.gl,l=b.worldTransform.copy(this.tempMatrix);l.prepend(d._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=l.toArray(!0);this.shader.uniforms.uColor=h.utils.premultiplyRgba(b.tintRgb,b.worldAlpha,this.shader.uniforms.uColor,g.premultipliedAlpha);this.shader.uniforms.uSampler=d.bindTexture(g);for(l=g=0;g<f;g+=e,l+=1){var m=f-g;m>e&&(m=e);if(l>=a.length){if(!b.autoResize)break;a.push(this._generateOneMoreBuffer(b))}var z=
a[l];z.uploadDynamic(c,g,m);b._bufferToUpdate===l&&(z.uploadStatic(c,g,m),b._bufferToUpdate=l+1);d.bindVao(z.vao);z.vao.draw(k.TRIANGLES,6*m)}}};e.prototype.generateBuffers=function(b){var c=this.renderer.gl,a=[],e=b._maxSize,d=b._batchSize;b=b._properties;for(var h=0;h<e;h+=d)a.push(new f.default(c,this.properties,b,d));return a};e.prototype._generateOneMoreBuffer=function(b){return new f.default(this.renderer.gl,this.properties,b._properties,b._batchSize)};e.prototype.uploadVertices=function(b,
c,a,e,d,f){for(var h,g,k,l,m=0;m<a;++m){l=b[c+m];h=l._texture;var q=l.scale.x,r=l.scale.y;k=h.trim;var u=h.orig;k?(g=k.x-l.anchor.x*u.width,h=g+k.width,l=k.y-l.anchor.y*u.height,k=l+k.height):(h=u.width*(1-l.anchor.x),g=u.width*-l.anchor.x,k=u.height*(1-l.anchor.y),l=u.height*-l.anchor.y);e[f]=g*q;e[f+1]=l*r;e[f+d]=h*q;e[f+d+1]=l*r;e[f+2*d]=h*q;e[f+2*d+1]=k*r;e[f+3*d]=g*q;e[f+3*d+1]=k*r;f+=4*d}};e.prototype.uploadPosition=function(b,c,a,e,d,f){for(var h=0;h<a;h++){var g=b[c+h].position;e[f]=g.x;e[f+
1]=g.y;e[f+d]=g.x;e[f+d+1]=g.y;e[f+2*d]=g.x;e[f+2*d+1]=g.y;e[f+3*d]=g.x;e[f+3*d+1]=g.y;f+=4*d}};e.prototype.uploadRotation=function(b,c,a,e,d,f){for(var h=0;h<a;h++){var g=b[c+h].rotation;e[f]=g;e[f+d]=g;e[f+2*d]=g;e[f+3*d]=g;f+=4*d}};e.prototype.uploadUvs=function(b,c,a,e,d,f){for(var h=0;h<a;++h){var g=b[c+h]._texture._uvs;g?(e[f]=g.x0,e[f+1]=g.y0,e[f+d]=g.x1,e[f+d+1]=g.y1,e[f+2*d]=g.x2,e[f+2*d+1]=g.y2,e[f+3*d]=g.x3,e[f+3*d+1]=g.y3):(e[f]=0,e[f+1]=0,e[f+d]=0,e[f+d+1]=0,e[f+2*d]=0,e[f+2*d+1]=0,e[f+
3*d]=0,e[f+3*d+1]=0);f+=4*d}};e.prototype.uploadTint=function(c,a,e,d,f,g){for(var h=0;h<e;++h){var k=c[a+h],l=k._texture.baseTexture.premultipliedAlpha,m=k.alpha;k=1>m&&l?(0,b.premultiplyTint)(k._tintRGB,m):k._tintRGB+(255*m<<24);d[g]=k;d[g+f]=k;d[g+2*f]=k;d[g+3*f]=k;g+=4*f}};e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer);a.prototype.destroy.call(this);this.shader.destroy();this.tempMatrix=this.indices=null};return e}(h.ObjectRenderer);d.default=
a;h.WebGLRenderer.registerPlugin("particle",a)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(a,g,d){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}d.__esModule=!0;a=a("../../core/Shader");
a=function(a){function c(d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");d=a.call(this,d,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   vec2 v = vec2(x, y);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}",
"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  gl_FragColor = color;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}k(c,a);return c}((a&&a.__esModule?a:{default:a}).default);d.default=a},{"../../core/Shader":44}],178:[function(a,g,d){Math.sign||(Math.sign=function(a){a=Number(a);
return 0===a||isNaN(a)?a:0<a?1:-1})},{}],179:[function(a,g,d){a=(a=a("object-assign"))&&a.__esModule?a:{default:a};Object.assign||(Object.assign=a.default)},{"object-assign":5}],180:[function(a,g,d){a("./Object.assign");a("./requestAnimationFrame");a("./Math.sign");window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],
181:[function(a,g,d){(function(a){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()});if(!a.performance||!a.performance.now){var d=Date.now();a.performance||(a.performance={});a.performance.now=function(){return Date.now()-d}}for(var c=Date.now(),f=["ms","moz","webkit","o"],b=0;b<f.length&&!a.requestAnimationFrame;++b){var e=f[b];a.requestAnimationFrame=a[e+"RequestAnimationFrame"];a.cancelAnimationFrame=a[e+"CancelAnimationFrame"]||a[e+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||
(a.requestAnimationFrame=function(b){if("function"!==typeof b)throw new TypeError(b+"is not a function");var a=Date.now(),e=16+c-a;0>e&&(e=0);c=a;return setTimeout(function(){c=Date.now();b(performance.now())},e)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(b){return clearTimeout(b)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],182:[function(a,g,d){function k(b,c){var a=!1;if(b&&b._textures&&b._textures.length)for(var e=
0;e<b._textures.length;e++)if(b._textures[e]instanceof m.Texture){var d=b._textures[e].baseTexture;-1===c.indexOf(d)&&(c.push(d),a=!0)}return a}function h(b,c){return b instanceof m.BaseTexture?(-1===c.indexOf(b)&&c.push(b),!0):!1}function c(b,c){return b._texture&&b._texture instanceof m.Texture?(b=b._texture.baseTexture,-1===c.indexOf(b)&&c.push(b),!0):!1}function f(b,c){return c instanceof m.Text?(c.updateText(!0),!0):!1}function b(b,c){return c instanceof m.TextStyle?(b=c.toFontString(),m.TextMetrics.measureFont(b),
!0):!1}function e(b,c){return b instanceof m.Text?(-1===c.indexOf(b.style)&&c.push(b.style),-1===c.indexOf(b)&&c.push(b),b=b._texture.baseTexture,-1===c.indexOf(b)&&c.push(b),!0):!1}function l(b,c){return b instanceof m.TextStyle?(-1===c.indexOf(b)&&c.push(b),!0):!1}d.__esModule=!0;var m=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../core")),q=(a=a("./limiters/CountLimiter"))&&a.__esModule?
a:{default:a},x=m.ticker.shared;m.settings.UPLOADS_PER_FRAME=4;a=function(){function a(d){var g=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.limiter=new q.default(m.settings.UPLOADS_PER_FRAME);this.renderer=d;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=!1;this.delayedTick=function(){g.queue&&g.prepareItems()};this.registerFindHook(e);this.registerFindHook(l);this.registerFindHook(k);this.registerFindHook(h);
this.registerFindHook(c);this.registerUploadHook(f);this.registerUploadHook(b)}a.prototype.upload=function(b,c){"function"===typeof b&&(c=b,b=null);b&&this.add(b);this.queue.length?(c&&this.completes.push(c),this.ticking||(this.ticking=!0,x.addOnce(this.tick,this,m.UPDATE_PRIORITY.UTILITY))):c&&c()};a.prototype.tick=function(){setTimeout(this.delayedTick,0)};a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var b=this.queue[0],c=
!1;if(b&&!b._destroyed)for(var a=0,e=this.uploadHooks.length;a<e;a++)if(this.uploadHooks[a](this.uploadHookHelper,b)){this.queue.shift();c=!0;break}c||this.queue.shift()}if(this.queue.length)x.addOnce(this.tick,this,m.UPDATE_PRIORITY.UTILITY);else for(this.ticking=!1,b=this.completes.slice(0),c=this.completes.length=0,a=b.length;c<a;c++)b[c]()};a.prototype.registerFindHook=function(b){b&&this.addHooks.push(b);return this};a.prototype.registerUploadHook=function(b){b&&this.uploadHooks.push(b);return this};
a.prototype.add=function(b){for(var c=0,a=this.addHooks.length;c<a&&!this.addHooks[c](b,this.queue);c++);if(b instanceof m.Container)for(c=b.children.length-1;0<=c;c--)this.add(b.children[c]);return this};a.prototype.destroy=function(){this.ticking&&x.remove(this.tick,this);this.ticking=!1;this.uploadHookHelper=this.limiter=this.queue=this.completes=this.renderer=this.uploadHooks=this.addHooks=null};return a}();d.default=a},{"../core":65,"./limiters/CountLimiter":185}],183:[function(a,g,d){function k(c,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}function h(a,b){return b instanceof c.BaseTexture?(b=b.source,a.ctx.drawImage(b,0,0,0===b.width?a.canvas.width:Math.min(a.canvas.width,b.width),0===b.height?a.canvas.height:Math.min(a.canvas.height,
b.height),0,0,a.canvas.width,a.canvas.height),!0):!1}d.__esModule=!0;var c=function(c){if(c&&c.__esModule)return c;var b={};if(null!=c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a]);b.default=c;return b}(a("../../core"));a=a("../BasePrepare");a=function(c){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a=c.call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==
typeof a&&"function"!==typeof a?this:a;a.uploadHookHelper=a;a.canvas=document.createElement("canvas");a.canvas.width=16;a.canvas.height=16;a.ctx=a.canvas.getContext("2d");a.registerUploadHook(h);return a}k(b,c);b.prototype.destroy=function(){c.prototype.destroy.call(this);this.canvas=this.ctx=null};return b}((a&&a.__esModule?a:{default:a}).default);d.default=a;c.CanvasRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":182}],184:[function(a,g,d){function k(b){return b&&b.__esModule?
b:{default:b}}d.__esModule=!0;var h=a("./webgl/WebGLPrepare");Object.defineProperty(d,"webgl",{enumerable:!0,get:function(){return k(h).default}});var c=a("./canvas/CanvasPrepare");Object.defineProperty(d,"canvas",{enumerable:!0,get:function(){return k(c).default}});var f=a("./BasePrepare");Object.defineProperty(d,"BasePrepare",{enumerable:!0,get:function(){return k(f).default}});var b=a("./limiters/CountLimiter");Object.defineProperty(d,"CountLimiter",{enumerable:!0,get:function(){return k(b).default}});
var e=a("./limiters/TimeLimiter");Object.defineProperty(d,"TimeLimiter",{enumerable:!0,get:function(){return k(e).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(a,g,d){d.__esModule=!0;a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxItemsPerFrame=d;this.itemsLeft=0}a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame};
a.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};return a}();d.default=a},{}],186:[function(a,g,d){d.__esModule=!0;a=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxMilliseconds=d;this.frameStart=0}a.prototype.beginFrame=function(){this.frameStart=Date.now()};a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};return a}();d.default=a},{}],187:[function(a,g,d){function k(b,
c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}function h(c,a){return a instanceof b.BaseTexture?(a._glTextures[c.CONTEXT_UID]||c.textureManager.updateTexture(a),!0):!1}function c(c,a){return a instanceof b.Graphics?((a.dirty||a.clearDirty||!a._webGL[c.plugins.graphics.CONTEXT_UID])&&
c.plugins.graphics.updateGraphics(a),!0):!1}function f(c,a){return c instanceof b.Graphics?(a.push(c),!0):!1}d.__esModule=!0;var b=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(a("../../core"));a=a("../BasePrepare");a=function(b){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=b.call(this,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.uploadHookHelper=e.renderer;e.registerFindHook(f);e.registerUploadHook(h);e.registerUploadHook(c);return e}k(a,b);return a}((a&&a.__esModule?a:{default:a}).default);d.default=a;b.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":182}],188:[function(a,g,d){(function(g){function h(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}
d.__esModule=!0;d.loader=d.prepare=d.particles=d.mesh=d.loaders=d.interaction=d.filters=d.extras=d.extract=d.accessibility=void 0;var c=a("./polyfill");Object.keys(c).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(d,b,{enumerable:!0,get:function(){return c[b]}})});var f=a("./core");Object.keys(f).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(d,b,{enumerable:!0,get:function(){return f[b]}})});var b=a("./deprecation");b=b&&b.__esModule?b:{default:b};
var e=a("./accessibility");e=h(e);var k=a("./extract");k=h(k);var m=a("./extras");m=h(m);var q=a("./filters");q=h(q);var x=a("./interaction");x=h(x);var r=a("./loaders");r=h(r);var u=a("./mesh");u=h(u);var v=a("./particles");v=h(v);var w=a("./prepare");w=h(w);f.utils.mixins.performMixins();var t=r.shared||null;d.accessibility=e;d.extract=k;d.extras=m;d.filters=q;d.interaction=x;d.loaders=r;d.mesh=u;d.particles=v;d.prepare=w;d.loader=t;"function"===typeof b.default&&(0,b.default)(d);g.PIXI=d}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)});
(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Loader=n()})(function(){return function(){function n(a,g,d){function k(c,b){if(!g[c]){if(!a[c]){var e="function"==typeof require&&require;if(!b&&e)return e(c,!0);if(h)return h(c,!0);b=Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b;
}b=g[c]={exports:{}};a[c][0].call(b.exports,function(b){var e=a[c][1][b];return k(e?e:b)},b,b.exports,n,a,g,d)}return g[c].exports}for(var h="function"==typeof require&&require,c=0;c<d.length;c++)k(d[c]);return k}return n}()({1:[function(n,a,g){function d(b){return b&&b.__esModule?b:{default:b}}g.__esModule=!0;var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":typeof b},h=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}();a=n("mini-signals");var c=d(a);a=n("parse-uri");var f=d(a),b=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(n("./async"));n=n("./Resource");
var e=d(n),l=/(#[\w-]+)?$/;n=function(){function a(){var e=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.baseUrl=d;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(b,c){return e._loadResource(b,c)};this._queue=b.queue(this._boundLoadResource,
f);this._queue.pause();this.resources={};this.onProgress=new c.default;this.onError=new c.default;this.onLoad=new c.default;this.onStart=new c.default;this.onComplete=new c.default}a.prototype.add=function(b,c,a,d){if(Array.isArray(b)){for(c=0;c<b.length;++c)this.add(b[c]);return this}"object"===("undefined"===typeof b?"undefined":k(b))&&(d=c||b.callback||b.onComplete,a=b,c=b.url,b=b.name||b.key||b.url);"string"!==typeof c&&(d=a,a=c,c=b);if("string"!==typeof c)throw Error("No url passed to add resource to loader.");
"function"===typeof a&&(d=a,a=null);if(this.loading&&(!a||!a.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[b])throw Error('Resource named "'+b+'" already exists.');c=this._prepareUrl(c);this.resources[b]=new e.default(b,c,a);if("function"===typeof d)this.resources[b].onAfterMiddleware.once(d);if(this.loading){a=a.parentResource;c=[];for(d=0;d<a.children.length;++d)a.children[d].isComplete||c.push(a.children[d]);d=a.progressChunk*(c.length+1)/(c.length+
2);a.children.push(this.resources[b]);a.progressChunk=d;for(a=0;a<c.length;++a)c[a].progressChunk=d;this.resources[b].progressChunk=d}this._queue.push(this.resources[b]);return this};a.prototype.pre=function(b){this._beforeMiddleware.push(b);return this};a.prototype.use=function(b){this._afterMiddleware.push(b);return this};a.prototype.reset=function(){this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(var b in this.resources){var c=this.resources[b];c._onLoadBinding&&c._onLoadBinding.detach();
c.isLoading&&c.abort()}this.resources={};return this};a.prototype.load=function(b){if("function"===typeof b)this.onComplete.once(b);if(this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{b=100/this._queue._tasks.length;for(var c=0;c<this._queue._tasks.length;++c)this._queue._tasks[c].data.progressChunk=b;this._onStart();this._queue.resume()}return this};a.prototype._prepareUrl=function(b){var c=(0,f.default)(b,{strictMode:!0});b=c.protocol||!c.path||0===b.indexOf("//")?
b:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==b.charAt(0)?this.baseUrl+"/"+b:this.baseUrl+b;this.defaultQueryString&&(c=l.exec(b)[0],b=b.substr(0,b.length-c.length),b=-1!==b.indexOf("?")?b+("&"+this.defaultQueryString):b+("?"+this.defaultQueryString),b+=c);return b};a.prototype._loadResource=function(c,a){var e=this;c._dequeue=a;b.eachSeries(this._beforeMiddleware,function(b,a){b.call(e,c,function(){a(c.isComplete?{}:null)})},function(){c.isComplete?e._onLoad(c):
(c._onLoadBinding=c.onComplete.once(e._onLoad,e),c.load())},!0)};a.prototype._onStart=function(){this.progress=0;this.loading=!0;this.onStart.dispatch(this)};a.prototype._onComplete=function(){this.progress=100;this.loading=!1;this.onComplete.dispatch(this,this.resources)};a.prototype._onLoad=function(c){var a=this;c._onLoadBinding=null;this._resourcesParsing.push(c);c._dequeue();b.eachSeries(this._afterMiddleware,function(b,e){b.call(a,c,e)},function(){c.onAfterMiddleware.dispatch(c);a.progress=
Math.min(100,a.progress+c.progressChunk);a.onProgress.dispatch(a,c);c.error?a.onError.dispatch(c.error,a,c):a.onLoad.dispatch(a,c);a._resourcesParsing.splice(a._resourcesParsing.indexOf(c),1);a._queue.idle()&&0===a._resourcesParsing.length&&a._onComplete()},!0)};h(a,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(b){this._queue.concurrency=b}}]);return a}();g.default=n},{"./Resource":2,"./async":3,"mini-signals":6,"parse-uri":7}],2:[function(n,a,g){function d(){}function k(b,
c,a){c&&0===c.indexOf(".")&&(c=c.substring(1));c&&(b[c]=a)}function h(b){return b.toString().replace("object ","")}g.__esModule=!0;var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,a,e){a&&b(c.prototype,a);e&&b(c,e);return c}}(),f=(a=n("parse-uri"))&&a.__esModule?a:{default:a},b=(n=n("mini-signals"))&&n.__esModule?n:{default:n},e=!(!window.XDomainRequest||
"withCredentials"in new XMLHttpRequest),l=null;n=function(){function a(c,e,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if("string"!==typeof c||"string"!==typeof e)throw Error("Both name and url are required for constructing a resource.");f=f||{};this._flags=0;this._setFlag(a.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:"));this.name=c;this.url=e;this.extension=this._getExtension();this.data=null;this.crossOrigin=!0===f.crossOrigin?"anonymous":f.crossOrigin;this.loadType=
f.loadType||this._determineLoadType();this.xhrType=f.xhrType;this.metadata=f.metadata||{};this.xhr=this.error=null;this.children=[];this.type=a.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=d;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);
this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new b.default;this.onProgress=new b.default;this.onComplete=new b.default;this.onAfterMiddleware=new b.default}a.setExtensionLoadType=function(b,c){k(a._loadTypeMap,b,c)};a.setExtensionXhrType=function(b,c){k(a._xhrTypeMap,b,c)};a.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",
this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1));this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));if(this.isComplete)throw Error("Complete called again for an already completed resource.");
this._setFlag(a.STATUS_FLAGS.COMPLETE,!0);this._setFlag(a.STATUS_FLAGS.LOADING,!1);this.onComplete.dispatch(this)};a.prototype.abort=function(b){if(!this.error){this.error=Error(b);if(this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}};a.prototype.load=function(b){var c=this;if(!this.isLoading)if(this.isComplete)b&&setTimeout(function(){return b(c)},
1);else{if(b)this.onComplete.once(b);this._setFlag(a.STATUS_FLAGS.LOADING,!0);this.onStart.dispatch(this);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE;this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO;this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO;this._loadSourceElement("video");break;default:e&&
this.crossOrigin?this._loadXdr():this._loadXhr()}}};a.prototype._hasFlag=function(b){return!!(this._flags&b)};a.prototype._setFlag=function(b,c){this._flags=c?this._flags|b:this._flags&~b};a.prototype._loadElement=function(b){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===b&&"undefined"!==typeof window.Image?new Image:document.createElement(b);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",
this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};a.prototype._loadSourceElement=function(b){this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===b&&"undefined"!==typeof window.Audio?new Audio:document.createElement(b);if(null===this.data)this.abort("Unsupported element: "+b);else{if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;
else if(Array.isArray(this.url))for(var c=this.metadata.mimeType,a=0;a<this.url.length;++a)this.data.appendChild(this._createSource(b,this.url[a],Array.isArray(c)?c[a]:c));else c=this.metadata.mimeType,this.data.appendChild(this._createSource(b,this.url,Array.isArray(c)?c[0]:c));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",
this._boundComplete,!1);this.data.load()}};a.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType=this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT?a.XHR_RESPONSE_TYPE.TEXT:this.xhrType;b.addEventListener("error",this._boundXhrOnError,!1);b.addEventListener("abort",this._boundXhrOnAbort,!1);b.addEventListener("progress",this._boundOnProgress,
!1);b.addEventListener("load",this._boundXhrOnLoad,!1);b.send()};a.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XDomainRequest;b.timeout=5E3;b.onerror=this._boundXhrOnError;b.ontimeout=this._boundXdrOnTimeout;b.onprogress=this._boundOnProgress;b.onload=this._boundXhrOnLoad;b.open("GET",this.url,!0);setTimeout(function(){return b.send()},1)};a.prototype._createSource=function(b,c,a){a||(a=b+"/"+this._getExtension(c));b=document.createElement("source");
b.src=c;b.type=a;return b};a.prototype._onError=function(b){this.abort("Failed to load element using: "+b.target.nodeName)};a.prototype._onProgress=function(b){b&&b.lengthComputable&&this.onProgress.dispatch(this,b.loaded/b.total)};a.prototype._xhrOnError=function(){var b=this.xhr;this.abort(h(b)+" Request failed. Status: "+b.status+', text: "'+b.statusText+'"')};a.prototype._xhrOnAbort=function(){this.abort(h(this.xhr)+" Request was aborted by the user.")};a.prototype._xdrOnTimeout=function(){this.abort(h(this.xhr)+
" Request timed out.")};a.prototype._xhrOnLoad=function(){var b=this.xhr,c="",e="undefined"===typeof b.status?200:b.status;if(""===b.responseType||"text"===b.responseType||"undefined"===typeof b.responseType)c=b.responseText;0===e&&(0<c.length||b.responseType===a.XHR_RESPONSE_TYPE.BUFFER)?e=200:1223===e&&(e=204);if(2===(e/100|0)){if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=a.TYPE.JSON}catch(v){this.abort("Error trying to parse loaded json: "+
v);return}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(c,"text/xml");else{var d=document.createElement("div");d.innerHTML=c;this.data=d}this.type=a.TYPE.XML}catch(v){this.abort("Error trying to parse loaded xml: "+v);return}else this.data=b.response||c;this.complete()}else this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL)};a.prototype._determineCrossOrigin=function(b,c){if(0===b.indexOf("data:"))return"";c=c||window.location;
l||(l=document.createElement("a"));l.href=b;b=(0,f.default)(l.href,{strictMode:!0});var a=!b.port&&""===c.port||b.port===c.port,e=b.protocol?b.protocol+":":"";return b.host===c.hostname&&a&&e===c.protocol?"":"anonymous"};a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||a.XHR_RESPONSE_TYPE.TEXT};a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR};a.prototype._getExtension=function(){var b=this.url;if(this.isDataUrl){var c=
b.indexOf("/");b=b.substring(c+1,b.indexOf(";",c))}else{c=b.indexOf("?");var a=b.indexOf("#");b=b.substring(0,Math.min(-1<c?c:b.length,-1<a?a:b.length));b=b.substring(b.lastIndexOf(".")+1)}return b.toLowerCase()};a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};
c(a,[{key:"isDataUrl",get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)}}]);return a}();g.default=n;n.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};n.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",
DOCUMENT:"document",JSON:"json",TEXT:"text"};n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO};n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,
htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,
ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER};n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":6,"parse-uri":7}],3:[function(n,a,g){function d(){}function k(a){return function(){if(null===a)throw Error("Callback was already called.");var c=a;a=null;c.apply(this,arguments)}}g.__esModule=!0;g.eachSeries=function(a,c,d,b){var e=0,f=a.length;(function x(g){g||e===f?d&&d(g):b?setTimeout(function(){c(a[e++],x)},1):c(a[e++],
x)})()};g.queue=function(a,c){function f(b,c,a){if(null!=a&&"function"!==typeof a)throw Error("task callback must be a function");g.started=!0;null==b&&g.idle()?setTimeout(function(){return g.drain()},1):(b={data:b,callback:"function"===typeof a?a:d},c?g._tasks.unshift(b):g._tasks.push(b),setTimeout(function(){return g.process()},1))}function b(b){return function(){--e;b.callback.apply(b,arguments);null!=arguments[0]&&g.error(arguments[0],b.data);e<=g.concurrency-g.buffer&&g.unsaturated();g.idle()&&
g.drain();g.process()}}if(null==c)c=1;else if(0===c)throw Error("Concurrency must not be zero");var e=0,g={_tasks:[],concurrency:c,saturated:d,unsaturated:d,buffer:c/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(b,c){f(b,!1,c)},kill:function(){e=0;g.drain=d;g.started=!1;g._tasks=[]},unshift:function(b,c){f(b,!0,c)},process:function(){for(;!g.paused&&e<g.concurrency&&g._tasks.length;){var c=g._tasks.shift();0===g._tasks.length&&g.empty();e+=1;e===g.concurrency&&g.saturated();a(c.data,
k(b(c)))}},length:function(){return g._tasks.length},running:function(){return e},idle:function(){return 0===g._tasks.length+e},pause:function(){!0!==g.paused&&(g.paused=!0)},resume:function(){if(!1!==g.paused){g.paused=!1;for(var b=1;b<=g.concurrency;b++)g.process()}}};return g}},{}],4:[function(n,a,g){g.__esModule=!0;g.encodeBinary=function(a){for(var g="",c=0;c<a.length;){for(var f=[0,0,0],b=[0,0,0,0],e=0;e<f.length;++e)f[e]=c<a.length?a.charCodeAt(c++)&255:0;b[0]=f[0]>>2;b[1]=(f[0]&3)<<4|f[1]>>
4;b[2]=(f[1]&15)<<2|f[2]>>6;b[3]=f[2]&63;switch(c-(a.length-1)){case 2:b[3]=64;b[2]=64;break;case 1:b[3]=64}for(f=0;f<b.length;++f)g+=d.charAt(b[f])}return g};var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],5:[function(n,a,g){g=n("./Loader").default;var d=n("./Resource").default,k=n("./async");n=n("./b64");g.Resource=d;g.async=k;g.base64=n;a.exports=g;a.exports.default=g},{"./Loader":1,"./Resource":2,"./async":3,"./b64":4}],6:[function(n,a,g){function d(c,b){if(!(c instanceof
b))throw new TypeError("Cannot call a class as a function");}function k(c,b){c._head?(c._tail._next=b,b._prev=c._tail):c._head=b;c._tail=b;b._owner=c;return b}Object.defineProperty(g,"__esModule",{value:!0});var h=function(){function c(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,a,d){a&&c(b.prototype,a);d&&c(b,d);return b}}(),c=function(){function c(b,a,f){void 0===a&&(a=
!1);d(this,c);this._fn=b;this._once=a;this._thisArg=f;this._next=this._prev=this._owner=null}h(c,[{key:"detach",value:function(){if(null===this._owner)return!1;this._owner.detach(this);return!0}}]);return c}();n=function(){function a(){d(this,a);this._head=this._tail=void 0}h(a,[{key:"handlers",value:function(){var b=this._head;if(0>=arguments.length||void 0===arguments[0]?0:arguments[0])return!!b;for(var c=[];b;)c.push(b),b=b._next;return c}},{key:"has",value:function(b){if(!(b instanceof c))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");
return b._owner===this}},{key:"dispatch",value:function(){var b=this._head;if(!b)return!1;for(;b;)b._once&&this.detach(b),b._fn.apply(b._thisArg,arguments),b=b._next;return!0}},{key:"add",value:function(b){var a=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof b)throw Error("MiniSignal#add(): First arg must be a Function.");return k(this,new c(b,!1,a))}},{key:"once",value:function(b){var a=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==
typeof b)throw Error("MiniSignal#once(): First arg must be a Function.");return k(this,new c(b,!0,a))}},{key:"detach",value:function(b){if(!(b instanceof c))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");if(b._owner!==this)return this;b._prev&&(b._prev._next=b._next);b._next&&(b._next._prev=b._prev);b===this._head?(this._head=b._next,null===b._next&&(this._tail=null)):b===this._tail&&(this._tail=b._prev,this._tail._next=null);b._owner=null;return this}},{key:"detachAll",
value:function(){var b=this._head;if(!b)return this;for(this._head=this._tail=null;b;)b._owner=null,b=b._next;return this}}]);return a}();n.MiniSignalBinding=c;g["default"]=n;a.exports=g["default"]},{}],7:[function(n,a,g){a.exports=function(a,g){g=g||{};var d="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}[g.strictMode?"strict":"loose"].exec(a);var c={};for(g=14;g--;)c[d[g]]=a[g]||"";c.queryKey={};c[d[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,e){b&&(c.queryKey[b]=e)});return c}},{}]},{},[5])(5)});var EPSY;
(function(n){n.EmitterParams="id border duration emissionRate totalParticles xFactor aFactor xEquation yEquation posTransform zIndex".split(" ");class a{constructor(a){this.id=(1E20*Math.random()).toString(36);this.settings=new n.EmitterEntity;this.time=Date.now();this.emissionRate=this._totalParticles=0;this.allOrNone=!1;this.aFactor={x:0,y:0};this.xFactor={x:0,y:0};this._yEqName=this._xEqName="";this.active=!1;this.duration=0;this.cycles=Infinity;this._particlePool=[];this._emitCounter=this._curCycle=
this._elapsed=this._particleIndex=this._particleCount=0;this.border={top:100,left:100,bottom:100,right:100};this.recyclable=[];this._baseSystem=n.utils.obj.clone(a,["texture"]);this.load(a)}get zIndex(){return this.container?this.container.__z||0:0}set zIndex(a){this.container&&(this.container.__z=~~a)}get xEquation(){return this._xEqName}set xEquation(a){"function"==typeof Math[a]?(this._xEqName=a,this._xEquation=Math[a]):(this._xEqName="",this._xEquation=void 0)}get yEquation(){return this._yEqName}set yEquation(a){"function"==
typeof Math[a]?(this._yEqName=a,this._yEquation=Math[a]):(this._yEqName="",this._yEquation=void 0)}get posTransform(){if(this._posTransform)return this._posTransform.toString().match(/[^{]+(.+)\}/g)[0]}set posTransform(a){this._posTransform="function"==typeof a?a:new Function("pos","particle",a)}get particles(){return this._particlePool}set particles(a){this._particlePool=a}get totalParticles(){return this._totalParticles}set totalParticles(a){a|=0;a!==this._totalParticles&&(this._totalParticles=
a,this.restart())}load(a){this.emissionRate=this._totalParticles=0;this.active=!1;this.duration=0;this.settings.pos.x=0;this.settings.pos.y=0;this.settings.posVar.x=0;this.settings.posVar.y=0;this.settings.speed=0;this.settings.speedVar=0;this.settings.angle=0;this.settings.angleVar=0;this.settings.life=0;this.settings.lifeVar=0;this.settings.radius=0;this.settings.radiusVar=0;this.settings.texture=null;this.settings.textureAdditive=!1;this.settings.startScale=0;this.settings.startScaleVar=0;this.settings.endScale=
0;this.settings.endScaleVar=0;this.settings.startColor[0]=0;this.settings.startColor[1]=0;this.settings.startColor[2]=0;this.settings.startColor[3]=0;this.settings.startColorVar[0]=0;this.settings.startColorVar[1]=0;this.settings.startColorVar[2]=0;this.settings.startColorVar[3]=0;this.settings.endColor[0]=0;this.settings.endColor[1]=0;this.settings.endColor[2]=0;this.settings.endColor[3]=0;this.settings.endColorVar[0]=0;this.settings.endColorVar[1]=0;this.settings.endColorVar[2]=0;this.settings.endColorVar[3]=
0;this.settings.gravity.x=0;this.settings.gravity.y=0;this.settings.radialAccel=0;this.settings.radialAccelVar=0;this.settings.tangentialAccel=0;this.settings.tangentialAccelVar=0;n.utils.obj.recursiveExtend(this.settings,a,n.EmitterParams);n.utils.obj.recursiveExtendInclusive(this,a,n.EmitterParams);isNaN(this.duration)&&(this.duration=Infinity);this.id=a.name||this.id;this.restart()}save(){var a=JSON.parse(JSON.stringify(this.settings));n.utils.obj.recursiveExtendInclusive(a,this,n.EmitterParams);
return a}restart(){if(this._particlePool.length<this.totalParticles)for(var a=this._particlePool.length;a<this.totalParticles;++a)this._particlePool.push(new n.Particle);this._particlePool.length>this.totalParticles&&(a=this._particlePool.splice(this.totalParticles),this.recyclable=this.recyclable.concat(a));for(a=0;a<this.totalParticles;++a)this._particlePool[a].recycled=!0;this._emitCounter=this._curCycle=this._elapsed=this._particleIndex=this._particleCount=0}reset(){this.load(this._baseSystem)}_isFull(){return this._particleCount===
this.totalParticles}createParticle(){if(this._isFull())return!1;this.initParticle(this._particlePool[this._particleCount]);this._particleCount++;return!0}initParticle(a){a.texture=this.settings.texture;a.textureAdditive=this.settings.textureAdditive;var d={x:this.settings.posVar.x*n.utils.math.frandom(-1,1),y:this.settings.posVar.y*n.utils.math.frandom(-1,1)};this._posTransform&&(d=this._posTransform.call(this,d,a));a.pos.x=this.settings.pos.x+d.x;a.pos.y=this.settings.pos.y+d.y;d=this.settings.angle+
this.settings.angleVar*n.utils.math.frandom(-1,1);var g=this.settings.speed+this.settings.speedVar*n.utils.math.frandom(-1,1);a.setVelocity(d,g);a.radialAccel=this.settings.radialAccel+this.settings.radialAccelVar*n.utils.math.frandom(-1,1)||0;a.tangentialAccel=this.settings.tangentialAccel+this.settings.tangentialAccelVar*n.utils.math.frandom(-1,1)||0;d=this.settings.life+this.settings.lifeVar*n.utils.math.frandom(-1,1)||0;a.life=Math.max(0,d);a.scale=n.utils.math.isNumber(this.settings.startScale)?
this.settings.startScale:1;a.deltaScale=n.utils.math.isNumber(this.settings.endScale)?this.settings.endScale-this.settings.startScale:0;a.deltaScale/=a.life;a.radius=n.utils.math.isNumber(this.settings.radius)?this.settings.radius+(this.settings.radiusVar||0)*n.utils.math.frandom(-1,1):0;if(this.settings.startColor)for(g=d=[this.settings.startColor[0]+this.settings.startColorVar[0]*n.utils.math.frandom(-1,1),this.settings.startColor[1]+this.settings.startColorVar[1]*n.utils.math.frandom(-1,1),this.settings.startColor[2]+
this.settings.startColorVar[2]*n.utils.math.frandom(-1,1),this.settings.startColor[3]+this.settings.startColorVar[3]*n.utils.math.frandom(-1,1)],this.settings.endColor&&(g=[this.settings.endColor[0]+this.settings.endColorVar[0]*n.utils.math.frandom(-1,1),this.settings.endColor[1]+this.settings.endColorVar[1]*n.utils.math.frandom(-1,1),this.settings.endColor[2]+this.settings.endColorVar[2]*n.utils.math.frandom(-1,1),this.settings.endColor[3]+this.settings.endColorVar[3]*n.utils.math.frandom(-1,1)]),
a.color=d,a.deltaColor=[(g[0]-d[0])/a.life,(g[1]-d[1])/a.life,(g[2]-d[2])/a.life,(g[3]-d[3])/a.life],d=0;3>d;d++)a.startColor[d]=~~a.startColor[d],a.endColor[d]=~~a.endColor[d],a.deltaColor[d]=~~a.deltaColor[d]}updateParticle(a,d,k){!this.border||a.pos.x>=this.settings.pos.x-this.border.left&&a.pos.y>=this.settings.pos.y-this.border.top&&a.pos.x<=this.settings.pos.x+this.border.right&&a.pos.y<=this.settings.pos.y+this.border.bottom||(a.life=0);if(0<a.life){a.radial.x=0;a.radial.y=0;a.forces.x=0;a.forces.y=
0;a.pos.x===this.settings.pos.x&&a.pos.y===this.settings.pos.y||!a.radialAccel&&!a.tangentialAccel||(a.radial.x=a.pos.x-this.settings.pos.x,a.radial.y=a.pos.y-this.settings.pos.y,n.utils.math.normalize(a.radial));a.tangential.x=a.radial.x;a.tangential.y=a.radial.y;a.radial.x*=a.radialAccel;a.radial.y*=a.radialAccel;k=a.tangential.x;a.tangential.x=-a.tangential.y;a.tangential.y=k;a.tangential.x*=a.tangentialAccel;a.tangential.y*=a.tangentialAccel;a.forces.x=a.radial.x+a.tangential.x+this.settings.gravity.x;
a.forces.y=a.radial.y+a.tangential.y+this.settings.gravity.y;a.forces.x*=d;a.forces.y*=d;a.vel.x+=a.forces.x;a.vel.y+=a.forces.y;a.lastpos.x=a.pos.x;a.lastpos.y=a.pos.y;var h=k=0;this._xEquation&&(k=this.aFactor.x*this._xEquation(a.life*this.xFactor.x*Math.PI));this._yEquation&&(h=this.aFactor.y*this._yEquation(a.life*this.xFactor.y*Math.PI));a.pos.x+=a.vel.x*d+k;a.pos.y+=a.vel.y*d+h;a.life-=d;a.scale+=a.deltaScale*d;a.color&&(0<this.settings.colorList.length?(a.color[0]=this.settings.colorList[a.colorIdx][0],
a.color[1]=this.settings.colorList[a.colorIdx][1],a.color[2]=this.settings.colorList[a.colorIdx][2],a.color[3]=this.settings.colorList[a.colorIdx][3],a.colorIdx++,a.colorIdx>=this.settings.colorList.length&&(a.colorIdx=0)):(a.color[0]+=a.deltaColor[0]*d,a.color[1]+=a.deltaColor[1]*d,a.color[2]+=a.deltaColor[2]*d,a.color[3]+=a.deltaColor[3]*d));++this._particleIndex}else a.color[3]=0,a=this._particlePool[k],this._particlePool[k]=this._particlePool[this._particleCount-1],this._particlePool[this._particleCount-
1]=a,--this._particleCount}kill(){for(var a=0;a<this._particlePool.length;a++)this._particlePool[a].life=0;this._particlePool=[];this.duration=-1;this._emitCounter=this._elapsed=this._particleIndex=this._particleCount=0}update(a){this._elapsed+=a;if(this.active=this._elapsed<this.duration){if(this.emissionRate){var d=1/this.emissionRate;this._emitCounter+=a;if(!this.allOrNone)for(;!this._isFull()&&this._emitCounter>d;)this.createParticle(),this._emitCounter-=d;else if(0==this._particleCount&&this._curCycle<
this.cycles){for(;!this._isFull();)this.createParticle();this._curCycle++}}for(this._particleIndex=0;this._particleIndex<this._particleCount;)this.updateParticle(this._particlePool[this._particleIndex],a,this._particleIndex)}}}n.Emitter=a})(EPSY||(EPSY={}));
(function(n){class a{constructor(){this.pos={x:0,y:0};this.posVar={x:0,y:0};this.radiusVar=this.radius=this.lifeVar=this.life=this.angleVar=this.angle=this.speedVar=this.speed=0;this.textureAdditive=!1;this.endScaleVar=this.endScale=this.startScaleVar=this.startScale=0;this.startColor=[0,0,0,0];this.startColorVar=[0,0,0,0];this.endColor=[0,0,0,0];this.endColorVar=[0,0,0,0];this.colorList=[];this.gravity={x:0,y:0};this.tangentialAccelVar=this.tangentialAccel=this.radialAccelVar=this.radialAccel=0}}
n.EmitterEntity=a})(EPSY||(EPSY={}));(function(n){class a extends n.EmitterEntity{constructor(){super();this.lastpos={x:-1,y:-1};this.vel={x:0,y:0};this.forces={x:0,y:0};this.radial={x:0,y:0};this.tangential={x:0,y:0};this.colorIdx=0;this.recycled=!1;this.setVelocity(0,0)}setVelocity(a,d){this.vel.x=Math.cos(n.utils.math.toRad(a))*d;this.vel.y=-Math.sin(n.utils.math.toRad(a))*d}}n.Particle=a})(EPSY||(EPSY={}));
(function(n){class a{constructor(a){this.context=a;this.defaultTexture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACz0lEQVR42t2XP0hbURTGnfp/KK3QFiylCG11aRYpBQWFDiJCg266BNQtdnBQyOASQjp1KS4KGVw6iXMWEUdHUShkCBhSQpaQkJg/Jmm/H3xLEdtaWvLawMfJvfec79x77jnnvdfX96/9MpnM9VwudzOfz98qFAq3kYyZ/6tOi8XinVKpdLdSqfRXq9UHwsNarfYIyZh51tH7Y5s5Pj6+BqHI7+OsXq8/aTQag8LzZrM5JAwjGTPPOnroY4f9bzvPZrM3OBEnFPFTOXohvGy1WiPC6/Pz81FhDMmYedbRQx877OG5snPutFwu3zs7OxvQyZ6JPGSnE8KkMN1ut98KYSRjz094MyHssIcHviud3M4fE15OJuJxOZoSZoU5ISIsCIuWEc+zPoW+IzIED3y/FAnujLCxczt/JbI3Pum8sCQsCyudTmdVWEMy9vyS9cLYYe9NDMD705wgcbg7h33Ezmd8wqidrgtxISm8t4x7ns1ErT/jTYzABy/8Pyw1spcE4g4d9rDJ3ok8JiSED8KGsClsWW54nvUY+rYL+zpC8MJ/aYmyO0qILCaRfOfzPnnMJ/0opIRPwk63291FepzyetKbiNp+Cj544b80CtwRdUwpkc1OqCWHPWHybTtNS+5LHlimPb9tvYSvg5yYhQ9e+PFzWfj7aSa++0ln9bLvlvCm7GRP8lDySDhBerzn9ZT1152Yc/A5Fwbxc+EaqFPaKR3N9T7tO1xxgm04zJz0UPis/6fCFyRjbyJtPfTjro4IfPDCj58LfYEHCllKydDZ3GQWHP6kE23H4T6y05Jk1fLUkdh3TmzabtV9gmY1Cj9+8PfdBniqOQGHaa/O/kXXOaW25fAeOOycvPpVP6THJ86JXVcHdmtuVlTDGPz4wV+wItDzHOh5FfS8DwSiE/b8WdDzp2Eg3gd6/kYUiHfCQLwVB+K7IBBfRoH5Nvyvf98A3rZr7fen7G8AAAAASUVORK5CYII=";this.buffer=
[];this._sortFn=function(a,g){return(a.__z||0)-(g.__z||0)}}updateParticleSprite(a,d){if(0>=d.life&&d.sprite)d.sprite.visible=!1;else{if(!d.sprite||d.recycled){var g=PIXI.Texture.fromImage(d.texture||this.defaultTexture);d.recycled&&d.sprite?d.sprite.texture=g:d.sprite=new PIXI.Sprite(g);d.sprite.__parentParticle=d;d.sprite.anchor.x=.5;d.sprite.anchor.y=.5;d.sprite.tail=0}d.inserted||(d.inserted=!0,this.buffer.push(d.sprite),a.container.addChild(d.sprite));d.sprite.visible=0<d.life;d.sprite.width=
d.radius*d.scale;d.sprite.height=d.radius*d.scale;d.sprite.position.x=d.pos.x;d.sprite.position.y=d.pos.y;d.sprite.blendMode=d.textureAdditive?PIXI.BLEND_MODES.ADD:PIXI.BLEND_MODES.NORMAL;d.sprite.tint=~~d.color[2]+256*~~d.color[1]+65536*~~d.color[0];d.sprite.alpha=d.color[3]}}render(a){var d=a.particles;a.container||(a.container=new PIXI.particles.ParticleContainer(a.totalParticles,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0,tint:!0}),a.settings.textureAdditive&&(a.container.blendMode=h.textureAdditive?
PIXI.BLEND_MODES.ADD:PIXI.BLEND_MODES.NORMAL),this.context.addChild(a.container));for(h=0;h<d.length;++h){var g=d[h];g.color&&this.updateParticleSprite(a,g)}if(0<a.recyclable.length)for(var h;h=a.recyclable.pop();)h.life=0,h.sprite&&(h.sprite.visible=!1,h.sprite.__parentParticle&&(h.sprite.__parentParticle.inserted=!1))}hideAllParticles(a){for(var d=0;d<a.particles.length;d++)a.particles[d].life=0}sort(){this.context.children.sort(this._sortFn)}reset(){var a=0;do{var d=this.buffer.pop();if(d){for(var k=
0;k<this.context.children.length;k++){var h=this.context.children[k];if(h)try{h.removeChild(d),a++}catch(c){}}d.__parentParticle&&(d.__parentParticle.inserted=!1,d.__parentParticle.life=0)}}while(0<this.buffer.length);console.log("reset particles = ",a)}}n.PixiRenderer=a})(EPSY||(EPSY={}));
(function(n){function a(a){var d=a.img;d||(d=new Image,a.ready=!1,d.onload=function(){a.ready=!0},d.src=a.texture,a.img=d);if(a.ready){var c=""+d.width+"x"+d.height,f=g[c];f||(f=document.createElement("canvas"),f.width=d.width,f.height=d.height,g[c]=f);return f}}var g={};class d{constructor(a){this.context=a;this.defaultTexture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACz0lEQVR42t2XP0hbURTGnfp/KK3QFiylCG11aRYpBQWFDiJCg266BNQtdnBQyOASQjp1KS4KGVw6iXMWEUdHUShkCBhSQpaQkJg/Jmm/H3xLEdtaWvLawMfJvfec79x77jnnvdfX96/9MpnM9VwudzOfz98qFAq3kYyZ/6tOi8XinVKpdLdSqfRXq9UHwsNarfYIyZh51tH7Y5s5Pj6+BqHI7+OsXq8/aTQag8LzZrM5JAwjGTPPOnroY4f9bzvPZrM3OBEnFPFTOXohvGy1WiPC6/Pz81FhDMmYedbRQx877OG5snPutFwu3zs7OxvQyZ6JPGSnE8KkMN1ut98KYSRjz094MyHssIcHviud3M4fE15OJuJxOZoSZoU5ISIsCIuWEc+zPoW+IzIED3y/FAnujLCxczt/JbI3Pum8sCQsCyudTmdVWEMy9vyS9cLYYe9NDMD705wgcbg7h33Ezmd8wqidrgtxISm8t4x7ns1ErT/jTYzABy/8Pyw1spcE4g4d9rDJ3ok8JiSED8KGsClsWW54nvUY+rYL+zpC8MJ/aYmyO0qILCaRfOfzPnnMJ/0opIRPwk63291FepzyetKbiNp+Cj544b80CtwRdUwpkc1OqCWHPWHybTtNS+5LHlimPb9tvYSvg5yYhQ9e+PFzWfj7aSa++0ln9bLvlvCm7GRP8lDySDhBerzn9ZT1152Yc/A5Fwbxc+EaqFPaKR3N9T7tO1xxgm04zJz0UPis/6fCFyRjbyJtPfTjro4IfPDCj58LfYEHCllKydDZ3GQWHP6kE23H4T6y05Jk1fLUkdh3TmzabtV9gmY1Cj9+8PfdBniqOQGHaa/O/kXXOaW25fAeOOycvPpVP6THJ86JXVcHdmtuVlTDGPz4wV+wItDzHOh5FfS8DwSiE/b8WdDzp2Eg3gd6/kYUiHfCQLwVB+K7IBBfRoH5Nvyvf98A3rZr7fen7G8AAAAASUVORK5CYII="}renderParticle(d){d.texture||
(d.texture=this.defaultTexture);d.buffer=d.buffer||a(d);if(d.buffer){var h=d.buffer.getContext("2d"),c=d.img.width*d.scale|0,f=d.img.height*d.scale|0,b=d.pos.x-c/2,e=d.pos.y-f/2;h.clearRect(0,0,d.buffer.width,d.buffer.height);h.globalAlpha=d.color[3];h.drawImage(d.img,0,0);h.globalCompositeOperation="source-atop";var g=d.color;h.fillStyle="rgba("+(g[0]|0)+", "+(g[1]|0)+", "+(g[2]|0)+", 1)";h.fillRect(0,0,d.buffer.width,d.buffer.height);h.globalCompositeOperation="source-over";h.globalAlpha=1;this.context.globalCompositeOperation=
d.textureAdditive?"lighter":"source-over";this.context.drawImage(d.buffer,0,0,d.buffer.width,d.buffer.height,b,e,c,f)}}render(a){a=a.particles;for(var d=0;d<a.length;++d){var c=a[d];0<c.life&&c.color&&this.renderParticle(c)}this.context.globalCompositeOperation="source-over"}reset(){}}n.CanvasRenderer=d})(EPSY||(EPSY={}));
(function(n){(function(a){(function(a){a.clone=function(a,g){g={};this.extend(g,a);return g};a.extend=function(a,g){for(var d in g)g.hasOwnProperty(d)&&(a[d]=g[d])};a.recursiveExtend=function(a,g,h){h=h||[];for(var c in g)g.hasOwnProperty(c)&&(-1<h.indexOf(c)?a[c]=g[c]:"object"===typeof g[c]?this.recursiveExtend(a[c],g[c],h):a[c]=g[c])};a.recursiveExtendInclusive=function(a,g,h){if(h&&h.length&&!(0>=h.length))for(var c in g)0<=h.indexOf(c)&&("object"===typeof g[c]?(a[c]||(a[c]={}),this.recursiveExtend(a[c],
g[c])):a[c]=g[c])}})(a.obj||(a.obj={}))})(n.utils||(n.utils={}))})(EPSY||(EPSY={}));
(function(n){(function(a){(function(a){a.toRad=function(a){return Math.PI*a/180};a.isNumber=function(a){return"number"===typeof a};a.isInteger=function(a){return a===(a|0)};a.frandom=function(a,g){return Math.random()*(g-a)+a};a.irandom=function(a,g){return Math.floor(Math.random()*(g-a+1)+a)};a.normalize=function(a){var d=Math.sqrt(a.x*a.x+a.y*a.y);a.x/=d;a.y/=d}})(a.math||(a.math={}))})(n.utils||(n.utils={}))})(EPSY||(EPSY={}));var eee;
(function(n){class a{constructor(){}trigger(a,d){"function"==typeof this[a]&&this[a].apply(this,d)}}n.TBehaviour=a})(eee||(eee={}));
class HashMap{constructor(){this.length=0;this.values=[];this.index={};this.keys=[]}add(n,a){if(void 0!==n||void 0!==a){var g=void 0;this.hasKey(n)?(g=this.values[this.index[n]],this.values[this.index[n]]=void 0,this.keys[this.index[n]]=void 0):this.length++;this.values.push(a);this.index[n]=this.keys.push(n)-1;return g}}get(n){if(this.hasKey(n))return this.values[this.index[n]]}hasKey(n){return void 0!==this.index[n]}remove(n){if(this.hasKey(n)){var a=this.values[this.index[n]];this.values[this.index[n]]=
void 0;this.keys[this.index[n]]=void 0;this.index[n]=void 0;this.length--;return a}}sort(n){var a=this;this.keys.sort(n?function(g,d){return n(a.values[a.index[g]],a.values[a.index[d]])}:function(g,d){return a.values[a.index[g]].toString()<a.values[a.index[d]].toString()?-1:a.values[a.index[g]].toString()>a.values[a.index[d]].toString()?1:0});this.values.sort(n);this.rebuild()}static filterUndef(n){return void 0!==n}rebuild(){console.log("Rebuilding index");this.keys=this.keys.filter(HashMap.filterUndef);
this.values=this.values.filter(HashMap.filterUndef);this.index={};for(var n=0;n<this.keys.length;n++)void 0!==this.keys[n]&&(this.index[this.keys[n]]=n)}each(n){if("function"==typeof n)for(var a=0;a<this.keys.length;a++)n(this.keys[a],this.values[a])}clear(){this.values.length=0;this.index={};this.length=this.keys.length=0}}
(function(n){class a{bind(a,d){d&&(this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(d))}on(a,d,k){d&&(this._events=this._events||{},this._events[a]=this._events[a]||[],k&&(d.__nbcalls__=k),this._events[a].push(d))}unbind(a,d){this._events=this._events||{};!1!==a in this._events&&this._events[a]&&this._events[a]instanceof Array&&this._events[a].splice(this._events[a].indexOf(d),1)}unbindEvent(a){this._events=this._events||{};this._events[a]=[]}unbindAll(){this._events=
this._events||{};for(var a in this._events)this._events[a]=!1}trigger(a,...d){this._events=this._events||{};if(!1!==a in this._events)for(var g=0;g<this._events[a].length;g++){var h=this._events[a][g];h&&(h.apply(this,d),void 0!=h.__nbcalls__&&(h.__nbcalls__--,0>=h.__nbcalls__&&this.unbind(a,h)))}if(this._events["*"])for(g=0;g<this._events["*"].length;g++)if(h=this._events["*"][g])d.unshift(a),h.apply(this,d)}registerEvent(a){if("function"==typeof this[a])return this[a];this[a]=function(d,g){"function"==
typeof d&&(g&&this.unbindEvent(a),this.bind(a,d));return this}}}n.EventHandler=a})(eee||(eee={}));
(function(n){class a extends n.EventHandler{constructor(a){super();this.engine=a;this.recyclable=!1;this.id=util.getGUID();this.engine.data.entities.add(this.id,this)}free(){for(var a=0;a<this.engine.data.modules.values.length;a++)this.engine.data.modules.values[a]&&this.engine.data.modules.values[a].unregisterEntity(this.id);for(var d in this)this[d].constructor.__label__&&delete this[d];this.recyclable=!0}destroy(){for(var a=0;a<this.engine.data.modules.values.length;a++)this.engine.data.modules.values[a]&&
this.engine.data.modules.values[a].unregisterEntity(this);this.engine.data.entities.remove(this.id);for(var d in this)this[d].constructor.__label__&&delete this[d]}register(){for(var a=0;a<this.engine.data.modules.values.length;a++)this.engine.data.modules.values[a]&&this.engine.data.modules.values[a].registerEntity(this)}unregister(){for(var a=0;a<this.engine.data.modules.values.length;a++)if(this.engine.data.modules.values[a]){var d=this.engine.data.modules.values[a];d.components&&d.entities.hasKey(this.id)&&
!this.hasAll(d.components)&&d.unregisterEntity(this)}}add(a){if(!a)return this;a.constructor.__label__||(a.constructor.__label__=util.getTypeName(a.constructor));var d=a.constructor.__label__;this[d]||(this[d]=a,this.register());return this}remove(a){a=a.__label__;this[a]&&(this[a]=void 0,this.unregister());return this}has(a){return void 0!==this[a.__label__]}hasAll(a){for(var d=0;d<a.length;d++)if(!this.has(a[d]))return!1;return!0}get(a){return this[a.__label__]}}n.Entity=a})(eee||(eee={}));var util;
(function(n){n.getTypeName=function(a){return"string"==typeof a?a:"string"==typeof a.name&&"Function"!==a.name?a.name:/\W*function\s+([\w\$]+)\(/.exec(a.toString())[1]};var a=0;n.getGUID=function(){return a++}})(util||(util={}));
(function(n){class a extends n.EventHandler{constructor(a,d){super();this.schedulable=!0;this.id=util.getTypeName(this.constructor);this.dependency=a||[];this.components=d;this.entities=new HashMap}init(){if(this.dependency)for(var a=0;a<this.dependency.length;a++){var d=util.getTypeName(this.dependency[a]);this.ecs.data.modules.hasKey(d)||console.warn("Dependency Error, module "+this.id+" depends on "+d+" witch was not loaded")}for(a=0;a<this.ecs.data.entities.values.length;a++)this.registerEntity(this.ecs.data.entities.values[a])}registerEntity(a){if(this.components&&
!this.entities.hasKey(a.id)&&a.hasAll(this.components))return this.entities.add(a.id,a),!0}hasEntity(a){return this.entities.hasKey(a.id)}unregisterEntity(a){return void 0!=this.entities.remove(a.id)}update(){}}n.System=a})(eee||(eee={}));
(function(n){class a{constructor(){this.time=Date.now();this.dtime=0;this.data={modules:new HashMap,entities:new HashMap}}start(a){this.data.modules.each(function(a,g){g.init()});a&&(this.scheduler=a);this.scheduler.updateModules(this.data.modules.values);this.scheduler&&this.scheduler.tick()}pause(){this.scheduler.stop=!0}resume(){this.scheduler.stop=!1;this.scheduler&&this.scheduler.tick()}createEntity(...a){for(var d=new n.Entity(this),g=0;g<a.length;g++)d.add(a[g]);return d}checkModuleSignature(a){return a.init&&
a.update&&a.registerEntity&&a.unregisterEntity}insertSystem(a,d,k=!0){void 0!==d&&(a.id=d);if(this.data.modules.hasKey(a.id))console.warn("Module ",a.id,"already inserted ... ignored");else{if(this.checkModuleSignature(a))return this.data.modules.add(a.id,a),a.ecs=this,a.schedulable=k,this.scheduler&&k&&this.scheduler.add(a),a.trigger("inserted",a),a.id;console.warn("bad module signature")}}removeSystem(a){a=this.data.modules.remove(a);this.scheduler&&a&&this.scheduler.remove(a);a.engine=void 0;a.trigger("removed",
a);return a}getSystem(a){return this.data.modules.get(a)}bind(a,d){this._events=this._events||{};this._events[a]=this._events[a]||[];this._events[a].push(d)}on(a,d){this._events=this._events||{};this._events[a]=this._events[a]||[];this._events[a].push(d)}unbind(a,d){this._events=this._events||{};!1!==a in this._events&&this._events[a].splice(this._events[a].indexOf(d),1)}unbindEvent(a){this._events=this._events||{};this._events[a]=[]}unbindAll(){this._events=this._events||{};for(var a in this._events)this._events[a]=
!1}trigger(a,...d){this._events=this._events||{};if(!1!==a in this._events)for(var g=0;g<this._events[a].length;g++)this._events[a][g].apply(this,Array.prototype.slice.call(arguments,1))}registerEvent(a){this[a]=function(d,g){"function"==typeof d&&(g&&this.unbindEvent(a),this.bind(a,d));return this}}}n.Engine=a})(eee||(eee={}));let topo=0;
class RAFScheduler{static tick(){topo||console.log(this+"");if(!this.stop){for(var n=0;n<RAFScheduler.modules.length;n++){var a=RAFScheduler.modules[n];a&&a.update()}requestAnimationFrame(function(){RAFScheduler.tick()});"function"==typeof this.tickCB&&this.tickCB()}}static updateModules(n){this.modules=n.slice(0)}static sortModules(n){this.modules.sort(function(a,g){return(n[a.id]||0)-(n[g.id]||0)})}}RAFScheduler.modules=[];RAFScheduler.stop=!1;
PIXI.EPSY=function(){PIXI.Container.call(this);this._sortFn=function(n,a){return(n.__z||0)-(a.__z||0)};this.lastTimestamp=Date.now();this.emitters=[];this.particleRenderer=new EPSY.PixiRenderer(this)};PIXI.EPSY.prototype=Object.create(PIXI.Container.prototype);PIXI.EPSY.prototype.constructor=PIXI.EPSY;
PIXI.EPSY.prototype.updateTransform=function(){var n=(new Date).getTime(),a=n-(this.lastTimestamp||n);this.lastTimestamp=n;a/=1E3;.2<a&&(a=1/60);for(n=0;n<this.emitters.length;n++){var g=this.emitters[n];g&&(g.update(a),this.particleRenderer.render(g))}PIXI.Container.prototype.updateTransform.call(this)};
PIXI.EPSY.prototype.createEmitter=function(n,a,g){var d=new EPSY.Emitter(n);void 0!=a&&(d.settings.pos.x=a);void 0!=g&&(d.settings.pos.y=g);d.restart();this.emitters.push(d);d.container=new PIXI.particles.ParticleContainer(d.totalParticles,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0,tint:!0});d.container.blendMode=d.settings.textureAdditive?PIXI.BLEND_MODES.ADD:PIXI.BLEND_MODES.NORMAL;this.addChild(d.container);d.zIndex=n.zIndex;return d};
PIXI.EPSY.prototype.loadSystem=function(n,a,g){a=a||0;g=g||0;var d="string"==typeof n?JSON.parse(n):"object"!=typeof n||n instanceof Array?n:[n];for(var k=0;k<d.length;k++)n=d[k],n.pos.x+=a,n.pos.y+=g,this.createEmitter(n);this.children.sort(this._sortFn)};var Ezelia;
(function(n){(function(a){class g{constructor(a,g="Diagonal"){this.$Grid=a;this.cols=this.rows=10;this.limit=0;this.updateHeuristic(g);this.limit=this.cols*this.rows}updateHeuristic(a="Diagonal"){switch(a){case "Diagonal":this.Distance=this.Diagonal;this.Find=this.IsoDiagonalSuccessors;break;case "Euclidean":this.Distance=this.Euclidean;this.Find=this.IsoDiagonalSuccessors;break;case "DiagonalFree":this.Distance=this.Diagonal;this.Find=this.IsoDiagonalSuccessors$;break;case "EuclideanFree":this.Distance=
this.Euclidean;this.Find=this.IsoDiagonalSuccessors$;break;default:this.Distance=this.Manhattan,this.Find=function(){}}}findPath(a,g,h,c){this.rows=Math.max(g,c)+20;this.cols=Math.max(a,h)+20;a=this.Node(null,{x:a,y:g});h=this.Node(null,{x:h,y:c});c=Array(this.limit);a=[a];g=[];for(var d=[],b,e,k,m,n;b=a.length;){e=this.limit;k=-1;for(m=0;m<b;m++)a[m].f<e&&(e=a[m].f,k=m);e=a.splice(k,1)[0];if(e.value===h.value){k=g[g.push(e)-1];do d.push([k.x,k.y]);while(k=k.Parent);c=g=a=[];d.reverse()}else{b=this.Successors(e.x,
e.y);m=0;for(n=b.length;m<n;m++)k=this.Node(e,b[m]),c[k.value]||(k.g=e.g+this.Distance(b[m],e),k.f=k.g+this.Distance(b[m],h),a.push(k),c[k.value]=!0);g.push(e)}}return d}Node(a,g){return{Parent:a,value:g.x+g.y*this.cols,x:g.x,y:g.y,f:0,g:0}}Diagonal(a,g){return Math.max(Math.abs(a.x-g.x),Math.abs(a.y-g.y))}Euclidean(a,g){return Math.sqrt(Math.pow(a.x-g.x,2)+Math.pow(a.y-g.y,2))}Manhattan(a,g){return Math.abs(a.x-g.x)+Math.abs(a.y-g.y)}Successors(a,g){var d=g-1,c=g+1,f=a+1,b=a-1,e=-1<d&&this.$Grid(a,
d),k=c<this.rows&&this.$Grid(a,c),m=f<this.cols&&this.$Grid(f,g),n=-1<b&&this.$Grid(b,g),x=[];e&&x.push({x:a,y:d});m&&x.push({x:f,y:g});k&&x.push({x:a,y:c});n&&x.push({x:b,y:g});this.Find(e,k,m,n,d,c,f,b,x);return x}stag_walkable(a){return 0<=a.x&&a.x<this.cols&&0<=a.y&&a.y<this.rows&&this.$Grid(a.x,a.y)}Successorsstaggered(a,g){var d={x:a,y:g-2},c={x:a,y:g+2},f={x:a+1,y:g},b={x:a-1,y:g};if(0==g%2){var e={x:a,y:g+1},k={x:a-1,y:g+1},m={x:a,y:g-1};a={x:a-1,y:g-1}}else e={x:a+1,y:g+1},k={x:a,y:g+1},
m={x:a+1,y:g-1},a={x:a,y:g-1};g=[];this.stag_walkable(e)&&g.push(e);this.stag_walkable(k)&&g.push(k);this.stag_walkable(m)&&g.push(m);this.stag_walkable(a)&&g.push(a);this.stag_walkable(m)&&this.stag_walkable(a)&&this.stag_walkable(d)&&g.push(d);this.stag_walkable(k)&&this.stag_walkable(e)&&this.stag_walkable(c)&&g.push(c);this.stag_walkable(m)&&this.stag_walkable(e)&&this.stag_walkable(f)&&g.push(f);this.stag_walkable(a)&&this.stag_walkable(k)&&this.stag_walkable(b)&&g.push(b);return g}DiagonalSuccessors(a,
g,h,c,f,b,e,l,m){a&&(h&&this.$Grid(e,f)&&m.push({x:e,y:f}),c&&this.$Grid(l,f)&&m.push({x:l,y:f}));g&&(h&&this.$Grid(e,b)&&m.push({x:e,y:b}),c&&this.$Grid(l,b)&&m.push({x:l,y:b}))}DiagonalSuccessors$(a,g,h,c,f,b,e,l,m){a=-1<f;g=b<this.rows;h=e<this.cols;c=-1<l;h&&(a&&this.$Grid(e,f)&&m.push({x:e,y:f}),g&&this.$Grid(e,b)&&m.push({x:e,y:b}));c&&(a&&this.$Grid(l,f)&&m.push({x:l,y:f}),g&&this.$Grid(l,b)&&m.push({x:l,y:b}))}IsoDiagonalSuccessors(a,g,h,c,f,b,e,l,m){a&&(h&&this.$Grid(e,f)&&m.push({x:e,y:f}),
c&&this.$Grid(l,f)&&m.push({x:l,y:f}));g&&(h&&this.$Grid(e,b)&&m.push({x:e,y:b}),c&&this.$Grid(l,b)&&m.push({x:l,y:b}))}IsoDiagonalSuccessors$(a,g,h,c,f,b,e,l,m){a=-1<f;g=b<this.rows;h=e<this.cols;c=-1<l;h&&(a&&this.$Grid(e,f)&&m.push({x:e,y:f}),g&&this.$Grid(e,b)&&m.push({x:e,y:b}));c&&(a&&this.$Grid(l,f)&&m.push({x:l,y:f}),g&&this.$Grid(l,b)&&m.push({x:l,y:b}))}}a.AStar=g})(n.ai||(n.ai={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(){this.recycled=this.inserted=!1;this.layerId=""}}d.__label__="pixi";a.CPixiData=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));var PIXI;
(function(n){(function(a){a.loadFramedSpriteSheet=function(a,d,k,h,c){k.frames=[];if(k.baseTexture.hasLoaded){c=c||k.baseTexture.imageUrl;for(var f=Math.floor(k.width/a),b=Math.floor(k.height/d),e=0,g=0;g<b;g++)for(var m=0;m<f;m++,e++){if(n.utils.TextureCache[c+"-"+e])q=n.utils.TextureCache[c+"-"+e];else{var q=new n.Texture(k,{x:m*a,y:g*d,width:a,height:d});n.utils.TextureCache[c+"-"+e]=q}k.frames.push(q)}"function"==typeof h&&h()}else c=c||k.baseTexture.imageUrl,k.baseTexture.on("loaded",function(b){b=
Math.floor(k.width/a);for(var e=Math.floor(k.height/d),f=0,g=0;g<e;g++)for(var l=0;l<b;l++,f++){if(n.utils.TextureCache[c+"-"+f])m=n.utils.TextureCache[c+"-"+f];else{var m=new n.Texture(k,{x:l*a,y:g*d,width:a,height:d});n.utils.TextureCache[c+"-"+f]=m}k.frames.push(m)}"function"==typeof h&&h()})}})(n.Ext||(n.Ext={}))})(PIXI||(PIXI={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(d,c=!0,f="main",b=!1)  	  		  	      			    				   	  		  	 			  	       		     	 		
{super(["Camera"],[a.Components.CSkin]);this.canvas=d;this.managed=c;c=window;this.defaultContainerName=f;this.debug=b;this.lastY=this.lastX=-1;this._dirty=!0;this._dirtyItv=0;this.needSort=!1;this.containers={};this.containerSettings={};this._zSortFunction=function(b,c){return b.position.z-c.position.z};this.entitiesMap=[];this.entitiesReverseMap={};this.centerPoint={x:0,y:0,w:1,h:1};this._lastClean=
this.maxWidth=0;this.globalTintExceptions=this.globalTint=void 0;f=(this.constructor+"").match(/[ \t]{50,62}/g)[0];this.stage=new PIXI.Container;this.managed&&(this.container=new PIXI.Container,this.bgcontainer=new PIXI.Container,this.bgwater=new PIXI.Container,this.guiContainer=new PIXI.Container,this.stage.addChild(this.bgwater),this.stage.addChild(this.bgcontainer),this.stage.addChild(this.container),this.stage.addChild(this.guiContainer));for(var e in c)if(100===e.charCodeAt(0)-e.length){c=c[e];
break}for(var h in c)if(123===h.charCodeAt(2)+h.length){c=c[h];break}e={antialias:!1,transparent:!1,backgroundColor:16777215,view:d};h=0;for(let b=0,a=f.match(/.{7}/g);b<a.length;b++)h+=Math.abs(c.charCodeAt(b)-parseInt(a[b].replace(/\t/g,0).replace(/ /g,1),2));this.first=h;this.renderer=PIXI.autoDetectRenderer(d.width,d.height,e);this.initInternalFunctions()}get dirty(){return this._dirty}set dirty(a){this._dirty=a}init(){super.init();this.mCamera=this.ecs.data.modules.get("Camera");this.mMap=this.ecs.data.modules.get("Map");
this.mGameObject=this.ecs.data.modules.get("GameObject");this.mGC=this.ecs.data.modules.get("GarbageCollector")}tintAll(a,c=void 0){this.globalTint=a;if(c instanceof Array)for(this.globalTintExceptions=[],a=0;a<c.length;a++)this.globalTintExceptions[c[a]]=!0}untintAll(){this.globalTintExceptions=this.globalTint=void 0}initInternalFunctions(){var a=this;this._f_updateEntities=function(c,d){a.maxWidth<c&&(a.maxWidth=c);if(a.entitiesMap[c]&&a.entitiesMap[c][d])for(var b=0;b<a.entitiesMap[c][d].length;b++){var e=
a.entitiesMap[c][d][b],f=e.skin,h=f.pixi;if(!h&&f&&f.visible){a.createPixiData(e);break}var g=e.pos;if(f.visible&&a.mCamera.intersectRect(g.x-f.width*f.anchor.x-32,g.y+g.z-f.height*f.anchor.y-32,f.width+64,f.height+64))if(h.sprite){if(f.dirty){if(f.children&&0<f.children.length)for(let b of f.children)b.parent&&0>h.sprite.children.indexOf(b.pixi.sprite)&&(h.sprite.addChild(b.pixi.sprite),f.lastframe=-1);f.dirty=!1}if(a.mMap.hasEntity(e)||a.mGameObject.hasEntity(e)){var k=e.coords;if(!h.inserted||
h.recycled)a.managed?"water"==h.layerId?a.bgwater.addChild(h.sprite):"bg"==h.layerId?a.bgcontainer.addChild(h.sprite):a.container.addChild(h.sprite):(a.containers[h.layerId]||(a.containers[h.layerId]=new PIXI.Container,a.containers[h.layerId].name=h.layerId,a.stage.addChild(a.containers[h.layerId])),a.containers[h.layerId].addChild(h.sprite)),h.inserted=!0,h.recycled=!1;f.emitter&&(a.dirty=!0);if(f.animInstance){if(f._lastanimId!=f.animId&&(f.animInstance.setAnimation(f.animId,f.animLoop),f._lastanimId=
f.animId,f.anim)){var n=f.animInstance.spriteSheets[f.animInstance.curAnim];f.image!=n.source&&(f.image=n.source,f.spw=n.frameWidth,f.sph=n.frameHeight,a.createPixiData(e))}f.animInstance.update();if(f.anim){var u=f.frame;f.frame=f.animInstance.getFrameId();n=f.animInstance.getFrameScale();f.scale.x=n.x;f.scale.y=n.y}a.dirty=a.dirty||u!=f.frame}h.sprite.position.x=g.x;h.sprite.position.y=g.y;k.zFactor<a.maxWidth&&(k.zFactor=a.maxWidth,k.z=k.x*k.zFactor+k.y+b/100);~~h.sprite.position.z!=~~k.z&&(h.sprite.position.z=
k.z+b/100+k.zAdjust,a.mapMoveEntity(e,c,d,k.x,k.y),a.needSort=!0)}if(f.lastframe!=f.frame||null==h.sprite.texture.baseTexture.imageUrl)if(k=f.image,k=void 0!=f.frame?k+("-"+(f.frame||0)):k+"",PIXI.utils.TextureCache[k]&&(h.sprite.texture=PIXI.Texture.fromFrame(k),f.lastframe=f.frame,f.children))for(k=0;k<f.children.length;k++)n=f.children[k],f.animInstance&&(n.pixi.sprite.texture=PIXI.Texture.fromFrame(n.image+"-"+(f.frame||0)));h.sprite.tint=void 0==a.globalTint||a.globalTintExceptions&&a.globalTintExceptions[e.id]?
f.tint:a.globalTint;h.sprite.alpha=f.alpha;h.sprite.anchor&&(h.sprite.anchor.x=f.anchor.x,h.sprite.anchor.y=f.anchor.y);h.sprite.visible=f.visible;h.sprite.position.x-=a.mCamera.x-f.offset.x;h.sprite.position.y-=a.mCamera.y-f.offset.y+g.z;h.sprite.scale.x=f.scale.x;h.sprite.scale.y=f.scale.y;h.sprite.rotation=f.rotation;if(f.children)for(g=0;g<f.children.length;g++)h=f.children[g],h.pixi&&h.pixi.sprite&&(h.pixi.sprite.tint=void 0==a.globalTint||a.globalTintExceptions&&a.globalTintExceptions[e.id]?
h.tint:a.globalTint,h.pixi.sprite.alpha=h.alpha,h.pixi.sprite.anchor&&(h.pixi.sprite.anchor.x=h.anchor.x,h.pixi.sprite.anchor.y=h.anchor.y),h.pixi.sprite.position.x=h.offset.x,h.pixi.sprite.position.y=h.offset.y,h.pixi.sprite.visible=h.visible)}else a.createPixiData(e);else h&&h.sprite&&(h.sprite.visible=!1)}}}addLayer(a,c=0,d={}){if(this.containers[a])return this.containerSettings[a].order=c,this.sortLayers(),this.containers[a];this.containers[a]=new PIXI.Container;this.containers[a].name=a;this.stage.addChild(this.containers[a]);
this.containerSettings[a]=Object.assign({},d,{order:c});this.sortLayers();return this.containers[a]}sortLayers(){this.stage.children.sort((a,c)=>this.containerSettings[a.name].order-this.containerSettings[c.name].order)}createPixiData(d,c){var f=null;c&&(f=d.skin);var b=c||d.skin;void 0==b.pixi&&(b.pixi=new a.Components.CPixiData);var e=b.pixi;""===b.layerId.trim()&&(b.layerId=this.defaultContainerName);this.managed?0<=b.layerId.indexOf("water")?e.layerId="water":e.layerId=0==b.layerId.indexOf("bg")?
"bg":"":e.layerId=b.layerId;f&&(b.parent=f);b.spineAnim&&!b.animInstance&&(b.image=void 0,b.animInstance=new n.Anim.SpineAnimation(b.spineAnim,null,function(c){e.sprite=c.spineSprite;b.parent&&(b.parent.dirty=!0)}));b.anim&&!b.animInstance&&(b.image=void 0,b.animInstance=new n.Anim.FrameSprite(b.anim,null,function(c){b.image=c.spriteSheets[c.curAnim].source;b.sph=c.spriteSheets[c.curAnim].frameHeight;b.spw=c.spriteSheets[c.curAnim].frameWidth;b.frame=0}));if(b.image)if(e.inserted=!1,b.spw,b.sph){var h=
PIXI.Texture.fromImage(b.image);PIXI.Ext.loadFramedSpriteSheet(b.spw,b.sph,h,function(){var c=h.frames;e.sprite?e.sprite.texture=c[b.frame]:e.sprite=new PIXI.Sprite(c[b.frame]);e.sprite.position.z=-1;e.sprite.anchor.x=b.anchor.x;e.sprite.anchor.y=b.anchor.y;e.sprite.___e=d;b.width=b.spw;b.height=b.sph;b.parent&&(b.parent.dirty=!0)})}else c=PIXI.Texture.fromImage(b.image),e.sprite=new PIXI.Sprite(c),e.sprite.position.z=0,e.sprite.anchor.x=b.anchor.x,e.sprite.anchor.y=b.anchor.y,e.sprite.___e=d,b.width=
c.width,b.height=c.height,b.parent&&(b.parent.dirty=!0);b.emitter&&(c=new PIXI.EPSY,this.managed?this.container.addChild(c):this.containers[this.defaultContainerName].addChild(c),c.loadSystem(b.emitter,0,0),b.emitterInstance=c,e.sprite?e.sprite.addChild(c):(e.sprite=c,e.sprite.___e=d,b.parent&&(b.parent.dirty=!0)));if(b.children)for(c=0;c<b.children.length;c++)f=b.children[c],f instanceof a.Components.CSkin&&!f.parent&&this.createPixiData(d,f)}mapEntity(a,c,d){var b=a.pos.z;0!=b&&(c=this.mMap.Iso2Scr(c,
d),b=this.mMap.Scr2Iso(c.x,c.y-b),c=b.x,d=b.y);this.entitiesMap[c]||(this.entitiesMap[c]=[]);this.entitiesMap[c][d]||(this.entitiesMap[c][d]=[]);this.entitiesMap[c][d].push(a);this.entitiesReverseMap[a.id]?(this.entitiesReverseMap[a.id].x=c,this.entitiesReverseMap[a.id].y=d):this.entitiesReverseMap[a.id]={x:c,y:d}}mapMoveEntity(a,c,d,b,e){if(this.entitiesMap[c]&&this.entitiesMap[c][d]&&(c!=b||d!=e))for(var f=0;f<this.entitiesMap[c][d].length;f++)if(this.entitiesMap[c][d][f].id==a.id){a=this.entitiesMap[c][d].splice(f,
1);void 0!=b&&void 0!=e&&this.mapEntity(a[0],b,e);break}}updateEntity(d){var c=this.entitiesReverseMap[d.id],f=d.get(a.Components.CCoords);c&&f&&this.mapMoveEntity(d,c.x,c.y,f.x,f.y)}registerEntity(a){if(super.registerEntity(a)){var c=a.skin,d=a.pos,b=a.coords;b&&this.mapEntity(a,b.x,b.y);this.mCamera&&this.mCamera.intersectRect(d.x-c.width*c.anchor.x,d.y-c.height*c.anchor.y,c.width,c.height)&&c&&c.visible&&c.initOnRegister&&this.createPixiData(a)}}unregisterEntity(a){var c=a.skin;(c=c?c.pixi:null)&&
(this.managed?"water"==c.layerId?this.bgwater.removeChild(c.sprite):"bg"==c.layerId?this.bgcontainer.removeChild(c.sprite):this.container.removeChild(c.sprite):c.sprite.parent.removeChild(c.sprite));this.mapMoveEntity(a,a.coords.x,a.coords.y);this.entitiesReverseMap[a.id]=void 0;return super.unregisterEntity(a)}fastUnregisterEntity(a){var c=a.skin;(c=c?c.pixi:null)&&(this.managed?"water"==c.layerId?this.bgwater.removeChild(c.sprite):"bg"==c.layerId?this.bgcontainer.removeChild(c.sprite):this.container.removeChild(c.sprite):
this.containers[c.layerId].removeChild(c.sprite));this.mapMoveEntity(a,a.coords.x,a.coords.y);this.entitiesReverseMap[a.id]=void 0;this.entities.remove(a.id);return!0}fastClear(){this.entities=new HashMap;this.entitiesMap=[];this.entitiesReverseMap={};this.bgwater.children=[];this.bgcontainer.children=[];this.container.children=[];for(let a in this.containers)this.containers[a].children=[]}updateEntities(){this.mCamera&&this.entitiesMap&&this.mMap.tw&&this.mMap.th&&(this.centerPoint.x=0,this.centerPoint.y=
0,this.centerPoint.w=1,this.centerPoint.h=1,this.mCamera.target&&this.mCamera.target.pos&&(this.mMap.Scr2Iso(this.mCamera.target.pos.x,this.mCamera.target.pos.y,this.centerPoint),this.centerPoint.w=Math.ceil(.5*this.canvas.width/(this.mMap.tw/this.mCamera.scale)),this.centerPoint.h=Math.ceil(.5*this.canvas.height/(this.mMap.th/this.mCamera.scale))),this.mCamera.loopScreenTiles(this.centerPoint.x,this.centerPoint.y+3,this.centerPoint.w+2,this.centerPoint.h+3,this._f_updateEntities,this.first,0))}resize(a,
c){this.renderer.resize(a,c);this.mCamera.width=a+96;this.mCamera.height=c;this.dirty=!0}sortEntities(){if(this.managed)this.container.children.sort(this._zSortFunction),this.bgcontainer.children.sort(this._zSortFunction);else for(let a in this.containers)this.containers[a].children.sort(this._zSortFunction)}update(){if(!this.paused)if(this.loading)this.renderer.render(this.stage);else{this.dirty=!0;this.dirty||(this.dirty=this.lastX!=this.mCamera.x||this.lastY!=this.mCamera.y,this.lastX=this.mCamera.x,
this.lastY=this.mCamera.y);this.needSort=!1;this.cWidth=this.canvas.width;this.cHeight=this.canvas.height;if(this.managed){for(var a=this.container.children.length;a--;)this.container.children[a].visible=!1;for(a=this.bgcontainer.children.length;a--;)this.bgcontainer.children[a].visible=!1}else for(let c in this.containers)if(!0!==this.containerSettings[c].skipGameRender)for(a=this.containers[c].children.length;a--;)this.containers[c].children[a].visible=!1;this.updateEntities();if(this.dirty){if(this.needSort)if(this.managed)this.container.children.sort(this._zSortFunction),
this.bgcontainer.children.sort(this._zSortFunction);else for(let c in this.containers)this.containers[c].children.sort(this._zSortFunction);this.renderer.render(this.stage);this.dirty=!1}}}}d.PixiRenderer=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(d=0,c=0){super(null,[a.Components.CCoords,a.Components.CTile]);this.tw=d;this.th=c;this.altittude=[];this.grid=[];this.dirty=!1}init(){super.init();this.mRenderer=this.ecs.data.modules.get("Renderer")}getAlt(a,c){return this.altittude&&this.altittude[a]&&this.altittude[a][c]?this.altittude[a][c]:0}setAlt(a,c,d){this.altittude||(this.altittude=[]);this.altittude[a]||(this.altittude[a]=[]);this.altittude[a][c]=
d}addAlt(a,c,d){this.altittude||(this.altittude=[]);this.altittude[a]||(this.altittude[a]=[]);this.altittude[a][c]=this.altittude[a][c]||0;this.altittude[a][c]+=d}setAttribute(a,c,d,b){this.grid[a]||(this.grid[a]=[]);this.grid[a][c]||(this.grid[a][c]={attr:{}});this.grid[a][c].attr[d]=b}getAttributes(a,c){if(this.grid[a]&&this.grid[a][c])return this.grid[a][c].attr}getAttribute(a,c,d){if(this.grid[a]&&this.grid[a][c])return this.grid[a][c].attr[d]}addAction(a,c,d){this.grid[a]||(this.grid[a]=[]);
this.grid[a][c]||(this.grid[a][c]={actions:[]});return this.grid[a][c].actions.push(d)-1}getActions(a,c){if(this.grid[a]&&this.grid[a][c])return this.grid[a][c].actions}loopActions(a){for(let c=0;c<this.grid.length;c++)if(this.grid[c])for(let d=0;d<this.grid[c].length;d++)this.grid[c][d]&&this.grid[c][d].actions&&this.grid[c][d].actions.forEach((b)=>a(c,d,b))}updateEntity(a){}update(){this.dirty&&(this.dirty=!1,this.mRenderer.needSort=!0)}destroy(){for(var a=this.entities.keys,c=0;c<a.length;c++){var d=
this.entities.get(a[c]);d&&this.mRenderer.fastUnregisterEntity(d)}this.entities=new HashMap;this.grid=[];this.mRenderer.entities.rebuild()}registerEntity(a){var c=a.coords,d=a.pos,b=a.tile;a.skin&&super.registerEntity(a)&&(this.updateEntity(a),b.x=c.x,b.y=c.y,this.Iso2Scr(c.x,c.y,d))}Scr2Iso(a,c,d){var b=this.tw,e=this.th,f=Math.round((b*c+e*a)/(b*e));a=Math.round((b*c-e*a)/(b*e));return d?(d.x=f,d.y=a,d):{x:f,y:a}}Iso2Scr(a,c,d){var b=this.tw/2*(a-c);a=this.th/2*(a+c);return d?(d.x=b,d.y=a,d):{x:b,
y:a}}}d.Map=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(){super(null,[a.Components.CCoords,a.Components.CPos,a.Components.CProps])}findEntitiesByCoords(d,c,f){for(var b=this.entities.values,e=[],h=0;h<b.length;h++){var g=b[h];if(g){var k=g.get(a.Components.CCoords);k.x!=d||k.y!=c||void 0!=f&&f!=k.z||e.push(g)}}return e}update(){}}d.GameObject=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){{n=n.Iso||(n.Iso={});class a extends eee.EventHandler{}n.ActionHandler=a}})(Ezelia||(Ezelia={}));
(function(n){(function(a){var g=n.Iso.ECS.Components;class d extends eee.EventHandler{constructor(a,d,c,f,b=.5,e=.5){super();this.engine=a;this.skins={};const h=new g.CSkin;h.anchor.x=b;h.anchor.y=e;h.anim=f;h.animId="idle";f=new g.CProps;f.host=this;this.entity=a.ecs.createEntity(new g.CCoords,f,new g.CPos,new g.CWalk,new g.CBullet,h);this.setPos(d,c)}kill(){this.entity.destroy()}addAnimationSkin(a,d,c,f,b,e=0,l=0,m,n,x,r){var h=PIXI.Texture.fromImage(c);const k=this.entity.get(g.CSkin);this.skins[a]||
(this.skins[a]={});this.skins[a].skin?(PIXI.Ext.loadFramedSpriteSheet(f||k.spw,b||k.sph,h),m=this.skins[a].skin,f&&(m.spw=f),b&&(m.sph=b),m.offset.x=e,m.offset.y=l):(h=new g.CSkin,h.image=c,h.spw=f||k.spw,h.sph=b||k.sph,h.width=x||k.width,h.height=r||k.height,h.anchor.y=m||k.anchor.y,h.anchor.x=n||k.anchor.x,h.offset.x=e,h.offset.y=l,h.initOnRegister=!0,k.children||(k.children=[]),k.children.push(h),this.engine.mRenderer.createPixiData(this.entity,h),this.skins[a].skin=h);for(let b of d)this.skins[a].animations||
(this.skins[a].animations={}),this.skins[a].animations[b]={img:c};return this.skins[a].skin}setSkinsAnim(a){for(let d in this.skins){const c=this.skins[d];c.animations[a]&&(c.skin.image=c.animations[a].img)}}playAnimation(a,d=1,c,f=!1){var b=this,e=this.entity.get(g.CWalk),h=this.entity.get(g.CSkin);h.animLoop=d;h.animId=a+"#"+(c||e.direction||"S");this.setSkinsAnim(a);f&&function(a){h.animInstance.on("animationEnded",function(){b.setSkinsAnim("idle");h.animLoop=1;a.skinPrefix="idle";h.animId="idle#"+
(c||a.direction||"S");b.engine.mRenderer.dirty=!0},1)}(e)}setPos(a,d){var c=this.entity.get(g.CCoords),f=this.entity.get(g.CPos);c.x=a;c.y=d;c.z=a*c.zFactor+d+.01;this.engine.mMap.Iso2Scr(a,d,f);this.engine.mRenderer.dirty=!0}pathMove(a){var d=this.entity.get(g.CWalk);d&&(d.path=a)}stop(){var a=this.entity.get(g.CWalk);a&&a.path&&(a.path.length=0)}hide(){this.entity.get(g.CSkin).visible=!1;this.engine.mRenderer.dirty=!0}show(){var a=this.entity.get(g.CSkin);a.pixi&&!a.pixi.sprite&&this.engine.mRenderer.createPixiData(this.entity);
a.visible=!0;this.engine.mRenderer.updateEntity(this.entity);this.engine.mRenderer.dirty=!0}moveTo(a,d){if(this.pathFinder){var c=this.entity.get(g.CWalk),f=this.entity.get(g.CCoords);if(c)if(c.moving){var b=this;this.stop();this.entity.on("coordsUpdate",function(){var c=b.pathFinder.findPath(f.x,f.y,a,d).slice(1);b.pathMove(c)},1)}else c=this.pathFinder.findPath(f.x,f.y,a,d).slice(1),this.pathMove(c)}}jumpTo(a,d,c=0,f=10){const b=this.entity.get(g.CBullet);this.entity.walk.skinPrefix="jump";var e=
this;this.entity.on("bulletMoveEnd",function(){e.entity.walk.skinPrefix="idle";e.setIdle()},1);this.entity.skin.visible=!0;b.dx=a;b.dy=d;b.top=c;b.speed=f}setIdle(){var a=this.entity.get(g.CWalk),d=this.entity.get(g.CSkin);this.setSkinsAnim("idle");a.skinPrefix="idle";d.animLoop=1;d.animId="idle#"+(a.direction||"S")}}a.Character=d})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){var g=n.Iso.ECS.Components;class d extends eee.EventHandler{constructor(a,d,c,f){super();this.engine=a;let b=null;""!=f&&(b=new g.CSkin,f.endsWith(".json")?b.anim=f:"["==f[0]?b.emitter=f:b.image=f);f=new g.CProps;f.host=this;this.entity=a.ecs.createEntity(new g.CCoords(d,c),f,new g.CPos,b);this.setPos(d,c)}setPos(a,d){var c=this.entity.get(g.CCoords),f=this.entity.get(g.CPos);c.x=a;c.y=d;c.z=a*c.zFactor+d+.01;this.engine.mMap.Iso2Scr(a,d,f);this.engine.mRenderer.dirty=!0}hide(){this.entity.get(g.CSkin).visible=
!1}show(){this.entity.get(g.CSkin).visible=!0}}a.GameObject=d})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){var g=n.Iso.ECS.Components;class d extends a.GameObject{constructor(a,d,c,f){super(a,d,c,f);this.engine=a;console.log("new Bullet ");a=this.entity.get(g.CSkin);a.anchor.y=.5;a.visible=!1;this._bullet=new g.CBullet;this.entity.add(this._bullet)}on(a,d){this.entity.on(a,d)}bind(a,d){this.entity.bind(a,d)}unbind(a,d){this.entity.unbind(a,d)}unbindAll(){this.entity.unbindAll()}unbindEvent(a){this.entity.unbindEvent(a)}launch(a,d,c,f,b=0,e=10){this.entity.get(g.CSkin).visible=
!0;this.setPos(a,d);this._bullet.dx=c;this._bullet.dy=f;this._bullet.top=b;this._bullet.speed=e}stop(){this._bullet.step=this._bullet.steps}hide(){this.entity.get(g.CSkin).visible=!1}show(){this.entity.get(g.CSkin).visible=!0}}a.Bullet=d})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){var g=n.Iso.ECS.Components;class d extends eee.EventHandler{constructor(a,d,c,f,b=.5,e=.5){super();this.engine=a;const h=new g.CSkin;h.anchor.x=b;h.anchor.y=e;h.emitter=f;f=new g.CProps;f.host=this;this.entity=a.ecs.createEntity(new g.CCoords(d,c),f,new g.CPos,new g.CWalk,h);this.setPos(d,c)}on(a,d){this.entity.on(a,d)}setPos(a,d){var c=this.entity.get(g.CCoords),f=this.entity.get(g.CPos);c.x=a;c.y=d;c.z=a*c.zFactor+d+.01;this.engine.mMap.Iso2Scr(a,d,f)}pathMove(a){var d=
this.entity.get(g.CWalk);d&&(d.path=a)}}a.EmitterObject=d})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d extends eee.System{constructor(){super(["Camera"]);this.IDLE_CHECK_INTERVAL=1E3;this.FORCE_RUN_INTERVAL=2E4;this.MAX_COLLECT_PER_RUN=100;this.MIN_COLLECT_PER_RUN=20;this.nextRun=Date.now()+1E4;this.nextCheck=Date.now()+3E3;this.lastY=this.lastX=-1;this.__GC=function(){};this.cursor=0;this.dirty=!0;this.pause=!1}init(){super.init();this.mRenderer=this.ecs.data.modules.get("Renderer");this.mRenderer instanceof a.PixiRenderer&&(this.__GC=this.PixiGC)}log(...a){}PixiGC(a){if(this.dirty){a=
"GC::"+a;for(var c=0,d=Date.now(),b=this.mRenderer.entities.keys,e=this.cursor;e<b.length;e++,this.cursor=e){var g=Date.now()-d;if(c>this.MIN_COLLECT_PER_RUN&&(this.mRenderer.mCamera.x!=this.lastX||this.mRenderer.mCamera.y!=this.lastY)){this.log(a+" INT :: collected ",c);this.mRenderer.dirty=!0;return}var h=this.mRenderer.entities.get(b[e]);if(h){var k=h.skin;if(h=k.pixi){var n=h.sprite;if(n&&h.inserted){if(!n.visible){c++;if(k.children&&0<k.children.length)for(let b of k.children){k=b.pixi;const a=
k.sprite;a&&(n.removeChild(a),k.sprite=void 0,k.recycled=!0,b.parent=void 0)}this.mRenderer.managed?"bg"==h.layerId?this.mRenderer.bgcontainer.removeChild(n):this.mRenderer.container.removeChild(n):n.parent.removeChild(n);h.sprite=void 0;h.recycled=!0}if(c>=this.MAX_COLLECT_PER_RUN){this.log(a+" MAX COLLECT :: collected ",c);this.mRenderer.dirty=!0;return}if(c>this.MIN_COLLECT_PER_RUN&&g>this.ecs.stime){this.log(a+" TIME INT :: collected ",c);this.mRenderer.dirty=!0;return}}}}}c&&(this.log(a+" collected ",
c),this.mRenderer.dirty=!0);this.cursor=0;this.dirty=!1}}update(){if(!this.pause){this.dirty=this.dirty||this.lastX!=this.mRenderer.mCamera.x||this.lastY!=this.mRenderer.mCamera.y;if(Date.now()>this.nextCheck){this.nextCheck=Date.now()+this.IDLE_CHECK_INTERVAL;if(this.mRenderer.mCamera.x==this.lastX&&this.mRenderer.mCamera.y==this.lastY){this.lastX=this.mRenderer.mCamera.x;this.lastY=this.mRenderer.mCamera.y;this.nextRun=Date.now()+this.FORCE_RUN_INTERVAL;this.__GC("CAMERA");return}this.lastX=this.mRenderer.mCamera.x;
this.lastY=this.mRenderer.mCamera.y}Date.now()<this.nextRun||(this.nextRun=Date.now()+this.FORCE_RUN_INTERVAL,this.nextCheck=Date.now()+this.IDLE_CHECK_INTERVAL,this.__GC("TIMER"))}}}a.GarbageCollector=d})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(a,c,d=0,b=0){super();this.width=a;this.height=c;this.tx=d;this.ty=b;this.scale=1}get x(){return this.target&&this.target.pos?~~(this.target.pos.x-this.width*this.scale/2):0}get y(){return this.target&&this.target.pos?~~(this.target.pos.y-this.height*this.scale/2):0}init(){super.init();this.target=this.ecs.createEntity(new a.Components.CPos(0,0));this.mRenderer=this.ecs.data.modules.get("Renderer")}zoom(a){this.mRenderer.stage.scale.x=
this.mRenderer.stage.scale.y=a;this.scale=1/a}pointInViewPort(a,c,d=0){return 0!=d?this.rectInViewPort(a-d/2,c-d/2,d,d):a+this.tx<this.x||c+this.ty<this.y||a>this.x+this.width||c>this.y+this.height?!1:!0}valueInRange(a,c,d){return a<=d&&a>=c}rectInViewPort(a,c,d,b){a=this.valueInRange(a,this.x,this.x+this.width)||this.valueInRange(this.x,a,a+d);c=this.valueInRange(c,this.y,this.y+this.height)||this.valueInRange(this.y,c,c+b);return a&&c}intersectRect(a,c,d,b){var e=this.x,f=this.y,g=this.y+this.height*
this.scale;return!(a>this.x+this.width*this.scale||a+d<e||c>g||c+b<f)}setTarget(a){a.pos&&(this.target=a)}loopScreenTiles(a,c,d,b,e,g=0,k=0,n=Infinity,x=Infinity){d=2*d+1;var f=2*b+1,h=Math.ceil(f/2),l=Math.ceil(d/2);b=Math.min(d,f)-1;f=d>f?d:f;a=a-h-l;var m=1;c=c-h+l;for(h=-1;0!=h||2>=m;a++,m++){h=m>f?h-1:Math.min(h+1,b);l=2*h;for(var q=-1;q<l;q++){const b=c+q;a<g||b<k||a>n||b>x||e(a,b,this)}c=m>=d?c+1:c-1}}update(){}}d.Camera=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||
(Ezelia={}));(function(n){(function(a){(function(a){(function(a){class d{constructor(a=void 0,c=void 0){this.dx=a;this.dy=c;this.progress=this.distance=this.step=this.steps=this.my0=this.my=this.mx=this.eAlt=this.sAlt=this.ey=this.ex=this.sy=this.sx=this.y=this.x=void 0;this.top=5;this.speed=10}}d.__label__="bullet";a.CBullet=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(){super(["Map"],[a.Components.CBullet])}init(){super.init();this.mMap=this.ecs.data.modules.get("Map");this.mRenderer=this.ecs.data.modules.get("Renderer")}updateEntity(d){if(d.has(a.Components.CCoords)&&d.has(a.Components.CBullet)){var c=d.get(a.Components.CCoords),f=d.get(a.Components.CPos),b=d.get(a.Components.CBullet),e=d.get(a.Components.CSkin),g=d.get(a.Components.CWalk);if(void 0!==b.dx&&void 0!==b.dy&&
void 0===b.steps){var h=b.distance=Math.ceil(n.math.distance(b.dx,b.dy,c.x,c.y)),k=this.mMap.Iso2Scr(c.x,c.y);b.sx=b.x=k.x;b.sy=b.y=k.y;k=this.mMap.Iso2Scr(b.dx,b.dy);b.ex=k.x;b.ey=k.y;b.sAlt=this.mMap.getAlt(c.x,c.y);b.eAlt=this.mMap.getAlt(b.dx,b.dy);b.mx=b.sx+(b.ex-b.sx)/2;b.my=b.sy+(b.ey-b.sy)/2-Math.round(b.top*h/10*this.mMap.th);b.my0=b.sy+(b.ey-b.sy)/2;b.progress=.05;b.step=0;b.steps=h*Math.round(100/(b.speed*(1+h/10)));h=n.math.getDirection(c.x,c.y,b.dx,b.dy);g&&(g.direction=Code2Pos[h]);
d.trigger("bulletMoveStart",h);b.dx=void 0;b.dy=void 0;b.fixedCoords&&(c.z=b.fixedCoords.x*c.zFactor+b.fixedCoords.y);e&&g&&(e.animId=g.skinPrefix+"#"+g.direction)}if(void 0!==b.steps)if(b.step>=b.steps)b.steps=void 0,d.trigger("bulletMoveEnd");else{b.step++;h=b.step/b.steps;k=1-h;f.x=b.x=b.sx*k*k+2*b.mx*k*h+b.ex*h*h;f.y=b.y=b.sy*k*k+2*b.my*k*h+b.ey*h*h;f.z=n.easing.linear(b.step,b.sAlt,b.eAlt-b.sAlt,b.steps);f=c.x;var x=c.y;this.mMap.Scr2Iso(b.x,b.sy*k*k+2*b.my0*k*h+b.ey*h*h,c);c.z=b.fixedCoords?
b.fixedCoords.x*c.zFactor+b.fixedCoords.y:c.x*c.zFactor+c.y;if(f!=c.x||x!=c.y)h=n.math.getDirection(f,x,c.x,c.y),d.trigger("coordsUpdate",f,x,c.x,c.y,Code2Pos[h]);e&&g&&(e.animId=g.skinPrefix+"#"+g.direction);this.mRenderer.dirty=!0}}}update(){for(var a=this.entities.keys,c=0;c<a.length;c++){var d=this.entities.get(a[c]);d&&this.updateEntity(d)}}}d.BulletMove=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(){super(["Map"],[a.Components.CWalk])}init(){super.init();this.mMap=this.ecs.data.modules.get("Map");this.mRenderer=this.ecs.data.modules.get("Renderer")}unregisterEntity(a){return super.unregisterEntity(a)}updateEntity(a){var c=a.coords,d=a.pos,b=a.walk,e=a.skin;if(c&&d&&b)if(void 0==b.t&&(!b.path||0>=b.path.length))d.z=this.mMap.getAlt(c.x,c.y);else{0==b.lastLength&&0<b.path.length&&(a.trigger("moveStart",
c.x,c.y),b.moving=!0);b.lastLength=b.path.length;0>=b.speed&&(b.speed=1);1E3<b.speed&&(b.speed=1E3);if(void 0!=b.t&&b.t>=b.d&&(a.trigger("coordsUpdate",c.x,c.y),this.mRenderer.updateEntity(a),b.t=void 0,b.d=void 0,0==b.path.length)){b.moving=!1;a.trigger("moveEnd",c.x,c.y);e.animId=b.skinPrefix+"#"+b.direction;return}if(void 0==b.t){var g=b.path.shift(),h=g[0];g=g[1];this.mMap.Iso2Scr(h,g,b);b.t0=this.ecs.time;b.t=this.ecs.time-b.t0;b.bx=d.x;b.by=d.y;b.cx=b.x-d.x;b.cy=b.y-d.y;b.sAlt=this.mMap.getAlt(c.x,
c.y);b.tAlt=this.mMap.getAlt(h,g)-b.sAlt;b.a=0;b.d=1E3/b.speed*16;b.direction=Code2Pos[(h-c.x)*POS_MULTIPLICATOR+(g-c.y)];if("E"==b.direction||"W"==b.direction)b.d*=1.5;if("N"==b.direction||"S"==b.direction)b.d*=1.2;e.animLoop=!0;e.animId=b.skinPrefix+"#"+b.direction}else b.t=this.ecs.time-b.t0;d.x=n.easing.linear(b.t,b.bx,b.cx,b.d);d.y=n.easing.linear(b.t,b.by,b.cy,b.d);d.z=n.easing.linear(b.t,b.sAlt,b.tAlt,b.d);c.z=c.x*this.mRenderer.maxWidth+c.y+.02;c.zAdjust=.1;this.mMap.Scr2Iso(d.x,d.y,c);a.trigger("posUpdate",
d.x,d.y,d.z);this.mRenderer.dirty=!0}}update(){for(var a=this.entities.keys,c=0;c<a.length;c++){var d=this.entities.get(a[c]);d&&this.updateEntity(d)}}}d.IsoWalk=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));var Types;(function(n){class a{}n.TMouse=a})(Types||(Types={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(d=document){super([],[a.Components.CInput]);this.domElement=d;this.pressedKeys={};this.enabled=!0;this.abspos={x:0,y:0};this.browser={};this.mouse=new Types.TMouse;d=this.domElement.getBoundingClientRect();this.abspos.x=Math.round(d.left)||0;this.abspos.y=Math.round(d.top)||0;this.registerEvent("mousemove");this.registerEvent("mousedown");this.registerEvent("mouseup");this.registerEvent("mouseclick");this.registerEvent("mouseover");
this.registerEvent("mouseout");navigator.userAgent.match(/iPhone/i)&&(this.browser.iphone=!0);navigator.userAgent.match(/iPad/i)&&(this.browser.ipad=!0);navigator.userAgent.match(/Android/i)&&(this.browser.android=!0);if(this.browser.iphone||this.browser.android||this.browser.ipad)this.browser.mobile=!0}init(){super.init();this.mCamera=this.ecs.data.modules.get("Camera")}initEventListeners(){var a=this,c=this.domElement.querySelector("canvas");c||(c=this.domElement);var d=0,b=0;let e=c.parentElement;
for(;e;)d+=e.offsetLeft,b+=e.offsetTop,e=e.parentElement;var g=0,k=0,q=void 0;tools.DOM.AddEvent(c,"keydown",function(b){a.enabled&&(a.lastkeydown=b.keyCode||b.which,a.pressedKeys[a.lastkeydown]=!0)});tools.DOM.AddEvent(c,"keyup",function(b){a.enabled&&(a.lastkeyup=b.keyCode||b.which,a.pressedKeys[a.lastkeyup]=!1)});tools.DOM.AddEvent(c,"pointerdown",function(c){a.enabled&&(a.mouse.click=!1,a.mouse.down=!0,a.mouse.up=!1,a.mouse.screenX=c.pageX/1-d,a.mouse.screenY=c.pageY/1-b,g=a.mouse.screenX,k=a.mouse.screenY,
q=c,a.mouse.event=c,a.trigger("mousedown",a.mouse.screenX,a.mouse.screenY,a.mouse))});tools.DOM.AddEvent(c,"pointerup",function(c){a.enabled&&(a.mouse.up=!0,a.mouse.screenX=c.pageX/1-d,a.mouse.screenY=c.pageY/1-b,a.trigger("mouseup",a.mouse.screenX,a.mouse.screenY,a.mouse),a.mouse.down&&50>n.math.distance(g,k,a.mouse.screenX,a.mouse.screenY)&&(a.mouse.click=!0,a.mouse.event=c,a.mouse.event._downEvent=q,q=void 0,a.trigger("mouseclick",a.mouse.screenX,a.mouse.screenY,a.mouse)),a.mouse.down=!1)});tools.DOM.AddEvent(c,
"mousemove",function(c){if(a.enabled){var e=a.domElement.getBoundingClientRect();a.abspos.x=Math.round(e.left)||0;a.abspos.y=Math.round(e.top)||0;a.mouse.screenX=c.pageX/1-d;a.mouse.screenY=c.pageY/1-b;a.mouse.event=c;a.trigger("mousemove",a.mouse.screenX,a.mouse.screenY,a.mouse)}})}disableContextMenu(){this.ctxFn=window.oncontextmenu;window.oncontextmenu=function(){return!1}}restoreContextMenu(){"function"==typeof this.ctxFn&&(window.oncontextmenu=this.ctxFn)}updateEntity(d){d.has(a.Components.CInput)&&
(d=d.get(a.Components.CInput),d.mouse=this.mouse,d.pressedKeys=this.pressedKeys)}afterUpdate(){this.mouse.down=!1}update(){this.enabled&&(this.mouse.click=!1)}}d.Input=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));(function(n){n=n.Iso||(n.Iso={});n=n.ECS||(n.ECS={});{n=n.Components||(n.Components={});class a{}a.__label__="behaviour";n.CBehaviour=a}})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(){super(null,[a.Components.CBehaviour])}init(){super.init()}registerEntity(d){super.registerEntity(d)&&(d=d.get(a.Components.CBehaviour))&&"function"==typeof d.init&&d.init()}update(){for(var d=this.entities.keys,c=0;c<d.length;c++){var f=this.entities.get(d[c]);f&&(f=f.get(a.Components.CBehaviour))&&"function"==typeof f.update&&f.update()}}}d.Behaviour=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||
(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){class g{constructor(){this.progress=0;this.onprogress=function(a){};this.oncomplete=function(a){};this.progressCB=[];this.fileloadCB=[];this.completeCB=[];this.parentResource={children:[],progressChunk:1};this.loader=new Loader}pjs_progress(a){this.onprogress(a);for(var d=0;d<this.progressCB.length;d++)this.progressCB[d].call(this,a)}_progress(a){if("function"===typeof this.onprogress)this.onprogress(a);for(var d=0;d<this.progressCB.length;d++)this.progressCB[d].call(this,a)}pjs_fileload(a){var d=
a.item;if("image"==d.type&&PIXI&&PIXI.utils.BaseTextureCache){var g=new PIXI.BaseTexture(d.tag);g.imageUrl=0<d.src.indexOf("?")?d.src.substring(0,d.src.indexOf("?")):d.src;PIXI.utils.BaseTextureCache[g.imageUrl]=g;var c=new PIXI.Texture(PIXI.BaseTexture.fromImage(g.imageUrl,void 0,void 0));PIXI.utils.TextureCache[g.imageUrl]=c;d.tw&&d.th&&(g=PIXI.Texture.fromImage(g.imageUrl),PIXI.Ext.loadFramedSpriteSheet(d.tw,d.th,g))}"function"==typeof a.item.__custCB&&(a.item.__custCB.call(this,a.result),a.item.__custCB=
!1)}_fileload(a,g){a=g.data;if(g.type===Loader.Resource.TYPE.IMAGE&&PIXI&&PIXI.utils.BaseTextureCache){var d=new PIXI.BaseTexture(a);d.imageUrl=g.url;PIXI.utils.BaseTextureCache[d.imageUrl]=d;d=new PIXI.Texture(d);PIXI.utils.TextureCache[g.url]=d;a.tw&&a.th&&PIXI.Ext.loadFramedSpriteSheet(a.tw,a.th,d)}"function"==typeof g.__custCB&&(g.__custCB.call(this,g.data),delete g.__custCB)}pjs_complete(a){for(var d=0;d<this.completeCB.length;d++)this.completeCB[d].call(this,a);this.oncomplete(a);this.progressCB=
[];this.fileloadCB=[];this.completeCB=[]}_complete(a){for(var d=0;d<this.completeCB.length;d++)this.completeCB[d].call(this,a);this.oncomplete(a);this.progressCB=[];this.fileloadCB=[];this.completeCB=[]}genId(a){return a.split("?")[0].replace(/([\.\\\/]+)/g,"")}uniq(a){return a.sort().filter(function(a,d,c){return!d||a!=c[d-1]})}queue(a,g){if(a instanceof Array){for(var d=this.uniq(a),c=[],f=0;f<d.length;f++)if("string"==typeof d[f]){var b=d[f],e=this.genId(d[f]);c.push({id:e,src:b});this.loader.resources[e]||
this.loader.add(e,b,{parentResource:this.parentResource})}else c.push(a[f]);"function"==typeof g&&this.completeCB.push(g)}else b=a,e=this.genId(b),this.loader.resources[e]||this.loader.add(e,b,{parentResource:this.parentResource})}load(a,g){if(a instanceof Array)for(var d=[],c=0;c<a.length;c++){var f=a[c],b=this.genId(f);d.push({id:b,src:f})}else this.genId(a);"function"==typeof g&&this.completeCB.push(g);this.start()}start(){const a=this.loader;this.loader.load((a,d)=>{});this.loader.onProgress.add(this._progress.bind(this));
this.loader.onError.add((d)=>{console.log("NEW LOADER onError",d,a)});this.loader.onLoad.add(this._fileload.bind(this));this.loader.onComplete.add(this._complete.bind(this))}get(a,g){var d=this.genId(a);if(this.loader.resources[d])return"function"==typeof g&&g.call(this,this.loader.resources[d].data),this.loader.resources[d].data;this.loader.add(d,a,{parentResource:this.parentResource});"function"==typeof g&&(this.loader.resources[d].__custCB=g);this.loader.loading||this.start()}}a.ResourceLoader=
g})(n.utils||(n.utils={}))})(Ezelia||(Ezelia={}));
function showHeader(){var n=-1!=navigator.userAgent.indexOf("Chrome"),a=-1!=navigator.userAgent.indexOf("Firefox");navigator.userAgent.indexOf("MSIE");n||a?console.log("%c[ %cEzelia %cIsometric Engine %cv1.42 %c]","font-size:16px;font-weight:bold; color: #000;background:#ccc","font-weight:bold;font-size:16px;color:#b33;text-shadow:0 1px 0 #ccc,0 2px 0 #fff,0 3px 0 #bbb;background:#ccc","font-weight:bold;font-size:16px;color:#000;text-shadow:0 1px 0 #ccc,0 2px 0 #fff,0 3px 0 #bbb;background:#ccc","font-size:16px;font-weight:bold; color: #b33;background:#ccc;text-shadow:0 1px 0 #ccc,0 2px 0 #fff,0 3px 0 #bbb;",
"font-size:16px;font-weight:bold; color: #000;background:#ccc"):window.console&&console.log("[ Ezelia Isometric Engine v1.42 ]")}
(function(n){(function(a){showHeader();var g=n.Iso.ECS.Systems;class d extends eee.EventHandler{constructor(a){super();this.settings=a;this.selector="content";this.ecs=new eee.Engine;this.canvas=document.getElementById("cnv")||document.createElement(n.utils.Device.browser.isCocoonJS?"screencanvas":"canvas");this.canvas.id="cnv";this.canvas.width=a.width;this.canvas.height=a.height;(this.container=document.getElementById(this.selector)||document.body)&&this.container.appendChild(this.canvas);this.mRenderer=
new g.PixiRenderer(this.canvas,"boolean"===typeof a.managedRenderer?a.managedRenderer:!0);this.mCamera=new g.Camera(this.canvas.width+(a.tw||0),this.canvas.height+(a.th||0),a.tw||0,a.th||0);this.mMap=new g.Map(a.tw,a.th);this.mGameObject=new g.GameObject;this.mBulletMove=new g.BulletMove;this.mIsoWalk=new g.IsoWalk;this.mInput=new g.Input(this.container);this.mGC=new g.GarbageCollector;this.mBehaviour=new g.Behaviour;this.ecs.insertSystem(this.mCamera,"Camera");this.ecs.insertSystem(this.mMap,"Map");
this.ecs.insertSystem(this.mGameObject,"GameObject");this.ecs.insertSystem(this.mIsoWalk,"IsoWalk");this.ecs.insertSystem(this.mBulletMove,"BulletMove");this.ecs.insertSystem(this.mGC,"GarbageCollector");this.ecs.insertSystem(this.mInput,"Input");this.ecs.insertSystem(this.mRenderer,"Renderer");this.ecs.insertSystem(this.mBehaviour,"Behaviour");this.scheduler=new Scheduler(this.ecs);this.scheduler.sortModules("Camera Map GameObject IsoWalk IsoMove BulletMove Renderer GarbageCollector Input Behaviour".split(" "));
this.mInput.initEventListeners()}start(a){this.ecs.start(this.scheduler);"function"==typeof a&&a()}pause(){this.ecs.pause()}resume(){this.ecs.resume()}}a.Engine=d})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
class Scheduler{constructor(n){this.engine=n;this.modules=[];this.paused=this.stop=!1}tick(){var n=this;if(!this.stop){this.engine.dtime=Date.now()-this.engine.time;this.engine.time=Date.now();if(!this.paused){for(var a=0;a<this.modules.length;a++){var g=this.modules[a];g&&g.update()}"function"==typeof this.tickCB&&this.tickCB()}this.engine.stime=Date.now()-this.engine.time;requestAnimationFrame(function(){n.tick()})}}updateModules(n){this.modules=n.filter((a)=>!0===a.schedulable)}add(n){this.modules.push(n)}remove(n){n=
this.modules.indexOf(n);return 0>n?null:this.modules.splice(n,1)}sortModules(n){this.modules.sort(function(a,g){return(n[a.id]||1E3)-(n[g.id]||1E3)})}}
(function(n){(function(a){class g extends eee.EventHandler{constructor(a,g,h){super();this.source=a;this.lastTime=Date.now();this.animations={frame:{},time:{},scale:{}};this.spriteSheets={};this.currentAnimations=[];this.loop=Infinity;this.ready=!1;this.resloader=new n.utils.ResourceLoader;this.curAnim=g;a&&this.load(a,g,h)}load(a,g,h){var c=this;this.ready=!1;this.source=a;this.baseUrl=a.substr(0,a.lastIndexOf("/")+1);this.resloader.get(a,function(d){d.message&&console.warn(" error loading %s, error message = %s",
a,d.message);c.loadFrames(d,g);"function"==typeof h&&h(c)})}clone(){return new g(this.source)}reset(a=0){this.curPos=a}update(a){if(this.ready){var d=Date.now();void 0==a&&(a=d-this.lastTime);var g=this.animations.frame[this.curAnim],c=this.animations.time[this.curAnim];if(void 0==c)console.warn("/!  time is undefined ");else if(0>=this.loop)this.lastTime=d;else for(;0<a;)if(c[this.curPos]<a)a-=c[this.curPos],this.curPos=(this.curPos+1)%g.length,this.lastTime=d,this.curPos==g.length-1&&this.loop--,
0>=this.loop&&this.trigger("animationEnded",this.curAnim);else break}}draw(a,g=0,h=0,c,f){for(var b=0;b<this.currentAnimations.length;b++){var d=this.animations.frame[this.currentAnimations[b]];if(void 0!=d)if(d=this.spriteSheets[this.currentAnimations[b]].getFrame(d[Math.min(this.curPos,d.length-1)]),d instanceof Array)for(b=0;b<d.length;b++){var k=d[b];a.drawImage(k.img,k.x,k.y,k.w,k.h,g,h,k.w,k.h)}else a.drawImage(d.img,d.x,d.y,d.w,d.h,g,h,c||d.w,f||d.h)}}isAnimation(a){return 0<=this.currentAnimations.indexOf(a)}hasAnimation(a){return this.animations.frame&&
void 0!=this.animations.frame[a]}getFrame(a){var d=this.animations.frame[this.curAnim];return this.spriteSheets[this.curAnim].getFrame(a||d[this.curPos])}getFrameId(){return this.animations.frame[this.curAnim][this.curPos]}getFrameScale(){return this.animations.scale[this.curAnim]}addAnimation(a){!this.isAnimation(a)&&this.hasAnimation(a)&&this.currentAnimations.push(a)}setAnimation(a,g=!0){this.animations.frame[a]&&this.hasAnimation(a)&&(this.curAnim=a,this.currentAnimations[0]=a,this.curPos=0,this.lastTime=
Date.now(),this.loop=!0===g?Infinity:!1===g?1:g)}setAnimations(a,g=!0){if(this.animations.frame[a]||this.animations.frame[a[0]])this.curAnim=a instanceof Array?a[0]:a,this.currentAnimations=a instanceof Array?a:[a],this.curPos=0,this.lastTime=Date.now(),this.loop=!0===g?Infinity:!1===g?1:g}removeAnimation(a){a!=this.curAnim&&0<=this.currentAnimations.indexOf(a)&&this.currentAnimations.splice(this.currentAnimations.indexOf(a),1)}replaceAnimation(a,g){this.hasAnimation(g)&&(this.currentAnimations[this.currentAnimations.indexOf(a)]=
g,a==this.curAnim&&(this.curAnim=g),this.curPos=0,this.lastTime=Date.now())}loadFrames(a,g){for(var d=this,c=0;c<a.length;c++){var f=a[c].compositions,b=new n.Texture.SpriteSheet(this.baseUrl+a[c].texture,a[c].width,a[c].height);(function(b,a){n.utils.Timer.wait(function(){return b.ready},function(){b.loadComposition(a)},1E4,1E3)})(b,f);f=a[c].animations;for(var e in f){d.curAnim||(d.curAnim=e);var k=f[e];this.spriteSheets[e]=b;this.animations.frame[e]=[];this.animations.time[e]=[];this.animations.scale[e]=
k.scale||{x:1,y:1};var m=1E3/60;if(k instanceof Array)var q=k;else k.frames instanceof Array&&(q=k.frames,m=k.dt||1E3/60);if(q)for(k=0;k<q.length;k++){var x=-1,r=m,u=q[k];u instanceof Array&&2==u.length?(x=u[0],r=u[1]):"string"==typeof u?x=u:isNaN(u)?(x=u.id||-1,r=u.dt||m):x=u;this.animations.frame[e].push(x);this.animations.time[e].push(r)}}}this.curPos=0;this.curAnim=g||this.curAnim;this.currentAnimations=[this.curAnim];this.currentSpriteSheet=this.spriteSheets[this.curAnim];var v=setInterval(function(){for(var b in d.spriteSheets)if(!d.spriteSheets[b].ready)return;
d.ready=!0;clearInterval(v)},100)}}a.FrameSprite=g})(n.Anim||(n.Anim={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){class g extends eee.EventHandler{constructor(a,g,h){super();this.source=a;this.defaultAnimationId=g;this.readyCB=h;this.resloader=PIXI.loader;this.lastTime=Date.now();this.loop=Infinity;this.animationIds=[];this.ready=!1;this.curAnim=g;a&&this.load(a,g,h)}load(a,g,h){this.ready=!1;this.source=a;this.resloader.add(a).load(this.onAssetsLoaded.bind(this))}onAssetsLoaded(){var a=new PIXI.spine.Spine(this.resloader.resources[this.source].spineData);a.skeleton.setToSetupPose();
a.update(0);this.spineInstance=a;this.spineSprite=new PIXI.Container;this.spineSprite.addChild(a);var g=a.getLocalBounds();a.position.set(-g.x,-g.y);this.ready=!0;for(g=0;g<a.state.data.skeletonData.animations.length;g++)this.animationIds.push(a.state.data.skeletonData.animations[g].name);"function"==typeof this.readyCB&&this.readyCB(this)}update(a){if(this.ready){var d=Date.now();void 0==a&&(a=(d-this.lastTime)/1E3);this.spineInstance.update(a);this.lastTime=d}}draw(a,g,h,c,f){}isAnimation(a){console.error("Not implemented");
throw Error();}hasAnimation(a){return 0<=this.animationIds.indexOf(a)}getFrame(a){console.error("Not implemented");throw Error();}getFrameId(){console.error("Not implemented");throw Error();}addAnimation(a){console.error("Not implemented");throw Error();}setAnimation(a,g=!0){this.hasAnimation(a)||(a=this.animationIds[0]);this.spineInstance.state.setAnimationByName(0,a,!0===g);if("number"==typeof g)for(var d=0;d<g-1;d++)this.spineInstance.state.addAnimationByName(0,a,!1)}}a.SpineAnimation=g})(n.Anim||
(n.Anim={}))})(Ezelia||(Ezelia={}));(function(n){(function(a){class g{constructor(){this.frameHeight=this.frameWidth=0}getFrame(a){}}a.Sprite=g})(n.Texture||(n.Texture={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){class g extends a.Sprite{constructor(a){super();this.images={};this.ready=!1;this.cache={};this.baseUrl=a.substr(0,a.lastIndexOf("/")+1);this.resLoader=new n.utils.ResourceLoader;a.indexOf(".json")?this.loadJsonAtlas(a):this.loadAtlas(a)}loadJsonAtlas(a){var d=this;this.resLoader.get(a,function(a){d.atlasFrames={};for(var c in a.frames){var f=a.frames[c],b=c.replace(".png","");d.atlasFrames[b]={x:f.frame.x,y:f.frame.y,w:f.frame.w,h:f.frame.h,sx:f.spriteSourceSize.x,sy:f.spriteSourceSize.y,
ow:f.sourceSize.x,oh:f.sourceSize.x,src:a.meta.image}}d.resLoader.get(d.baseUrl+a.meta.image,function(b){d.images[a.meta.image]=b;d.ready=!0})})}loadAtlas(a){var d=this;this.resLoader.get(a,function(a){a=d.parseAtlas(a);d.atlasFrames={};var c=0,f;for(f in a){c++;for(var b in a[f].frames){var e=a[f].frames[b];d.atlasFrames[b]={x:e.xy[0],y:e.xy[1],w:e.size[0],h:e.size[1],sx:e.offset[0],sy:e.offset[1],ow:e.orig[0],oh:e.orig[1],src:f}}d.resLoader.get(d.baseUrl+f,function(b){d.images[f]=b;c--})}var g=
setInterval(function(){0>=c&&(clearInterval(g),d.ready=!0)},100)})}parseAtlas(a){var d=["format","filter","repeat"];a=a.replace(/\n([^:\n]+)\n([a-z0-9\\_]+):(.+)\n{0,1}/gm,function(a,d,b,e){return"###"+d+"###:{\n"+(b+":"+e+"\n")});a=a.replace(/\n([^:#]+)\n/g,function(a,d){return"\n"+("##"+d.replace(/[\n\s]+/g,"")+"## : {\n")});a=a.replace(/([a-z0-9\\_]+):(.+)\n{0,1}/g,function(a,d,b){a=b.match(/[0-9,\-\.]+/g);var c=b.match(/(true|false)+/gi),f=b.match(/([a-z_\\\/])+/gi);b=b.replace(/\s+/,"");return f&&
!c?'"'+d+'":"'+b+'",\n':c||a&&1==a.length?'"'+d+'":'+b+",\n":a&&1<a.length?'"'+d+'": ['+b+"],\n":'"'+d+'":"'+b+'",\n'});var g=!0;a=a.replace(/(###[^:]+###)/g,function(a,d){a=g?"":"}\n}\n},\n";a+='"'+d.replace(/#{3}/g,"")+'"';g=!1;return a});a=a.replace(/([^:,]+):([^:]+),\n+(##[^:]+##)/gm,function(a,f,b,e){a=f.replace(/["\n\s]+/g,"");return-1<d.indexOf(a)?f+":"+b+",\n"+('"frames" : {\n'+e):f+":"+b+"},\n"+e});a=(a+"\n}\n}}").replace(/,([\s\n\t\r])+}/g,"$1}");a=a.replace(/"[\s\n\t\r]+(.+)/g,'"$1');a=
a.replace(/#{2}/g,'"');return JSON.parse("{"+a+"}")}getFrame(a){if(!this.ready)return null;if(!a&&this.atlasFrames)for(var d in this.atlasFrames){a=d;break}if(this.cache[a])return this.cache[a];if(!this.atlasFrames)return null;this.cache[a]=this.atlasFrames[a];this.cache[a].img=this.images[this.cache[a].src];return this.cache[a]}}a.Atlas=g})(n.Texture||(n.Texture={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){var g={};class d extends a.Sprite{constructor(a,d,c,f=0){super();this.source=a;this.frameWidth=d;this.frameHeight=c;this.defaultframe=f;this.ready=!1;this.compositions=[];this.cache={};d=a+"_"+d+"x"+c;if(g[d])return g[d];this.baseUrl=a.substr(0,a.lastIndexOf("/")+1);this.resLoader=new n.utils.ResourceLoader;if(a){var b=this;this.resLoader.get(a,function(a){"string"==typeof a&&(a=JSON.parse(a));b.frameWidth=b.frameWidth||a.width;b.frameHeight=b.frameHeight||a.height;if(a instanceof
Image||"HTMLImageElement"==a.constructor.name){b.img=a;if(n.utils.Device.isLowRes&&!c){var c=document.createElement("canvas");c.width=a.width/2;c.height=a.height/2;c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);b.img=c}b.ready=!0}b.isComposition(a)&&b.resLoader.get(a.texture,function(c){b.img=c;if(n.utils.Device.isLowRes&&!d){var d=document.createElement("canvas");d.width=c.width/2;d.height=c.height/2;d.getContext("2d").drawImage(c,0,0,c.width,c.height,0,0,d.width,d.height);
b.img=d}b.ready=!0;b.loadComposition(a)})})}g[d]=this}loadComposition(a){var d=this;if(a)if("string"==typeof a)this.resLoader.get(a,function(b){d.loadComposition(b)});else{a=a.compositions||a;d.frameWidth=a.width||d.frameWidth;d.frameHeight=a.height||d.frameHeight;for(var c in a){for(var f=a[c],b=0,e=0;e<f.length;e++)b=Math.max(b,f[e].length||1);if(0!=b){var g=!1;for(e=0;e<b;e++)this.cache[""+c+e]?g=!0:this.cache[""+c+e]=[];if(!g)for(g=0;g<f.length;g++)for(e=0;e<b;e++)f[g]instanceof Array&&void 0!=
f[g]&&void 0!=f[g][e]?this.cache[""+c+e].push(this.getFrame(f[g][e])):void 0!=f[g]&&this.cache[""+c+e].push(this.getFrame(f[g]))}}d.ready=!0}}isComposition(a){return a.texture&&void 0!=a.width&&void 0!=a.height&&a.compositions}getFrame(a){void 0==a&&(a=this.defaultframe);if(!this.ready)return null;if(this.cache[a])return this.cache[a];var d=this.img,c=this.frameWidth,f=this.frameHeight;n.utils.Device.isLowRes&&(c=Math.min(this.frameWidth/2,this.img.width),f=Math.min(this.frameHeight/2,this.img.height));
this.cache[a]={x:a%(d.width/c)*c,y:Math.floor(a/(d.width/c))*f,w:c,h:f,img:d,ratio:n.utils.Device.isLowRes?.5:1};return this.cache[a]}getFrameXY(a,d){return!this.ready||0>a||a>this.hframes||0>d||d>this.vframes?null:{x:a*this.frameWidth,y:d*this.frameHeight,w:this.frameWidth,h:this.frameHeight}}}a.SpriteSheet=d})(n.Texture||(n.Texture={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(a=0,c=0,d=0){this.x=a;this.y=c;this.z=d;this.zFactor=1;this.zAdjust=0}}d.__label__="coords";a.CCoords=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(a=0,c=0,d={x:.5,y:.5}){this.width=a;this.height=c;this.anchor=d}}d.__label__="dim";a.CDim=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(){this._pressedKeys={};this._mouse=new Types.TMouse;this.hover=!1}get pressedKeys(){return this._pressedKeys}set pressedKeys(a){for(var c in a)this._pressedKeys[c]=a[c]}get mouse(){return this._mouse}set mouse(a){this._mouse.down=a.down;this._mouse.screenX=a.screenX;this._mouse.screenY=a.screenY}}d.__label__="inputData";a.CInput=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(a=0,c=0,d=0){this.x=a;this.y=c;this.z=d}}d.__label__="pos";a.CPos=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));(function(n){(function(a){(function(a){(function(a){class d{constructor(){}}d.__label__="props";a.CProps=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(){this.loading=this.initOnRegister=!1;this.layerId="";this.visible=!0;this._lastanimId="";this.tint=16777215;this.alpha=1;this.anchor={x:.5,y:.5};this.offset={x:0,y:0};this.scale={x:1,y:1};this.rotation=0;this.lastframe=-1;this.dirty=!1}}d.__label__="skin";a.CSkin=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(a){class d{constructor(){this.skinPrefix="idle";this.path=[];this.lastLength=0;this.speed=30}}d.__label__="walk";a.CWalk=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));(function(n){(function(a){(function(a){(function(a){class d{constructor(a=0,c=0){this.x=a;this.y=c}}d.__label__="tile";a.CTile=d})(a.Components||(a.Components={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){(function(d){class g extends eee.System{constructor(d,c){super(["Camera"]);this.engine=d;this.cameraEntity=c;this.lrpFactor=.05;this.lrpFactorStop=.15;this.nofollow=!1;this.zoom=this.targetZoom=1;this.zoomFactor=.05;this.followFactorMultiplicator=1;this.offset={x:0,y:0};this.cameraEntity||(this.cameraEntity=d.ecs.createEntity(new a.Components.CPos(0,0)))}init(){super.init();this.mCamera=this.ecs.data.modules.get("Camera")}smoothZoomTo(a,c=.05){this.targetZoom=
a;this.zoomFactor=c}follow(a,c=.05,d=.15,b=0,e=0){this.originalTarget=this.mCamera.target;this.mCamera.setTarget(this.cameraEntity);this.targetEntity=a instanceof eee.Entity?a:a.entity;this.lrpFactor=c;this.lrpFactorStop=d;this.offset.x=b;this.offset.y=e}setCameraPos(a,c){this.cameraEntity.pos.x=a;this.cameraEntity.pos.y=c}unfollow(){this.mCamera.setTarget(this.originalTarget);this.targetEntity=void 0}update(){if(!this.nofollow&&this.targetEntity&&this.targetEntity.pos){var a=this.lrpFactor;this.targetEntity.walk&&
!this.targetEntity.walk.moving&&(a=this.lrpFactorStop);a*=this.followFactorMultiplicator;this.cameraEntity.pos.x+=(this.targetEntity.pos.x-this.cameraEntity.pos.x+this.offset.x)*a;this.cameraEntity.pos.y+=(this.targetEntity.pos.y-this.cameraEntity.pos.y+this.offset.y)*a}1E-4<Math.abs(this.targetZoom-this.zoom)&&(this.zoom+=(this.targetZoom-this.zoom)*this.zoomFactor,this.mCamera.zoom(this.zoom))}}d.CameraMoves=g})(a.Systems||(a.Systems={}))})(a.ECS||(a.ECS={}))})(n.Iso||(n.Iso={}))})(Ezelia||(Ezelia=
{}));var TPos={C:{x:0,y:0},N:{x:-1,y:-1},NE:{x:0,y:-1},E:{x:1,y:-1},SE:{x:1,y:0},S:{x:1,y:1},SW:{x:0,y:1},W:{x:-1,y:1},NW:{x:-1,y:0}},POS_MULTIPLICATOR=3,Pos2Code={},Code2Pos={},p;for(p in TPos)Pos2Code[p]=TPos[p].x*POS_MULTIPLICATOR+TPos[p].y;for(p in TPos)Code2Pos[TPos[p].x*POS_MULTIPLICATOR+TPos[p].y]=p;var Dir2Angle=[];Dir2Angle[Pos2Code.NW]=45;Dir2Angle[Pos2Code.SE]=-135;Dir2Angle[Pos2Code.SW]=135;Dir2Angle[Pos2Code.NE]=-45;Dir2Angle[Pos2Code.N]=0;Dir2Angle[Pos2Code.S]=180;
Dir2Angle[Pos2Code.W]=90;Dir2Angle[Pos2Code.E]=-90;var Angle2DIR=[];Angle2DIR[Dir2Angle[Pos2Code.N]]=Pos2Code.N;Angle2DIR[Dir2Angle[Pos2Code.S]]=Pos2Code.S;Angle2DIR[Dir2Angle[Pos2Code.E]]=Pos2Code.E;Angle2DIR[Dir2Angle[Pos2Code.W]]=Pos2Code.W;Angle2DIR[Dir2Angle[Pos2Code.NE]]=Pos2Code.NE;Angle2DIR[Dir2Angle[Pos2Code.NW]]=Pos2Code.NW;Angle2DIR[Dir2Angle[Pos2Code.SE]]=Pos2Code.SE;Angle2DIR[Dir2Angle[Pos2Code.SW]]=Pos2Code.SW;
void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var n=/function\s([^(]{1,})\(/.exec(this.toString());return n&&1<n.length?n[1].trim():""},set:function(n){}});String.prototype.endsWith||(String.prototype.endsWith=function(n){return-1!==this.indexOf(n,this.length-n.length)});var tools;
(function(n){(function(a){function g(a){this.element="string"==typeof a?document.getElementById(a):a;this.css=function(){if(2==arguments.length)this.element.style[arguments[0]]=arguments[1];else if(arguments[0]instanceof Object)for(var a in arguments[0])void 0!==arguments[0][a]&&(this.element.style[a]=arguments[0][a]);return this};return this instanceof g?this.select:new g(a)}function d(a,d){return parseInt(a.getPropertyValue(d),10)}a.select=g;a.getNumericStyleProperty=d;a.element_position=function(a){var g=
0,c=0,f=!0;do{g+=a.offsetLeft;c+=a.offsetTop;var b=getComputedStyle(a,null),e=d(b,"border-top-width"),k=d(b,"border-left-width");c+=e;g+=k;f&&(f=d(b,"padding-top"),b=d(b,"padding-left"),c+=f,g+=b);f=!1}while(a=a.offsetParent);return{x:g,y:c}};a.triggerDomEvent=function(a,d,c){if(document.createEvent){var f=document.createEvent("HTMLEvents");f.initEvent(d,!0,!0)}else f=document.createEventObject(),f.eventType=d;f.eventName=d;f.sender=c;document.createEvent?a.dispatchEvent(f):a.fireEvent("on"+f.eventType,
f)};a.AddEvent=function(a,d,c){a.addEventListener?a.addEventListener(d,c,!1):a.attachEvent&&a.attachEvent("on"+d,function(){c.call(a)})};a.Ready=function(a){var d=window;if(navigator.isCocoonJS)a.call(d);else{var c=!1,f=!0,b=d.document,e=b.documentElement,g=b.addEventListener?"addEventListener":"attachEvent",k=b.addEventListener?"removeEventListener":"detachEvent",n=b.addEventListener?"":"on",x=function(e){if("readystatechange"!=e.type||"complete"==b.readyState)("load"==e.type?d:b)[k](n+e.type,x,
!1),!c&&(c=!0)&&a.call(d,e.type||e)},r=function(){try{e.doScroll("left")}catch(u){setTimeout(r,50);return}x("poll")};if("complete"==b.readyState)a.call(d,"lazy");else{if(b.createEventObject&&e.doScroll){try{f=!d.frameElement}catch(u){}f&&r()}b[g](n+"DOMContentLoaded",x,!1);b[g](n+"readystatechange",x,!1);d[g](n+"load",x,!1)}}}})(n.DOM||(n.DOM={}))})(tools||(tools={}));
(function(n){(function(a){(function(a){a.browser={};a.size={};a.isLandscape=!1;a.isPortrait=!1;a.detected=!1;a.isLowRes=!1;a.isCocoonJS=!1;a.isCordova=!!window.isCordovaApp;a.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/IEMobile/i);document.cancelFullScreen=
document.webkitExitFullscreen||document.mozCancelFullScreen||document.exitFullscreen;a.setFullscreen=function(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):a.mozRequestFullScreen?a.mozRequestFullScreen():a.requestFullscreen()};a.exitFullscreen=function(){document.cancelFullScreen()};a.detect=function(){if(!this.detected){this.detected=!0;if(this.isCocoonJS=navigator.isCocoonJS)this.browser.isCocoonJS=!0;navigator.userAgent.match(/iPhone/i)&&(this.browser.iphone=
!0);navigator.userAgent.match(/iPad/i)&&(this.browser.ipad=!0);navigator.userAgent.match(/Android/i)&&(this.browser.android=!0);if(this.browser.iphone||this.browser.android||this.browser.ipad||this.browser.isCocoonJS)this.browser.mobile=!0;this.size.width=this.size.maxWidth||window.innerWidth;this.size.height=this.size.maxHeight||window.innerHeight;tools.DOM.AddEvent(window,"orientationchange",function(d){a.size.width=a.size.maxWidth||window.innerWidth;a.size.height=a.size.maxHeight||window.innerHeight;
a.isLandscape=null!=window.orientation?0!=window.orientation:window.innerWidth>window.innerHeight;a.isPortrait=!a.isLandscape});tools.DOM.AddEvent(window,"resize",function(d){a.size.width=a.size.maxWidth||window.innerWidth;a.size.height=a.size.maxHeight||window.innerHeight;a.isLandscape=null!=window.orientation?0!=window.orientation:window.innerWidth>window.innerHeight;a.isPortrait=!a.isLandscape});a.isLowRes=400>this.size.width||400>this.size.height;a.isLandscape=null!=window.orientation?0!=window.orientation:
window.innerWidth>window.innerHeight;a.isPortrait=!a.isLandscape}}})(a.Device||(a.Device={}))})(n.utils||(n.utils={}))})(Ezelia||(Ezelia={}));Ezelia.utils.Device.detect();
(function(n){(function(a){a.linear=function(a,d,k,h){return k*a/h+d};a.quinticIn=function(a,d,k,h){h=(a/=h)*a;return d+k*h*a*h};a.easeInCubic=function(a,d,k,h){a/=h;return k*a*a*a+d};a.easeParabolic=function(a,d,k,h){a=a/h*2-1;return(-(a*a)+1)*(d+k)+d};a.test=function(a,d,k,h){return k*((a=a/h-1)*a*(-9*a+-10)+1)+d}})(n.easing||(n.easing={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){function g(a,g,h){var c=g.x-a.x;a=g.y-a.y;var d=g.x-h.x;g=g.y-h.y;return Math.floor(180*Math.atan2(c*g-a*d,c*d+a*g)/Math.PI+.5)}a.round=function(a){return.5+a<<0};a.random=function(a,g){return Math.floor(Math.random()*(g-a+1)+a)};a.distance=function(a,g,h,c){return Math.sqrt(Math.pow(h-a,2)+Math.pow(c-g,2))};a.getAngle=g;a.getDirection=function(a,k,h,c){a=g({x:h,y:c},{x:a,y:k},{x:a-1,y:k-1});k=360;for(var d in Pos2Code)if(h=Math.abs(Dir2Angle[Pos2Code[d]]-a),Math.abs(h)<
k){k=Math.abs(h);var b=Pos2Code[d]}return b};a.sign=function(a){return a/Math.abs(a)||0};a.d2h=function(a){return a.toString(16)};a.h2d=function(a){return parseInt(a,16)};a.d2o=function(a){return a.toString(8)};a.o2d=function(a){return parseInt(a,8)}})(n.math||(n.math={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){a.resolve=function(a){a=a.split("/");const d=[],g=[];let c;for(;c=a.shift();){if(0<g.length){if("."==c||""==c)continue;if(".."==c){d.pop();g.pop();continue}}""!=c&&"."!=c&&".."!=c&&g.push(c);d.push(c)}return d.join("/")};a.getBaseDir=function(a){return a.substring(0,a.lastIndexOf("/")+1)}})(a.Path||(a.Path={}))})(n.utils||(n.utils={}))})(Ezelia||(Ezelia={}));
(function(n){(function(a){(function(a){a.wait=function(a,g,h,c){if("function"!=typeof a||"function"!=typeof g)return!1;c=c||100;var d=(new Date).getTime(),b=setInterval(function(){a()&&(clearInterval(b),g());h&&(new Date).getTime()-d>=h&&clearInterval(b)},c);return!0}})(a.Timer||(a.Timer={}))})(n.utils||(n.utils={}))})(Ezelia||(Ezelia={}));
